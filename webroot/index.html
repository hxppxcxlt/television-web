<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml><head><title>television</title><link rel=icon href="data:image/x-icon;base64,R0lGODlhAQABAJAAAAAAAAAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw=="/><meta charset=utf-8 /><meta name=viewport content="width=device-width,initial-scale=1"/><meta name=theme-color content=#FFFFFF /><script type=module>//assets/index.b408d3db.js
const ei=function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))A(b);new MutationObserver(b=>{for(const _ of b)if(_.type==="childList")for(const T of _.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&A(T)}).observe(document,{childList:!0,subtree:!0});function E(b){const _={};return b.integrity&&(_.integrity=b.integrity),b.referrerpolicy&&(_.referrerPolicy=b.referrerpolicy),b.crossorigin==="use-credentials"?_.credentials="include":b.crossorigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function A(b){if(b.ep)return;b.ep=!0;const _=E(b);fetch(b.href,_)}};ei();const Gt={},ti=(h,y)=>h===y,$t=Symbol("solid-proxy"),jr={equals:ti};let ri=Pn;const Qt={},jt=1,Kr=2,_n={owned:null,cleanups:null,context:null,owner:null};var nt=null;let Er=null,Ve=null,yr=null,Je=null,wt=null,un=0;function ni(h,y){const E=Ve,A=nt,b=h.length===0?_n:{owned:null,cleanups:null,context:null,owner:y||A};nt=b,Ve=null;try{return hn(()=>h(()=>cn(b)),!0)}finally{Ve=E,nt=A}}function xn(h,y){y=y?Object.assign({},jr,y):jr;const E={value:h,observers:null,observerSlots:null,pending:Qt,comparator:y.equals||void 0},A=b=>(typeof b=="function"&&(b=b(E.pending!==Qt?E.pending:E.value)),dn(E,b));return[On.bind(E),A]}function ii(h,y,E){const A=fn(h,y,!0,jt);Sr(A)}function _t(h,y,E){const A=fn(h,y,!1,jt);Sr(A)}function Jt(h,y,E){E=E?Object.assign({},jr,E):jr;const A=fn(h,y,!0,0);return A.pending=Qt,A.observers=null,A.observerSlots=null,A.comparator=E.equals||void 0,Sr(A),On.bind(A)}function kn(h){if(yr)return h();let y;const E=yr=[];try{y=h()}finally{yr=null}return hn(()=>{for(let A=0;A<E.length;A+=1){const b=E[A];if(b.pending!==Qt){const _=b.pending;b.pending=Qt,dn(b,_)}}},!1),y}function Tr(h){let y,E=Ve;return Ve=null,y=h(),Ve=E,y}function wn(){return Ve}function ai(h){const y=Symbol("context");return{id:y,Provider:ui(y),defaultValue:h}}function si(h){let y;return(y=Nn(nt,h.id))!==void 0?y:h.defaultValue}function Cn(h){const y=Jt(h);return Jt(()=>sn(y()))}function On(){const h=Er;if(this.sources&&(this.state||h)){const y=Je;Je=null,this.state===jt||h?Sr(this):Vr(this),Je=y}if(Ve){const y=this.observers?this.observers.length:0;Ve.sources?(Ve.sources.push(this),Ve.sourceSlots.push(y)):(Ve.sources=[this],Ve.sourceSlots=[y]),this.observers?(this.observers.push(Ve),this.observerSlots.push(Ve.sources.length-1)):(this.observers=[Ve],this.observerSlots=[Ve.sources.length-1])}return this.value}function dn(h,y,E){if(yr)return h.pending===Qt&&yr.push(h),h.pending=y,y;if(h.comparator&&h.comparator(h.value,y))return y;let A=!1;return h.value=y,h.observers&&h.observers.length&&hn(()=>{for(let b=0;b<h.observers.length;b+=1){const _=h.observers[b];A&&Er.disposed.has(_),(A&&!_.tState||!A&&!_.state)&&(_.pure?Je.push(_):wt.push(_),_.observers&&Fn(_)),A||(_.state=jt)}if(Je.length>1e6)throw Je=[],new Error},!1),y}function Sr(h){if(!h.fn)return;cn(h);const y=nt,E=Ve,A=un;Ve=nt=h,oi(h,h.value,A),Ve=E,nt=y}function oi(h,y,E){let A;try{A=h.fn(y)}catch(b){Mn(b)}(!h.updatedAt||h.updatedAt<=E)&&(h.observers&&h.observers.length?dn(h,A):h.value=A,h.updatedAt=E)}function fn(h,y,E,A=jt,b){const _={fn:h,state:A,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:y,owner:nt,context:null,pure:E};return nt===null||nt!==_n&&(nt.owned?nt.owned.push(_):nt.owned=[_]),_}function In(h){const y=Er;if(h.state===0||y)return;if(h.state===Kr||y)return Vr(h);if(h.suspense&&Tr(h.suspense.inFallback))return h.suspense.effects.push(h);const E=[h];for(;(h=h.owner)&&(!h.updatedAt||h.updatedAt<un);)(h.state||y)&&E.push(h);for(let A=E.length-1;A>=0;A--)if(h=E[A],h.state===jt||y)Sr(h);else if(h.state===Kr||y){const b=Je;Je=null,Vr(h,E[0]),Je=b}}function hn(h,y){if(Je)return h();let E=!1;y||(Je=[]),wt?E=!0:wt=[],un++;try{return h()}catch(A){Mn(A)}finally{li(E)}}function li(h){Je&&(Pn(Je),Je=null),!h&&(wt.length?kn(()=>{ri(wt),wt=null}):wt=null)}function Pn(h){for(let y=0;y<h.length;y++)In(h[y])}function Vr(h,y){const E=Er;h.state=0;for(let A=0;A<h.sources.length;A+=1){const b=h.sources[A];b.sources&&(b.state===jt||E?b!==y&&In(b):(b.state===Kr||E)&&Vr(b,y))}}function Fn(h){const y=Er;for(let E=0;E<h.observers.length;E+=1){const A=h.observers[E];(!A.state||y)&&(A.state=Kr,A.pure?Je.push(A):wt.push(A),A.observers&&Fn(A))}}function cn(h){let y;if(h.sources)for(;h.sources.length;){const E=h.sources.pop(),A=h.sourceSlots.pop(),b=E.observers;if(b&&b.length){const _=b.pop(),T=E.observerSlots.pop();A<b.length&&(_.sourceSlots[T]=A,b[A]=_,E.observerSlots[A]=T)}}if(h.owned){for(y=0;y<h.owned.length;y++)cn(h.owned[y]);h.owned=null}if(h.cleanups){for(y=0;y<h.cleanups.length;y++)h.cleanups[y]();h.cleanups=null}h.state=0,h.context=null}function Mn(h){throw h}function Nn(h,y){return h?h.context&&h.context[y]!==void 0?h.context[y]:Nn(h.owner,y):void 0}function sn(h){if(typeof h=="function"&&!h.length)return sn(h());if(Array.isArray(h)){const y=[];for(let E=0;E<h.length;E++){const A=sn(h[E]);Array.isArray(A)?y.push.apply(y,A):y.push(A)}return y}return h}function ui(h){return function(E){let A;return ii(()=>A=Tr(()=>(nt.context={[h]:E.value},Cn(()=>E.children)))),A}}function we(h,y){return Tr(()=>h(y))}function br(h){let y=!1;const E=Jt(()=>h.when,void 0,{equals:(A,b)=>y?A===b:!A==!b});return Jt(()=>{const A=E();if(A){const b=h.children;return(y=typeof b=="function"&&b.length>0)?Tr(()=>b(A)):b}return h.fallback})}function di(h){let y=!1;const E=Cn(()=>h.children),A=Jt(()=>{let b=E();Array.isArray(b)||(b=[b]);for(let _=0;_<b.length;_++){const T=b[_].when;if(T)return[_,T,b[_]]}return[-1]},void 0,{equals:(b,_)=>b[0]===_[0]&&(y?b[1]===_[1]:!b[1]==!_[1])&&b[2]===_[2]});return Jt(()=>{const[b,_,T]=A();if(b<0)return h.fallback;const c=T.children;return(y=typeof c=="function"&&c.length>0)?Tr(()=>c(_)):c})}function bn(h){return h}const fi=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],hi=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...fi]),ci=new Set(["innerHTML","textContent","innerText","children"]),vi={className:"class",htmlFor:"for"},En={class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"},gi=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),mi={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function pi(h,y,E){let A=E.length,b=y.length,_=A,T=0,c=0,B=y[b-1].nextSibling,I=null;for(;T<b||c<_;){if(y[T]===E[c]){T++,c++;continue}for(;y[b-1]===E[_-1];)b--,_--;if(b===T){const X=_<A?c?E[c-1].nextSibling:E[_-c]:B;for(;c<_;)h.insertBefore(E[c++],X)}else if(_===c)for(;T<b;)(!I||!I.has(y[T]))&&y[T].remove(),T++;else if(y[T]===E[_-1]&&E[c]===y[b-1]){const X=y[--b].nextSibling;h.insertBefore(E[c++],y[T++].nextSibling),h.insertBefore(E[--_],X),y[b]=E[_]}else{if(!I){I=new Map;let q=c;for(;q<_;)I.set(E[q],q++)}const X=I.get(y[T]);if(X!=null)if(c<X&&X<_){let q=T,H=1,V;for(;++q<b&&q<_&&!((V=I.get(y[q]))==null||V!==X+H);)H++;if(H>X-c){const G=y[T];for(;c<X;)h.insertBefore(E[c++],G)}else h.replaceChild(E[c++],y[T++])}else T++;else y[T++].remove()}}}const Tn="_$DX_DELEGATE";function yi(h,y,E){let A;return ni(b=>{A=b,y===document?h():Li(y,h(),y.firstChild?null:void 0,E)}),()=>{A(),y.textContent=""}}function xt(h,y,E){const A=document.createElement("template");A.innerHTML=h;let b=A.content.firstChild;return E&&(b=b.firstChild),b}function bi(h,y=window.document){const E=y[Tn]||(y[Tn]=new Set);for(let A=0,b=h.length;A<b;A++){const _=h[A];E.has(_)||(E.add(_),y.addEventListener(_,Ri))}}function Bn(h,y,E){E==null?h.removeAttribute(y):h.setAttribute(y,E)}function Un(h,y,E,A){A==null?h.removeAttributeNS(y,E):h.setAttributeNS(y,E,A)}function Ei(h,y,E,A){A?Array.isArray(E)?(h[`$$${y}`]=E[0],h[`$$${y}Data`]=E[1]):h[`$$${y}`]=E:Array.isArray(E)?h.addEventListener(y,b=>E[0](E[1],b)):h.addEventListener(y,E)}function Ti(h,y,E={}){const A=Object.keys(y||{}),b=Object.keys(E);let _,T;for(_=0,T=b.length;_<T;_++){const c=b[_];!c||c==="undefined"||y[c]||(Sn(h,c,!1),delete E[c])}for(_=0,T=A.length;_<T;_++){const c=A[_],B=!!y[c];!c||c==="undefined"||E[c]===B||!B||(Sn(h,c,!0),E[c]=B)}return E}function Si(h,y,E={}){const A=h.style,b=typeof E=="string";if(y==null&&b||typeof y=="string")return A.cssText=y;b&&(A.cssText=void 0,E={}),y||(y={});let _,T;for(T in E)y[T]==null&&A.removeProperty(T),delete E[T];for(T in y)_=y[T],_!==E[T]&&(A.setProperty(T,_),E[T]=_);return E}function kt(h,y,E,A){typeof y=="function"?_t(b=>An(h,y(),b,E,A)):An(h,y,void 0,E,A)}function Li(h,y,E,A){if(E!==void 0&&!A&&(A=[]),typeof y!="function")return Zt(h,y,A,E);_t(b=>Zt(h,y(),b,E),A)}function Ai(h,y,E,A,b={},_=!1){y||(y={});for(const T in b)if(!(T in y)){if(T==="children")continue;Ln(h,T,null,b[T],E,_)}for(const T in y){if(T==="children"){A||Zt(h,y.children);continue}const c=y[T];b[T]=Ln(h,T,c,b[T],E,_)}}function Di(h){return h.toLowerCase().replace(/-([a-z])/g,(y,E)=>E.toUpperCase())}function Sn(h,y,E){const A=y.trim().split(/\s+/);for(let b=0,_=A.length;b<_;b++)h.classList.toggle(A[b],E)}function Ln(h,y,E,A,b,_){let T,c,B;if(y==="style")return Si(h,E,A);if(y==="classList")return Ti(h,E,A);if(E===A)return A;if(y==="ref")_||E(h);else if(y.slice(0,3)==="on:")h.addEventListener(y.slice(3),E);else if(y.slice(0,10)==="oncapture:")h.addEventListener(y.slice(10),E,!0);else if(y.slice(0,2)==="on"){const I=y.slice(2).toLowerCase(),X=gi.has(I);Ei(h,I,E,X),X&&bi([I])}else if((B=ci.has(y))||!b&&(En[y]||(c=hi.has(y)))||(T=h.nodeName.includes("-")))T&&!c&&!B?h[Di(y)]=E:h[En[y]||y]=E;else{const I=b&&y.indexOf(":")>-1&&mi[y.split(":")[0]];I?Un(h,I,y,E):Bn(h,vi[y]||y,E)}return E}function Ri(h){const y=`$$${h.type}`;let E=h.composedPath&&h.composedPath()[0]||h.target;for(h.target!==E&&Object.defineProperty(h,"target",{configurable:!0,value:E}),Object.defineProperty(h,"currentTarget",{configurable:!0,get(){return E||document}}),window._$HY&&!Gt.done&&(Gt.done=!0,document.querySelectorAll("[id^=pl-]").forEach(A=>A.remove()));E!==null;){const A=E[y];if(A&&!E.disabled){const b=E[`${y}Data`];if(b!==void 0?A(b,h):A(h),h.cancelBubble)return}E=E.host&&E.host!==E&&E.host instanceof Node?E.host:E.parentNode}}function An(h,y,E={},A,b){return y||(y={}),!b&&"children"in y&&_t(()=>E.children=Zt(h,y.children,E.children)),y.ref&&y.ref(h),_t(()=>Ai(h,y,A,!0,E,!0)),E}function Zt(h,y,E,A,b){for(Gt.context&&!E&&(E=[...h.childNodes]);typeof E=="function";)E=E();if(y===E)return E;const _=typeof y,T=A!==void 0;if(h=T&&E[0]&&E[0].parentNode||h,_==="string"||_==="number"){if(Gt.context)return E;if(_==="number"&&(y=y.toString()),T){let c=E[0];c&&c.nodeType===3?c.data=y:c=document.createTextNode(y),E=zt(h,E,A,c)}else E!==""&&typeof E=="string"?E=h.firstChild.data=y:E=h.textContent=y}else if(y==null||_==="boolean"){if(Gt.context)return E;E=zt(h,E,A)}else{if(_==="function")return _t(()=>{let c=y();for(;typeof c=="function";)c=c();E=Zt(h,c,E,A)}),()=>E;if(Array.isArray(y)){const c=[];if(on(c,y,b))return _t(()=>E=Zt(h,c,E,A,!0)),()=>E;if(Gt.context){for(let B=0;B<c.length;B++)if(c[B].parentNode)return E=c}if(c.length===0){if(E=zt(h,E,A),T)return E}else Array.isArray(E)?E.length===0?Dn(h,c,A):pi(h,E,c):(E&&zt(h),Dn(h,c));E=c}else if(y instanceof Node){if(Gt.context&&y.parentNode)return E=T?[y]:y;if(Array.isArray(E)){if(T)return E=zt(h,E,A,y);zt(h,E,null,y)}else E==null||E===""||!h.firstChild?h.appendChild(y):h.replaceChild(y,h.firstChild);E=y}}return E}function on(h,y,E){let A=!1;for(let b=0,_=y.length;b<_;b++){let T=y[b],c;if(T instanceof Node)h.push(T);else if(!(T==null||T===!0||T===!1))if(Array.isArray(T))A=on(h,T)||A;else if((c=typeof T)=="string")h.push(document.createTextNode(T));else if(c==="function")if(E){for(;typeof T=="function";)T=T();A=on(h,Array.isArray(T)?T:[T])||A}else h.push(T),A=!0;else h.push(document.createTextNode(T.toString()))}return A}function Dn(h,y,E){for(let A=0,b=y.length;A<b;A++)h.insertBefore(y[A],E)}function zt(h,y,E,A){if(E===void 0)return h.textContent="";const b=A||document.createTextNode("");if(y.length){let _=!1;for(let T=y.length-1;T>=0;T--){const c=y[T];if(b!==c){const B=c.parentNode===h;!_&&!T?B?h.replaceChild(b,c):h.insertBefore(b,E):B&&c.remove()}else _=!0}}else h.insertBefore(b,E);return[b]}var _i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xi(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Gn={exports:{}};(function(h,y){typeof window<"u"&&function(E,A){h.exports=A()}(_i,function(){return function(E){var A={};function b(_){if(A[_])return A[_].exports;var T=A[_]={i:_,l:!1,exports:{}};return E[_].call(T.exports,T,T.exports,b),T.l=!0,T.exports}return b.m=E,b.c=A,b.d=function(_,T,c){b.o(_,T)||Object.defineProperty(_,T,{enumerable:!0,get:c})},b.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},b.t=function(_,T){if(1&T&&(_=b(_)),8&T||4&T&&typeof _=="object"&&_&&_.__esModule)return _;var c=Object.create(null);if(b.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:_}),2&T&&typeof _!="string")for(var B in _)b.d(c,B,function(I){return _[I]}.bind(null,B));return c},b.n=function(_){var T=_&&_.__esModule?function(){return _.default}:function(){return _};return b.d(T,"a",T),T},b.o=function(_,T){return Object.prototype.hasOwnProperty.call(_,T)},b.p="/dist/",b(b.s=19)}([function(E,A,b){var _;b.d(A,"a",function(){return _}),function(T){T.MEDIA_ATTACHING="hlsMediaAttaching",T.MEDIA_ATTACHED="hlsMediaAttached",T.MEDIA_DETACHING="hlsMediaDetaching",T.MEDIA_DETACHED="hlsMediaDetached",T.BUFFER_RESET="hlsBufferReset",T.BUFFER_CODECS="hlsBufferCodecs",T.BUFFER_CREATED="hlsBufferCreated",T.BUFFER_APPENDING="hlsBufferAppending",T.BUFFER_APPENDED="hlsBufferAppended",T.BUFFER_EOS="hlsBufferEos",T.BUFFER_FLUSHING="hlsBufferFlushing",T.BUFFER_FLUSHED="hlsBufferFlushed",T.MANIFEST_LOADING="hlsManifestLoading",T.MANIFEST_LOADED="hlsManifestLoaded",T.MANIFEST_PARSED="hlsManifestParsed",T.LEVEL_SWITCHING="hlsLevelSwitching",T.LEVEL_SWITCHED="hlsLevelSwitched",T.LEVEL_LOADING="hlsLevelLoading",T.LEVEL_LOADED="hlsLevelLoaded",T.LEVEL_UPDATED="hlsLevelUpdated",T.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",T.LEVELS_UPDATED="hlsLevelsUpdated",T.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",T.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",T.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",T.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",T.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",T.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",T.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",T.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",T.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",T.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",T.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",T.CUES_PARSED="hlsCuesParsed",T.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",T.INIT_PTS_FOUND="hlsInitPtsFound",T.FRAG_LOADING="hlsFragLoading",T.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",T.FRAG_LOADED="hlsFragLoaded",T.FRAG_DECRYPTED="hlsFragDecrypted",T.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",T.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",T.FRAG_PARSING_METADATA="hlsFragParsingMetadata",T.FRAG_PARSED="hlsFragParsed",T.FRAG_BUFFERED="hlsFragBuffered",T.FRAG_CHANGED="hlsFragChanged",T.FPS_DROP="hlsFpsDrop",T.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",T.ERROR="hlsError",T.DESTROYING="hlsDestroying",T.KEY_LOADING="hlsKeyLoading",T.KEY_LOADED="hlsKeyLoaded",T.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",T.BACK_BUFFER_REACHED="hlsBackBufferReached"}(_||(_={}))},function(E,A,b){b.d(A,"a",function(){return I}),b.d(A,"b",function(){return X});var _=function(){},T={trace:_,debug:_,log:_,warn:_,info:_,error:_},c=T;function B(q){var H=self.console[q];return H?H.bind(self.console,"["+q+"] >"):_}function I(q){if(self.console&&q===!0||typeof q=="object"){(function(H){for(var V=arguments.length,G=new Array(V>1?V-1:0),M=1;M<V;M++)G[M-1]=arguments[M];G.forEach(function(ae){c[ae]=H[ae]?H[ae].bind(H):B(ae)})})(q,"debug","log","info","warn","error");try{c.log()}catch{c=T}}else c=T}var X=T},function(E,A,b){var _,T;b.d(A,"b",function(){return _}),b.d(A,"a",function(){return T}),function(c){c.NETWORK_ERROR="networkError",c.MEDIA_ERROR="mediaError",c.KEY_SYSTEM_ERROR="keySystemError",c.MUX_ERROR="muxError",c.OTHER_ERROR="otherError"}(_||(_={})),function(c){c.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",c.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",c.KEY_SYSTEM_NO_SESSION="keySystemNoSession",c.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",c.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",c.MANIFEST_LOAD_ERROR="manifestLoadError",c.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",c.MANIFEST_PARSING_ERROR="manifestParsingError",c.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",c.LEVEL_EMPTY_ERROR="levelEmptyError",c.LEVEL_LOAD_ERROR="levelLoadError",c.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",c.LEVEL_SWITCH_ERROR="levelSwitchError",c.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",c.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",c.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",c.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",c.FRAG_LOAD_ERROR="fragLoadError",c.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",c.FRAG_DECRYPT_ERROR="fragDecryptError",c.FRAG_PARSING_ERROR="fragParsingError",c.REMUX_ALLOC_ERROR="remuxAllocError",c.KEY_LOAD_ERROR="keyLoadError",c.KEY_LOAD_TIMEOUT="keyLoadTimeOut",c.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",c.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",c.BUFFER_APPEND_ERROR="bufferAppendError",c.BUFFER_APPENDING_ERROR="bufferAppendingError",c.BUFFER_STALLED_ERROR="bufferStalledError",c.BUFFER_FULL_ERROR="bufferFullError",c.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",c.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",c.INTERNAL_EXCEPTION="internalException",c.INTERNAL_ABORTED="aborted",c.UNKNOWN="unknown"}(T||(T={}))},function(E,A,b){b.d(A,"a",function(){return _});var _=Number.isFinite||function(T){return typeof T=="number"&&isFinite(T)}},function(E,A,b){var _,T;b.d(A,"a",function(){return _}),b.d(A,"b",function(){return T}),function(c){c.MANIFEST="manifest",c.LEVEL="level",c.AUDIO_TRACK="audioTrack",c.SUBTITLE_TRACK="subtitleTrack"}(_||(_={})),function(c){c.MAIN="main",c.AUDIO="audio",c.SUBTITLE="subtitle"}(T||(T={}))},function(E,A,b){b.d(A,"a",function(){return _}),b.d(A,"b",function(){return ae}),b.d(A,"c",function(){return Y});var _,T=b(3),c=b(11),B=b(1),I=b(15),X=b(12);function q(J,z){J.prototype=Object.create(z.prototype),J.prototype.constructor=J,H(J,z)}function H(J,z){return(H=Object.setPrototypeOf||function(Q,P){return Q.__proto__=P,Q})(J,z)}function V(J,z){for(var Q=0;Q<z.length;Q++){var P=z[Q];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(J,P.key,P)}}function G(J,z,Q){return z&&V(J.prototype,z),Q&&V(J,Q),J}(function(J){J.AUDIO="audio",J.VIDEO="video",J.AUDIOVIDEO="audiovideo"})(_||(_={}));var M=function(){function J(z){var Q;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((Q={})[_.AUDIO]=null,Q[_.VIDEO]=null,Q[_.AUDIOVIDEO]=null,Q),this.baseurl=z}return J.prototype.setByteRange=function(z,Q){var P=z.split("@",2),w=[];P.length===1?w[0]=Q?Q.byteRangeEndOffset:0:w[0]=parseInt(P[1]),w[1]=parseInt(P[0])+w[0],this._byteRange=w},G(J,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(c.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(z){this._url=z}}]),J}(),ae=function(J){function z(P,w){var O;return(O=J.call(this,w)||this)._decryptdata=null,O.rawProgramDateTime=null,O.programDateTime=null,O.tagList=[],O.duration=0,O.sn=0,O.levelkey=void 0,O.type=void 0,O.loader=null,O.level=-1,O.cc=0,O.startPTS=void 0,O.endPTS=void 0,O.appendedPTS=void 0,O.startDTS=void 0,O.endDTS=void 0,O.start=0,O.deltaPTS=void 0,O.maxStartPTS=void 0,O.minEndPTS=void 0,O.stats=new X.a,O.urlId=0,O.data=void 0,O.bitrateTest=!1,O.title=null,O.initSegment=null,O.type=P,O}q(z,J);var Q=z.prototype;return Q.createInitializationVector=function(P){for(var w=new Uint8Array(16),O=12;O<16;O++)w[O]=P>>8*(15-O)&255;return w},Q.setDecryptDataFromLevelKey=function(P,w){var O=P;return P?.method==="AES-128"&&P.uri&&!P.iv&&((O=I.a.fromURI(P.uri)).method=P.method,O.iv=this.createInitializationVector(w),O.keyFormat="identity"),O},Q.setElementaryStreamInfo=function(P,w,O,Z,ie,ue){ue===void 0&&(ue=!1);var he=this.elementaryStreams,de=he[P];de?(de.startPTS=Math.min(de.startPTS,w),de.endPTS=Math.max(de.endPTS,O),de.startDTS=Math.min(de.startDTS,Z),de.endDTS=Math.max(de.endDTS,ie)):he[P]={startPTS:w,endPTS:O,startDTS:Z,endDTS:ie,partial:ue}},Q.clearElementaryStreamInfo=function(){var P=this.elementaryStreams;P[_.AUDIO]=null,P[_.VIDEO]=null,P[_.AUDIOVIDEO]=null},G(z,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var P=this.sn;typeof P!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&B.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),P=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,P)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(T.a)(this.programDateTime))return null;var P=Object(T.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*P}},{key:"encrypted",get:function(){var P;return!((P=this.decryptdata)===null||P===void 0||!P.keyFormat||!this.decryptdata.uri)}}]),z}(M),Y=function(J){function z(Q,P,w,O,Z){var ie;(ie=J.call(this,w)||this).fragOffset=0,ie.duration=0,ie.gap=!1,ie.independent=!1,ie.relurl=void 0,ie.fragment=void 0,ie.index=void 0,ie.stats=new X.a,ie.duration=Q.decimalFloatingPoint("DURATION"),ie.gap=Q.bool("GAP"),ie.independent=Q.bool("INDEPENDENT"),ie.relurl=Q.enumeratedString("URI"),ie.fragment=P,ie.index=O;var ue=Q.enumeratedString("BYTERANGE");return ue&&ie.setByteRange(ue,Z),Z&&(ie.fragOffset=Z.fragOffset+Z.duration),ie}return q(z,J),G(z,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var Q=this.elementaryStreams;return!!(Q.audio||Q.video||Q.audiovideo)}}]),z}(M)},function(E,A,b){b.d(A,"b",function(){return H}),b.d(A,"g",function(){return V}),b.d(A,"f",function(){return G}),b.d(A,"d",function(){return M}),b.d(A,"c",function(){return ae}),b.d(A,"e",function(){return J}),b.d(A,"h",function(){return z}),b.d(A,"a",function(){return Q});var _=b(8),T=b(5),c=Math.pow(2,32)-1,B=[].push;function I(P){return String.fromCharCode.apply(null,P)}function X(P,w){"data"in P&&(w+=P.start,P=P.data);var O=P[w]<<24|P[w+1]<<16|P[w+2]<<8|P[w+3];return O<0?4294967296+O:O}function q(P,w,O){"data"in P&&(w+=P.start,P=P.data),P[w]=O>>24,P[w+1]=O>>16&255,P[w+2]=O>>8&255,P[w+3]=255&O}function H(P,w){var O,Z,ie,ue=[];if(!w.length)return ue;"data"in P?(O=P.data,Z=P.start,ie=P.end):(Z=0,ie=(O=P).byteLength);for(var he=Z;he<ie;){var de=X(O,he),ee=de>1?he+de:ie;if(I(O.subarray(he+4,he+8))===w[0])if(w.length===1)ue.push({data:O,start:he+8,end:ee});else{var Ee=H({data:O,start:he+8,end:ee},w.slice(1));Ee.length&&B.apply(ue,Ee)}he=ee}return ue}function V(P){var w=H(P,["moov"])[0],O=w?w.end:null,Z=H(P,["sidx"]);if(!Z||!Z[0])return null;var ie=[],ue=Z[0],he=ue.data[0],de=he===0?8:16,ee=X(ue,de);de+=4,de+=he===0?8:16,de+=2;var Ee=ue.end+0,Le=function(Me,Ge){"data"in Me&&(Ge+=Me.start,Me=Me.data);var He=Me[Ge]<<8|Me[Ge+1];return He<0?65536+He:He}(ue,de);de+=2;for(var Se=0;Se<Le;Se++){var Ae=de,xe=X(ue,Ae);Ae+=4;var Be=2147483647&xe;if((2147483648&xe)>>>31===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var je=X(ue,Ae);Ae+=4,ie.push({referenceSize:Be,subsegmentDuration:je,info:{duration:je/ee,start:Ee,end:Ee+Be-1}}),Ee+=Be,de=Ae+=4}return{earliestPresentationTime:0,timescale:ee,version:he,referencesCount:Le,references:ie,moovEndOffset:O}}function G(P){for(var w=[],O=H(P,["moov","trak"]),Z=0;Z<O.length;Z++){var ie=O[Z],ue=H(ie,["tkhd"])[0];if(ue){var he=ue.data[ue.start],de=he===0?12:20,ee=X(ue,de),Ee=H(ie,["mdia","mdhd"])[0];if(Ee){var Le=X(Ee,de=(he=Ee.data[Ee.start])===0?12:20),Se=H(ie,["mdia","hdlr"])[0];if(Se){var Ae=I(Se.data.subarray(Se.start+8,Se.start+12)),xe={soun:T.a.AUDIO,vide:T.a.VIDEO}[Ae];if(xe){var Be=H(ie,["mdia","minf","stbl","stsd"])[0],je=void 0;Be&&(je=I(Be.data.subarray(Be.start+12,Be.start+16))),w[ee]={timescale:Le,type:xe},w[xe]={timescale:Le,id:ee,codec:je}}}}}}return H(P,["moov","mvex","trex"]).forEach(function(Me){var Ge=X(Me,4),He=w[Ge];He&&(He.default={duration:X(Me,12),flags:X(Me,20)})}),w}function M(P,w){return H(w,["moof","traf"]).reduce(function(O,Z){var ie=H(Z,["tfdt"])[0],ue=ie.data[ie.start],he=H(Z,["tfhd"]).reduce(function(de,ee){var Ee=X(ee,4),Le=P[Ee];if(Le){var Se=X(ie,4);ue===1&&(Se*=Math.pow(2,32),Se+=X(ie,8));var Ae=Se/(Le.timescale||9e4);if(isFinite(Ae)&&(de===null||Ae<de))return Ae}return de},null);return he!==null&&isFinite(he)&&(O===null||he<O)?he:O},null)||0}function ae(P,w){for(var O=0,Z=0,ie=0,ue=H(P,["moof","traf"]),he=0;he<ue.length;he++){var de=ue[he],ee=H(de,["tfhd"])[0],Ee=w[X(ee,4)];if(Ee){var Le=Ee.default,Se=X(ee,0)|Le?.flags,Ae=Le?.duration;8&Se&&(Ae=X(ee,2&Se?12:8));for(var xe=Ee.timescale||9e4,Be=H(de,["trun"]),je=0;je<Be.length;je++)!(O=Y(Be[je]))&&Ae&&(O=Ae*X(Be[je],4)),Ee.type===T.a.VIDEO?Z+=O/xe:Ee.type===T.a.AUDIO&&(ie+=O/xe)}}if(Z===0&&ie===0){var Me=V(P);if(Me!=null&&Me.references)return Me.references.reduce(function(Ge,He){return Ge+He.info.duration||0},0)}return Z||ie}function Y(P){var w=X(P,0),O=8;1&w&&(O+=4),4&w&&(O+=4);for(var Z=0,ie=X(P,4),ue=0;ue<ie;ue++)256&w&&(Z+=X(P,O),O+=4),512&w&&(O+=4),1024&w&&(O+=4),2048&w&&(O+=4);return Z}function J(P,w,O){H(w,["moof","traf"]).forEach(function(Z){H(Z,["tfhd"]).forEach(function(ie){var ue=X(ie,4),he=P[ue];if(he){var de=he.timescale||9e4;H(Z,["tfdt"]).forEach(function(ee){var Ee=ee.data[ee.start],Le=X(ee,4);if(Ee===0)q(ee,4,Le-O*de);else{Le*=Math.pow(2,32),Le+=X(ee,8),Le-=O*de,Le=Math.max(Le,0);var Se=Math.floor(Le/(c+1)),Ae=Math.floor(Le%(c+1));q(ee,4,Se),q(ee,8,Ae)}})}})})}function z(P){var w={valid:null,remainder:null},O=H(P,["moof"]);if(!O)return w;if(O.length<2)return w.remainder=P,w;var Z=O[O.length-1];return w.valid=Object(_.a)(P,0,Z.start-8),w.remainder=Object(_.a)(P,Z.start-8),w}function Q(P,w){var O=new Uint8Array(P.length+w.length);return O.set(P),O.set(w,P.length),O}},function(E,A,b){b.d(A,"b",function(){return B}),b.d(A,"a",function(){return X}),b.d(A,"d",function(){return q}),b.d(A,"e",function(){return H}),b.d(A,"c",function(){return G}),b.d(A,"f",function(){return Q});var _,T=function(w,O){return O+10<=w.length&&w[O]===73&&w[O+1]===68&&w[O+2]===51&&w[O+3]<255&&w[O+4]<255&&w[O+6]<128&&w[O+7]<128&&w[O+8]<128&&w[O+9]<128},c=function(w,O){return O+10<=w.length&&w[O]===51&&w[O+1]===68&&w[O+2]===73&&w[O+3]<255&&w[O+4]<255&&w[O+6]<128&&w[O+7]<128&&w[O+8]<128&&w[O+9]<128},B=function(w,O){for(var Z=O,ie=0;T(w,O);)ie+=10,ie+=I(w,O+6),c(w,O+10)&&(ie+=10),O+=ie;if(ie>0)return w.subarray(Z,Z+ie)},I=function(w,O){var Z=0;return Z=(127&w[O])<<21,Z|=(127&w[O+1])<<14,Z|=(127&w[O+2])<<7,Z|=127&w[O+3]},X=function(w,O){return T(w,O)&&I(w,O+6)+10<=w.length-O},q=function(w){for(var O=G(w),Z=0;Z<O.length;Z++){var ie=O[Z];if(H(ie))return z(ie)}},H=function(w){return w&&w.key==="PRIV"&&w.info==="com.apple.streaming.transportStreamTimestamp"},V=function(w){var O=String.fromCharCode(w[0],w[1],w[2],w[3]),Z=I(w,4);return{type:O,size:Z,data:w.subarray(10,10+Z)}},G=function(w){for(var O=0,Z=[];T(w,O);){for(var ie=I(w,O+6),ue=(O+=10)+ie;O+8<ue;){var he=V(w.subarray(O)),de=M(he);de&&Z.push(de),O+=he.size+10}c(w,O)&&(O+=10)}return Z},M=function(w){return w.type==="PRIV"?ae(w):w.type[0]==="W"?J(w):Y(w)},ae=function(w){if(!(w.size<2)){var O=Q(w.data,!0),Z=new Uint8Array(w.data.subarray(O.length+1));return{key:w.type,info:O,data:Z.buffer}}},Y=function(w){if(!(w.size<2)){if(w.type==="TXXX"){var O=1,Z=Q(w.data.subarray(O),!0);O+=Z.length+1;var ie=Q(w.data.subarray(O));return{key:w.type,info:Z,data:ie}}var ue=Q(w.data.subarray(1));return{key:w.type,data:ue}}},J=function(w){if(w.type==="WXXX"){if(w.size<2)return;var O=1,Z=Q(w.data.subarray(O),!0);O+=Z.length+1;var ie=Q(w.data.subarray(O));return{key:w.type,info:Z,data:ie}}var ue=Q(w.data);return{key:w.type,data:ue}},z=function(w){if(w.data.byteLength===8){var O=new Uint8Array(w.data),Z=1&O[3],ie=(O[4]<<23)+(O[5]<<15)+(O[6]<<7)+O[7];return ie/=45,Z&&(ie+=4772185884e-2),Math.round(ie)}},Q=function(w,O){O===void 0&&(O=!1);var Z=P();if(Z){var ie=Z.decode(w);if(O){var ue=ie.indexOf("\0");return ue!==-1?ie.substring(0,ue):ie}return ie.replace(/\0/g,"")}for(var he,de,ee,Ee=w.length,Le="",Se=0;Se<Ee;){if((he=w[Se++])===0&&O)return Le;if(he!==0&&he!==3)switch(he>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:Le+=String.fromCharCode(he);break;case 12:case 13:de=w[Se++],Le+=String.fromCharCode((31&he)<<6|63&de);break;case 14:de=w[Se++],ee=w[Se++],Le+=String.fromCharCode((15&he)<<12|(63&de)<<6|(63&ee)<<0)}}return Le};function P(){return _||self.TextDecoder===void 0||(_=new self.TextDecoder("utf-8")),_}},function(E,A,b){function _(T,c,B){return Uint8Array.prototype.slice?T.slice(c,B):new Uint8Array(Array.prototype.slice.call(T,c,B))}b.d(A,"a",function(){return _})},function(E,A,b){b.d(A,"c",function(){return en}),b.d(A,"d",function(){return wr}),b.d(A,"a",function(){return Cr}),b.d(A,"b",function(){return Mt});var _=b(0),T=b(2),c=b(14),B=b(3),I=b(7),X=b(6),q=b(8),H=function(){function v(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var g=v.prototype;return g.resetInitSegment=function(l,m,L){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},g.resetTimeStamp=function(){},g.resetContiguity=function(){},g.canParse=function(l,m){return!1},g.appendFrame=function(l,m,L){},g.demux=function(l,m){this.cachedData&&(l=Object(X.a)(this.cachedData,l),this.cachedData=null);var L,x,R=I.b(l,0),C=R?R.length:0,N=this._audioTrack,W=this._id3Track,j=R?I.d(R):void 0,$=l.length;for(this.frameIndex!==0&&this.initPTS!==null||(this.initPTS=V(j,m)),R&&R.length>0&&W.samples.push({pts:this.initPTS,dts:this.initPTS,data:R}),x=this.initPTS;C<$;){if(this.canParse(l,C)){var te=this.appendFrame(N,l,C);te?(this.frameIndex++,x=te.sample.pts,L=C+=te.length):C=$}else I.a(l,C)?(R=I.b(l,C),W.samples.push({pts:x,dts:x,data:R}),L=C+=R.length):C++;if(C===$&&L!==$){var re=Object(q.a)(l,L);this.cachedData?this.cachedData=Object(X.a)(this.cachedData,re):this.cachedData=re}}return{audioTrack:N,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:W,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},g.demuxSampleAes=function(l,m,L){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},g.flush=function(l){var m=this.cachedData;return m&&(this.cachedData=null,this.demux(m,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},g.destroy=function(){},v}(),V=function(v,g){return Object(B.a)(v)?90*v:9e4*g},G=H,M=b(1);function ae(v,g){return v[g]===255&&(246&v[g+1])==240}function Y(v,g){return 1&v[g+1]?7:9}function J(v,g){return(3&v[g+3])<<11|v[g+4]<<3|(224&v[g+5])>>>5}function z(v,g){return g+1<v.length&&ae(v,g)}function Q(v,g){if(z(v,g)){var l=Y(v,g);if(g+l>=v.length)return!1;var m=J(v,g);if(m<=l)return!1;var L=g+m;return L===v.length||z(v,L)}return!1}function P(v,g,l,m,L){if(!v.samplerate){var x=function(R,C,N,W){var j,$,te,re,ne=navigator.userAgent.toLowerCase(),ve=W,pe=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];j=1+((192&C[N+2])>>>6);var ce=(60&C[N+2])>>>2;if(!(ce>pe.length-1))return te=(1&C[N+2])<<2,te|=(192&C[N+3])>>>6,M.b.log("manifest codec:"+W+", ADTS type:"+j+", samplingIndex:"+ce),/firefox/i.test(ne)?ce>=6?(j=5,re=new Array(4),$=ce-3):(j=2,re=new Array(2),$=ce):ne.indexOf("android")!==-1?(j=2,re=new Array(2),$=ce):(j=5,re=new Array(4),W&&(W.indexOf("mp4a.40.29")!==-1||W.indexOf("mp4a.40.5")!==-1)||!W&&ce>=6?$=ce-3:((W&&W.indexOf("mp4a.40.2")!==-1&&(ce>=6&&te===1||/vivaldi/i.test(ne))||!W&&te===1)&&(j=2,re=new Array(2)),$=ce)),re[0]=j<<3,re[0]|=(14&ce)>>1,re[1]|=(1&ce)<<7,re[1]|=te<<3,j===5&&(re[1]|=(14&$)>>1,re[2]=(1&$)<<7,re[2]|=8,re[3]=0),{config:re,samplerate:pe[ce],channelCount:te,codec:"mp4a.40."+j,manifestCodec:ve};R.trigger(_.a.ERROR,{type:T.b.MEDIA_ERROR,details:T.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+ce})}(g,l,m,L);if(!x)return;v.config=x.config,v.samplerate=x.samplerate,v.channelCount=x.channelCount,v.codec=x.codec,v.manifestCodec=x.manifestCodec,M.b.log("parsed codec:"+v.codec+", rate:"+x.samplerate+", channels:"+x.channelCount)}}function w(v){return 9216e4/v}function O(v,g,l,m,L){var x=function(re,ne,ve,pe,ce){var De=Y(re,ne),Re=J(re,ne);if((Re-=De)>0)return{headerLength:De,frameLength:Re,stamp:ve+pe*ce}}(g,l,m,L,w(v.samplerate));if(x){var R,C=x.frameLength,N=x.headerLength,W=x.stamp,j=N+C,$=Math.max(0,l+j-g.length);$?(R=new Uint8Array(j-N)).set(g.subarray(l+N,g.length),0):R=g.subarray(l+N,l+j);var te={unit:R,pts:W};return $||v.samples.push(te),{sample:te,length:j,missing:$}}}function Z(v,g){return(Z=Object.setPrototypeOf||function(l,m){return l.__proto__=m,l})(v,g)}var ie=function(v){var g,l;function m(x,R){var C;return(C=v.call(this)||this).observer=void 0,C.config=void 0,C.observer=x,C.config=R,C}l=v,(g=m).prototype=Object.create(l.prototype),g.prototype.constructor=g,Z(g,l);var L=m.prototype;return L.resetInitSegment=function(x,R,C){v.prototype.resetInitSegment.call(this,x,R,C),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:x,duration:C,inputTimeScale:9e4,dropped:0}},m.probe=function(x){if(!x)return!1;for(var R=(I.b(x,0)||[]).length,C=x.length;R<C;R++)if(Q(x,R))return M.b.log("ADTS sync word found !"),!0;return!1},L.canParse=function(x,R){return function(C,N){return function(W,j){return j+5<W.length}(C,N)&&ae(C,N)&&J(C,N)<=C.length-N}(x,R)},L.appendFrame=function(x,R,C){P(x,this.observer,R,C,x.manifestCodec);var N=O(x,R,C,this.initPTS,this.frameIndex);if(N&&N.missing===0)return N},m}(G);ie.minProbeByteLength=9;var ue=ie,he=function(){function v(l,m){this.remainderData=null,this.config=void 0,this.config=m}var g=v.prototype;return g.resetTimeStamp=function(){},g.resetInitSegment=function(){},g.resetContiguity=function(){},v.probe=function(l){return Object(X.b)({data:l,start:0,end:Math.min(l.length,16384)},["moof"]).length>0},g.demux=function(l){var m=l,L={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};if(this.config.progressive){this.remainderData&&(m=Object(X.a)(this.remainderData,l));var x=Object(X.h)(m);this.remainderData=x.remainder,L.samples=x.valid||new Uint8Array}else L.samples=m;return{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:L,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},g.flush=function(){var l={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return l.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:l,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},g.demuxSampleAes=function(l,m,L){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},g.destroy=function(){},v}();he.minProbeByteLength=1024;var de=he,ee=null,Ee=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Le=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Se=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Ae=[0,1,1,4];function xe(v,g,l,m,L){if(!(l+24>g.length)){var x=Be(g,l);if(x&&l+x.frameLength<=g.length){var R=m+L*(9e4*x.samplesPerFrame/x.sampleRate),C={unit:g.subarray(l,l+x.frameLength),pts:R,dts:R};return v.config=[],v.channelCount=x.channelCount,v.samplerate=x.sampleRate,v.samples.push(C),{sample:C,length:x.frameLength,missing:0}}}}function Be(v,g){var l=v[g+1]>>3&3,m=v[g+1]>>1&3,L=v[g+2]>>4&15,x=v[g+2]>>2&3;if(l!==1&&L!==0&&L!==15&&x!==3){var R=v[g+2]>>1&1,C=v[g+3]>>6,N=1e3*Ee[14*(l===3?3-m:m===3?3:4)+L-1],W=Le[3*(l===3?0:l===2?1:2)+x],j=C===3?1:2,$=Se[l][m],te=Ae[m],re=8*$*te,ne=Math.floor($*N/W+R)*te;if(ee===null){var ve=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ee=ve?parseInt(ve[1]):0}return!!ee&&ee<=87&&m===2&&N>=224e3&&C===0&&(v[g+3]=128|v[g+3]),{sampleRate:W,channelCount:j,frameLength:ne,samplesPerFrame:re}}}function je(v,g){return v[g]===255&&(224&v[g+1])==224&&(6&v[g+1])!=0}function Me(v,g){return g+1<v.length&&je(v,g)}function Ge(v,g){if(g+1<v.length&&je(v,g)){var l=Be(v,g),m=4;l!=null&&l.frameLength&&(m=l.frameLength);var L=g+m;return L===v.length||Me(v,L)}return!1}var He=function(){function v(l){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=l,this.bytesAvailable=l.byteLength,this.word=0,this.bitsAvailable=0}var g=v.prototype;return g.loadWord=function(){var l=this.data,m=this.bytesAvailable,L=l.byteLength-m,x=new Uint8Array(4),R=Math.min(4,m);if(R===0)throw new Error("no bytes available");x.set(l.subarray(L,L+R)),this.word=new DataView(x.buffer).getUint32(0),this.bitsAvailable=8*R,this.bytesAvailable-=R},g.skipBits=function(l){var m;this.bitsAvailable>l?(this.word<<=l,this.bitsAvailable-=l):(l-=this.bitsAvailable,l-=(m=l>>3)>>3,this.bytesAvailable-=m,this.loadWord(),this.word<<=l,this.bitsAvailable-=l)},g.readBits=function(l){var m=Math.min(this.bitsAvailable,l),L=this.word>>>32-m;return l>32&&M.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=m,this.bitsAvailable>0?this.word<<=m:this.bytesAvailable>0&&this.loadWord(),(m=l-m)>0&&this.bitsAvailable?L<<m|this.readBits(m):L},g.skipLZ=function(){var l;for(l=0;l<this.bitsAvailable;++l)if((this.word&2147483648>>>l)!=0)return this.word<<=l,this.bitsAvailable-=l,l;return this.loadWord(),l+this.skipLZ()},g.skipUEG=function(){this.skipBits(1+this.skipLZ())},g.skipEG=function(){this.skipBits(1+this.skipLZ())},g.readUEG=function(){var l=this.skipLZ();return this.readBits(l+1)-1},g.readEG=function(){var l=this.readUEG();return 1&l?1+l>>>1:-1*(l>>>1)},g.readBoolean=function(){return this.readBits(1)===1},g.readUByte=function(){return this.readBits(8)},g.readUShort=function(){return this.readBits(16)},g.readUInt=function(){return this.readBits(32)},g.skipScalingList=function(l){for(var m=8,L=8,x=0;x<l;x++)L!==0&&(L=(m+this.readEG()+256)%256),m=L===0?m:L},g.readSPS=function(){var l,m,L,x=0,R=0,C=0,N=0,W=this.readUByte.bind(this),j=this.readBits.bind(this),$=this.readUEG.bind(this),te=this.readBoolean.bind(this),re=this.skipBits.bind(this),ne=this.skipEG.bind(this),ve=this.skipUEG.bind(this),pe=this.skipScalingList.bind(this);W();var ce=W();if(j(5),re(3),W(),ve(),ce===100||ce===110||ce===122||ce===244||ce===44||ce===83||ce===86||ce===118||ce===128){var De=$();if(De===3&&re(1),ve(),ve(),re(1),te())for(m=De!==3?8:12,L=0;L<m;L++)te()&&pe(L<6?16:64)}ve();var Re=$();if(Re===0)$();else if(Re===1)for(re(1),ne(),ne(),l=$(),L=0;L<l;L++)ne();ve(),re(1);var ke=$(),_e=$(),ye=j(1);ye===0&&re(1),re(1),te()&&(x=$(),R=$(),C=$(),N=$());var be=[1,1];if(te()&&te())switch(W()){case 1:be=[1,1];break;case 2:be=[12,11];break;case 3:be=[10,11];break;case 4:be=[16,11];break;case 5:be=[40,33];break;case 6:be=[24,11];break;case 7:be=[20,11];break;case 8:be=[32,11];break;case 9:be=[80,33];break;case 10:be=[18,11];break;case 11:be=[15,11];break;case 12:be=[64,33];break;case 13:be=[160,99];break;case 14:be=[4,3];break;case 15:be=[3,2];break;case 16:be=[2,1];break;case 255:be=[W()<<8|W(),W()<<8|W()]}return{width:Math.ceil(16*(ke+1)-2*x-2*R),height:(2-ye)*(_e+1)*16-(ye?2:4)*(C+N),pixelRatio:be}},g.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},v}(),Kt=function(){function v(l,m,L){this.keyData=void 0,this.decrypter=void 0,this.keyData=L,this.decrypter=new c.a(l,m,{removePKCS7Padding:!1})}var g=v.prototype;return g.decryptBuffer=function(l,m){this.decrypter.decrypt(l,this.keyData.key.buffer,this.keyData.iv.buffer,m)},g.decryptAacSample=function(l,m,L,x){var R=l[m].unit,C=R.subarray(16,R.length-R.length%16),N=C.buffer.slice(C.byteOffset,C.byteOffset+C.length),W=this;this.decryptBuffer(N,function(j){var $=new Uint8Array(j);R.set($,16),x||W.decryptAacSamples(l,m+1,L)})},g.decryptAacSamples=function(l,m,L){for(;;m++){if(m>=l.length)return void L();if(!(l[m].unit.length<32)){var x=this.decrypter.isSync();if(this.decryptAacSample(l,m,L,x),!x)return}}},g.getAvcEncryptedData=function(l){for(var m=16*Math.floor((l.length-48)/160)+16,L=new Int8Array(m),x=0,R=32;R<l.length-16;R+=160,x+=16)L.set(l.subarray(R,R+16),x);return L},g.getAvcDecryptedUnit=function(l,m){for(var L=new Uint8Array(m),x=0,R=32;R<l.length-16;R+=160,x+=16)l.set(L.subarray(x,x+16),R);return l},g.decryptAvcSample=function(l,m,L,x,R,C){var N=Ar(R.data),W=this.getAvcEncryptedData(N),j=this;this.decryptBuffer(W.buffer,function($){R.data=j.getAvcDecryptedUnit(N,$),C||j.decryptAvcSamples(l,m,L+1,x)})},g.decryptAvcSamples=function(l,m,L,x){if(l instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;m++,L=0){if(m>=l.length)return void x();for(var R=l[m].units;!(L>=R.length);L++){var C=R[L];if(!(C.data.length<=48||C.type!==1&&C.type!==5)){var N=this.decrypter.isSync();if(this.decryptAvcSample(l,m,L,x,C,N),!N)return}}}},v}(),Ct={video:1,audio:2,id3:3,text:4},Ot=function(){function v(l,m,L){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=l,this.config=m,this.typeSupported=L}v.probe=function(l){var m=v.syncOffset(l);return!(m<0)&&(m&&M.b.warn("MPEG2-TS detected but first sync word found @ offset "+m+", junk ahead ?"),!0)},v.syncOffset=function(l){for(var m=Math.min(1e3,l.length-564),L=0;L<m;){if(l[L]===71&&l[L+188]===71&&l[L+376]===71)return L;L++}return-1},v.createTrack=function(l,m){return{container:l==="video"||l==="audio"?"video/mp2t":void 0,type:l,id:Ct[l],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:l==="audio"?m:void 0}};var g=v.prototype;return g.resetInitSegment=function(l,m,L){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=v.createTrack("video",L),this._audioTrack=v.createTrack("audio",L),this._id3Track=v.createTrack("id3",L),this._txtTrack=v.createTrack("text",L),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=l,this.videoCodec=m,this._duration=L},g.resetTimeStamp=function(){},g.resetContiguity=function(){var l=this._audioTrack,m=this._avcTrack,L=this._id3Track;l&&(l.pesData=null),m&&(m.pesData=null),L&&(L.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},g.demux=function(l,m,L,x){var R;L===void 0&&(L=!1),x===void 0&&(x=!1),L||(this.sampleAes=null);var C=this._avcTrack,N=this._audioTrack,W=this._id3Track,j=C.pid,$=C.pesData,te=N.pid,re=W.pid,ne=N.pesData,ve=W.pesData,pe=!1,ce=this.pmtParsed,De=this._pmtId,Re=l.length;if(this.remainderData&&(Re=(l=Object(X.a)(this.remainderData,l)).length,this.remainderData=null),Re<188&&!x)return this.remainderData=l,{audioTrack:N,avcTrack:C,id3Track:W,textTrack:this._txtTrack};var ke=Math.max(0,v.syncOffset(l));(Re-=(Re+ke)%188)<l.byteLength&&!x&&(this.remainderData=new Uint8Array(l.buffer,Re,l.buffer.byteLength-Re));for(var _e=0,ye=ke;ye<Re;ye+=188)if(l[ye]===71){var be=!!(64&l[ye+1]),Ce=((31&l[ye+1])<<8)+l[ye+2],Oe=void 0;if((48&l[ye+3])>>4>1){if((Oe=ye+5+l[ye+4])===ye+188)continue}else Oe=ye+4;switch(Ce){case j:be&&($&&(R=qe($))&&this.parseAVCPES(R,!1),$={data:[],size:0}),$&&($.data.push(l.subarray(Oe,ye+188)),$.size+=ye+188-Oe);break;case te:be&&(ne&&(R=qe(ne))&&(N.isAAC?this.parseAACPES(R):this.parseMPEGPES(R)),ne={data:[],size:0}),ne&&(ne.data.push(l.subarray(Oe,ye+188)),ne.size+=ye+188-Oe);break;case re:be&&(ve&&(R=qe(ve))&&this.parseID3PES(R),ve={data:[],size:0}),ve&&(ve.data.push(l.subarray(Oe,ye+188)),ve.size+=ye+188-Oe);break;case 0:be&&(Oe+=l[Oe]+1),De=this._pmtId=ot(l,Oe);break;case De:be&&(Oe+=l[Oe]+1);var Pe=lt(l,Oe,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,L);(j=Pe.avc)>0&&(C.pid=j),(te=Pe.audio)>0&&(N.pid=te,N.isAAC=Pe.isAAC),(re=Pe.id3)>0&&(W.pid=re),pe&&!ce&&(M.b.log("reparse from beginning"),pe=!1,ye=ke-188),ce=this.pmtParsed=!0;break;case 17:case 8191:break;default:pe=!0}}else _e++;_e>0&&this.observer.emit(_.a.ERROR,_.a.ERROR,{type:T.b.MEDIA_ERROR,details:T.a.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+_e+" TS packet/s that do not start with 0x47"}),C.pesData=$,N.pesData=ne,W.pesData=ve;var Ye={audioTrack:N,avcTrack:C,id3Track:W,textTrack:this._txtTrack};return x&&this.extractRemainingSamples(Ye),Ye},g.flush=function(){var l,m=this.remainderData;return this.remainderData=null,l=m?this.demux(m,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(l),this.sampleAes?this.decrypt(l,this.sampleAes):l},g.extractRemainingSamples=function(l){var m,L=l.audioTrack,x=l.avcTrack,R=l.id3Track,C=x.pesData,N=L.pesData,W=R.pesData;C&&(m=qe(C))?(this.parseAVCPES(m,!0),x.pesData=null):x.pesData=C,N&&(m=qe(N))?(L.isAAC?this.parseAACPES(m):this.parseMPEGPES(m),L.pesData=null):(N!=null&&N.size&&M.b.log("last AAC PES packet truncated,might overlap between fragments"),L.pesData=N),W&&(m=qe(W))?(this.parseID3PES(m),R.pesData=null):R.pesData=W},g.demuxSampleAes=function(l,m,L){var x=this.demux(l,L,!0,!this.config.progressive),R=this.sampleAes=new Kt(this.observer,this.config,m);return this.decrypt(x,R)},g.decrypt=function(l,m){return new Promise(function(L){var x=l.audioTrack,R=l.avcTrack;x.samples&&x.isAAC?m.decryptAacSamples(x.samples,0,function(){R.samples?m.decryptAvcSamples(R.samples,0,0,function(){L(l)}):L(l)}):R.samples&&m.decryptAvcSamples(R.samples,0,0,function(){L(l)})})},g.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},g.parseAVCPES=function(l,m){var L,x=this,R=this._avcTrack,C=this.parseAVCNALu(l.data),N=this.avcSample,W=!1;l.data=null,N&&C.length&&!R.audFound&&(er(N,R),N=this.avcSample=gt(!1,l.pts,l.dts,"")),C.forEach(function(j){switch(j.type){case 1:L=!0,N||(N=x.avcSample=gt(!0,l.pts,l.dts,"")),N.frame=!0;var $=j.data;if(W&&$.length>4){var te=new He($).readSliceType();te!==2&&te!==4&&te!==7&&te!==9||(N.key=!0)}break;case 5:L=!0,N||(N=x.avcSample=gt(!0,l.pts,l.dts,"")),N.key=!0,N.frame=!0;break;case 6:L=!0;var re=new He(Ar(j.data));re.readUByte();for(var ne=0,ve=0,pe=!1,ce=0;!pe&&re.bytesAvailable>1;){ne=0;do ne+=ce=re.readUByte();while(ce===255);ve=0;do ve+=ce=re.readUByte();while(ce===255);if(ne===4&&re.bytesAvailable!==0){if(pe=!0,re.readUByte()===181&&re.readUShort()===49&&re.readUInt()===1195456820&&re.readUByte()===3){for(var De=re.readUByte(),Re=31&De,ke=[De,re.readUByte()],_e=0;_e<Re;_e++)ke.push(re.readUByte()),ke.push(re.readUByte()),ke.push(re.readUByte());tr(x._txtTrack.samples,{type:3,pts:l.pts,bytes:ke})}}else if(ne===5&&re.bytesAvailable!==0){if(pe=!0,ve>16){for(var ye=[],be=0;be<16;be++)ye.push(re.readUByte().toString(16)),be!==3&&be!==5&&be!==7&&be!==9||ye.push("-");for(var Ce=ve-16,Oe=new Uint8Array(Ce),Pe=0;Pe<Ce;Pe++)Oe[Pe]=re.readUByte();tr(x._txtTrack.samples,{pts:l.pts,payloadType:ne,uuid:ye.join(""),userData:Object(I.f)(Oe),userDataBytes:Oe})}}else if(ve<re.bytesAvailable)for(var Ye=0;Ye<ve;Ye++)re.readUByte()}break;case 7:if(L=!0,W=!0,!R.sps){var tt=new He(j.data).readSPS();R.width=tt.width,R.height=tt.height,R.pixelRatio=tt.pixelRatio,R.sps=[j.data],R.duration=x._duration;for(var $e=j.data.subarray(1,4),Ue="avc1.",ze=0;ze<3;ze++){var Ie=$e[ze].toString(16);Ie.length<2&&(Ie="0"+Ie),Ue+=Ie}R.codec=Ue}break;case 8:L=!0,R.pps||(R.pps=[j.data]);break;case 9:L=!1,R.audFound=!0,N&&er(N,R),N=x.avcSample=gt(!1,l.pts,l.dts,"");break;case 12:L=!1;break;default:L=!1,N&&(N.debug+="unknown NAL "+j.type+" ")}N&&L&&N.units.push(j)}),m&&N&&(er(N,R),this.avcSample=null)},g.getLastNalUnit=function(){var l,m,L=this.avcSample;if(!L||L.units.length===0){var x=this._avcTrack.samples;L=x[x.length-1]}if((l=L)!==null&&l!==void 0&&l.units){var R=L.units;m=R[R.length-1]}return m},g.parseAVCNALu=function(l){var m,L,x=l.byteLength,R=this._avcTrack,C=R.naluState||0,N=C,W=[],j=0,$=-1,te=0;for(C===-1&&($=0,te=31&l[0],C=0,j=1);j<x;)if(m=l[j++],C)if(C!==1)if(m)if(m===1){if($>=0){var re={data:l.subarray($,j-C-1),type:te};W.push(re)}else{var ne=this.getLastNalUnit();if(ne&&(N&&j<=4-N&&ne.state&&(ne.data=ne.data.subarray(0,ne.data.byteLength-N)),(L=j-C-1)>0)){var ve=new Uint8Array(ne.data.byteLength+L);ve.set(ne.data,0),ve.set(l.subarray(0,L),ne.data.byteLength),ne.data=ve,ne.state=0}}j<x?($=j,te=31&l[j],C=0):C=-1}else C=0;else C=3;else C=m?0:2;else C=m?0:1;if($>=0&&C>=0){var pe={data:l.subarray($,x),type:te,state:C};W.push(pe)}if(W.length===0){var ce=this.getLastNalUnit();if(ce){var De=new Uint8Array(ce.data.byteLength+l.byteLength);De.set(ce.data,0),De.set(l,ce.data.byteLength),ce.data=De}}return R.naluState=C,W},g.parseAACPES=function(l){var m,L,x,R,C,N=0,W=this._audioTrack,j=this.aacOverFlow,$=l.data;if(j){this.aacOverFlow=null;var te=j.sample.unit.byteLength,re=Math.min(j.missing,te),ne=te-re;j.sample.unit.set($.subarray(0,re),ne),W.samples.push(j.sample),N=j.missing}for(m=N,L=$.length;m<L-1&&!z($,m);m++);if(!(m!==N&&(m<L-1?(x="AAC PES did not start with ADTS header,offset:"+m,R=!1):(x="no ADTS header found in AAC PES",R=!0),M.b.warn("parsing error:"+x),this.observer.emit(_.a.ERROR,_.a.ERROR,{type:T.b.MEDIA_ERROR,details:T.a.FRAG_PARSING_ERROR,fatal:R,reason:x}),R))){if(P(W,this.observer,$,m,this.audioCodec),l.pts!==void 0)C=l.pts;else{if(!j)return void M.b.warn("[tsdemuxer]: AAC PES unknown PTS");var ve=w(W.samplerate);C=j.sample.pts+ve}for(var pe=0;m<L;){if(z($,m)){if(m+5<L){var ce=O(W,$,m,C,pe);if(ce){if(!ce.missing){m+=ce.length,pe++;continue}this.aacOverFlow=ce}}break}m++}}},g.parseMPEGPES=function(l){var m=l.data,L=m.length,x=0,R=0,C=l.pts;if(C!==void 0)for(;R<L;)if(Me(m,R)){var N=xe(this._audioTrack,m,R,C,x);if(!N)break;R+=N.length,x++}else R++;else M.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},g.parseID3PES=function(l){l.pts!==void 0?this._id3Track.samples.push(l):M.b.warn("[tsdemuxer]: ID3 PES unknown PTS")},v}();function gt(v,g,l,m){return{key:v,frame:!1,pts:g,dts:l,units:[],debug:m,length:0}}function ot(v,g){return(31&v[g+10])<<8|v[g+11]}function lt(v,g,l,m){var L={audio:-1,avc:-1,id3:-1,isAAC:!0},x=g+3+((15&v[g+1])<<8|v[g+2])-4;for(g+=12+((15&v[g+10])<<8|v[g+11]);g<x;){var R=(31&v[g+1])<<8|v[g+2];switch(v[g]){case 207:if(!m){M.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:L.audio===-1&&(L.audio=R);break;case 21:L.id3===-1&&(L.id3=R);break;case 219:if(!m){M.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:L.avc===-1&&(L.avc=R);break;case 3:case 4:l?L.audio===-1&&(L.audio=R,L.isAAC=!1):M.b.log("MPEG audio found, not supported in this browser");break;case 36:M.b.warn("Unsupported HEVC stream type found")}g+=5+((15&v[g+3])<<8|v[g+4])}return L}function qe(v){var g,l,m,L,x,R=0,C=v.data;if(!v||v.size===0)return null;for(;C[0].length<19&&C.length>1;){var N=new Uint8Array(C[0].length+C[1].length);N.set(C[0]),N.set(C[1],C[0].length),C[0]=N,C.splice(1,1)}if(((g=C[0])[0]<<16)+(g[1]<<8)+g[2]===1){if((l=(g[4]<<8)+g[5])&&l>v.size-6)return null;var W=g[7];192&W&&(L=536870912*(14&g[9])+4194304*(255&g[10])+16384*(254&g[11])+128*(255&g[12])+(254&g[13])/2,64&W?L-(x=536870912*(14&g[14])+4194304*(255&g[15])+16384*(254&g[16])+128*(255&g[17])+(254&g[18])/2)>54e5&&(M.b.warn(Math.round((L-x)/9e4)+"s delta between PTS and DTS, align them"),L=x):x=L);var j=(m=g[8])+9;if(v.size<=j)return null;v.size-=j;for(var $=new Uint8Array(v.size),te=0,re=C.length;te<re;te++){var ne=(g=C[te]).byteLength;if(j){if(j>ne){j-=ne;continue}g=g.subarray(j),ne-=j,j=0}$.set(g,R),R+=ne}return l&&(l-=m+3),{data:$,pts:L,dts:x,len:l}}return null}function er(v,g){if(v.units.length&&v.frame){if(v.pts===void 0){var l=g.samples,m=l.length;if(!m)return void g.dropped++;var L=l[m-1];v.pts=L.pts,v.dts=L.dts}g.samples.push(v)}v.debug.length&&M.b.log(v.pts+"/"+v.dts+":"+v.debug)}function tr(v,g){var l=v.length;if(l>0){if(g.pts>=v[l-1].pts)v.push(g);else for(var m=l-1;m>=0;m--)if(g.pts<v[m].pts){v.splice(m,0,g);break}}else v.push(g)}function Ar(v){for(var g=v.byteLength,l=[],m=1;m<g-2;)v[m]===0&&v[m+1]===0&&v[m+2]===3?(l.push(m+2),m+=2):m++;if(l.length===0)return v;var L=g-l.length,x=new Uint8Array(L),R=0;for(m=0;m<L;R++,m++)R===l[0]&&(R++,l.shift()),x[m]=v[R];return x}Ot.minProbeByteLength=188;var Dr=Ot;function Rr(v,g){return(Rr=Object.setPrototypeOf||function(l,m){return l.__proto__=m,l})(v,g)}var rr=function(v){var g,l;function m(){return v.apply(this,arguments)||this}l=v,(g=m).prototype=Object.create(l.prototype),g.prototype.constructor=g,Rr(g,l);var L=m.prototype;return L.resetInitSegment=function(x,R,C){v.prototype.resetInitSegment.call(this,x,R,C),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:x,duration:C,inputTimeScale:9e4,dropped:0}},m.probe=function(x){if(!x)return!1;for(var R=(I.b(x,0)||[]).length,C=x.length;R<C;R++)if(Ge(x,R))return M.b.log("MPEG Audio sync word found !"),!0;return!1},L.canParse=function(x,R){return function(C,N){return je(C,N)&&4<=C.length-N}(x,R)},L.appendFrame=function(x,R,C){if(this.initPTS!==null)return xe(x,R,C,this.initPTS,this.frameIndex)},m}(G);rr.minProbeByteLength=4;var Ke=rr,_r=function(){function v(){}return v.getSilentFrame=function(g,l){switch(g){case"mp4a.40.2":if(l===1)return new Uint8Array([0,200,0,128,35,128]);if(l===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(l===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(l===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(l===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(l===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(l===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(l===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(l===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},v}(),mt=Math.pow(2,32)-1,Ze=function(){function v(){}return v.init=function(){var g;for(g in v.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},v.types)v.types.hasOwnProperty(g)&&(v.types[g]=[g.charCodeAt(0),g.charCodeAt(1),g.charCodeAt(2),g.charCodeAt(3)]);var l=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),m=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);v.HDLR_TYPES={video:l,audio:m};var L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0]);v.STTS=v.STSC=v.STCO=x,v.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),v.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),v.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),v.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var R=new Uint8Array([105,115,111,109]),C=new Uint8Array([97,118,99,49]),N=new Uint8Array([0,0,0,1]);v.FTYP=v.box(v.types.ftyp,R,N,R,C),v.DINF=v.box(v.types.dinf,v.box(v.types.dref,L))},v.box=function(g){for(var l=8,m=arguments.length,L=new Array(m>1?m-1:0),x=1;x<m;x++)L[x-1]=arguments[x];for(var R=L.length,C=R;R--;)l+=L[R].byteLength;var N=new Uint8Array(l);for(N[0]=l>>24&255,N[1]=l>>16&255,N[2]=l>>8&255,N[3]=255&l,N.set(g,4),R=0,l=8;R<C;R++)N.set(L[R],l),l+=L[R].byteLength;return N},v.hdlr=function(g){return v.box(v.types.hdlr,v.HDLR_TYPES[g])},v.mdat=function(g){return v.box(v.types.mdat,g)},v.mdhd=function(g,l){l*=g;var m=Math.floor(l/(mt+1)),L=Math.floor(l%(mt+1));return v.box(v.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,g>>24&255,g>>16&255,g>>8&255,255&g,m>>24,m>>16&255,m>>8&255,255&m,L>>24,L>>16&255,L>>8&255,255&L,85,196,0,0]))},v.mdia=function(g){return v.box(v.types.mdia,v.mdhd(g.timescale,g.duration),v.hdlr(g.type),v.minf(g))},v.mfhd=function(g){return v.box(v.types.mfhd,new Uint8Array([0,0,0,0,g>>24,g>>16&255,g>>8&255,255&g]))},v.minf=function(g){return g.type==="audio"?v.box(v.types.minf,v.box(v.types.smhd,v.SMHD),v.DINF,v.stbl(g)):v.box(v.types.minf,v.box(v.types.vmhd,v.VMHD),v.DINF,v.stbl(g))},v.moof=function(g,l,m){return v.box(v.types.moof,v.mfhd(g),v.traf(m,l))},v.moov=function(g){for(var l=g.length,m=[];l--;)m[l]=v.trak(g[l]);return v.box.apply(null,[v.types.moov,v.mvhd(g[0].timescale,g[0].duration)].concat(m).concat(v.mvex(g)))},v.mvex=function(g){for(var l=g.length,m=[];l--;)m[l]=v.trex(g[l]);return v.box.apply(null,[v.types.mvex].concat(m))},v.mvhd=function(g,l){l*=g;var m=Math.floor(l/(mt+1)),L=Math.floor(l%(mt+1)),x=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,g>>24&255,g>>16&255,g>>8&255,255&g,m>>24,m>>16&255,m>>8&255,255&m,L>>24,L>>16&255,L>>8&255,255&L,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return v.box(v.types.mvhd,x)},v.sdtp=function(g){var l,m,L=g.samples||[],x=new Uint8Array(4+L.length);for(l=0;l<L.length;l++)m=L[l].flags,x[l+4]=m.dependsOn<<4|m.isDependedOn<<2|m.hasRedundancy;return v.box(v.types.sdtp,x)},v.stbl=function(g){return v.box(v.types.stbl,v.stsd(g),v.box(v.types.stts,v.STTS),v.box(v.types.stsc,v.STSC),v.box(v.types.stsz,v.STSZ),v.box(v.types.stco,v.STCO))},v.avc1=function(g){var l,m,L,x=[],R=[];for(l=0;l<g.sps.length;l++)L=(m=g.sps[l]).byteLength,x.push(L>>>8&255),x.push(255&L),x=x.concat(Array.prototype.slice.call(m));for(l=0;l<g.pps.length;l++)L=(m=g.pps[l]).byteLength,R.push(L>>>8&255),R.push(255&L),R=R.concat(Array.prototype.slice.call(m));var C=v.box(v.types.avcC,new Uint8Array([1,x[3],x[4],x[5],255,224|g.sps.length].concat(x).concat([g.pps.length]).concat(R))),N=g.width,W=g.height,j=g.pixelRatio[0],$=g.pixelRatio[1];return v.box(v.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,N>>8&255,255&N,W>>8&255,255&W,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),C,v.box(v.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),v.box(v.types.pasp,new Uint8Array([j>>24,j>>16&255,j>>8&255,255&j,$>>24,$>>16&255,$>>8&255,255&$])))},v.esds=function(g){var l=g.config.length;return new Uint8Array([0,0,0,0,3,23+l,0,1,0,4,15+l,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([l]).concat(g.config).concat([6,1,2]))},v.mp4a=function(g){var l=g.samplerate;return v.box(v.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,g.channelCount,0,16,0,0,0,0,l>>8&255,255&l,0,0]),v.box(v.types.esds,v.esds(g)))},v.mp3=function(g){var l=g.samplerate;return v.box(v.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,g.channelCount,0,16,0,0,0,0,l>>8&255,255&l,0,0]))},v.stsd=function(g){return g.type==="audio"?g.isAAC||g.codec!=="mp3"?v.box(v.types.stsd,v.STSD,v.mp4a(g)):v.box(v.types.stsd,v.STSD,v.mp3(g)):v.box(v.types.stsd,v.STSD,v.avc1(g))},v.tkhd=function(g){var l=g.id,m=g.duration*g.timescale,L=g.width,x=g.height,R=Math.floor(m/(mt+1)),C=Math.floor(m%(mt+1));return v.box(v.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,l>>24&255,l>>16&255,l>>8&255,255&l,0,0,0,0,R>>24,R>>16&255,R>>8&255,255&R,C>>24,C>>16&255,C>>8&255,255&C,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,L>>8&255,255&L,0,0,x>>8&255,255&x,0,0]))},v.traf=function(g,l){var m=v.sdtp(g),L=g.id,x=Math.floor(l/(mt+1)),R=Math.floor(l%(mt+1));return v.box(v.types.traf,v.box(v.types.tfhd,new Uint8Array([0,0,0,0,L>>24,L>>16&255,L>>8&255,255&L])),v.box(v.types.tfdt,new Uint8Array([1,0,0,0,x>>24,x>>16&255,x>>8&255,255&x,R>>24,R>>16&255,R>>8&255,255&R])),v.trun(g,m.length+16+20+8+16+8+8),m)},v.trak=function(g){return g.duration=g.duration||4294967295,v.box(v.types.trak,v.tkhd(g),v.mdia(g))},v.trex=function(g){var l=g.id;return v.box(v.types.trex,new Uint8Array([0,0,0,0,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},v.trun=function(g,l){var m,L,x,R,C,N,W=g.samples||[],j=W.length,$=12+16*j,te=new Uint8Array($);for(l+=8+$,te.set([0,0,15,1,j>>>24&255,j>>>16&255,j>>>8&255,255&j,l>>>24&255,l>>>16&255,l>>>8&255,255&l],0),m=0;m<j;m++)x=(L=W[m]).duration,R=L.size,C=L.flags,N=L.cts,te.set([x>>>24&255,x>>>16&255,x>>>8&255,255&x,R>>>24&255,R>>>16&255,R>>>8&255,255&R,C.isLeading<<2|C.dependsOn,C.isDependedOn<<6|C.hasRedundancy<<4|C.paddingValue<<1|C.isNonSync,61440&C.degradPrio,15&C.degradPrio,N>>>24&255,N>>>16&255,N>>>8&255,255&N],12+16*m);return v.box(v.types.trun,te)},v.initSegment=function(g){v.types||v.init();var l=v.moov(g),m=new Uint8Array(v.FTYP.byteLength+l.byteLength);return m.set(v.FTYP),m.set(l,v.FTYP.byteLength),m},v}();Ze.types=void 0,Ze.HDLR_TYPES=void 0,Ze.STTS=void 0,Ze.STSC=void 0,Ze.STCO=void 0,Ze.STSZ=void 0,Ze.VMHD=void 0,Ze.SMHD=void 0,Ze.STSD=void 0,Ze.FTYP=void 0,Ze.DINF=void 0;var Et=Ze,pt=b(4);function $r(v,g,l,m){l===void 0&&(l=1),m===void 0&&(m=!1);var L=v*g*l;return m?Math.round(L):L}function Tt(v,g){return g===void 0&&(g=!1),$r(v,1e3,1/9e4,g)}function Ne(){return(Ne=Object.assign||function(v){for(var g=1;g<arguments.length;g++){var l=arguments[g];for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(v[m]=l[m])}return v}).apply(this,arguments)}var St=null,It=null,nr=!1,ir=function(){function v(l,m,L,x){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=l,this.config=m,this.typeSupported=L,this.ISGenerated=!1,St===null){var R=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);St=R?parseInt(R[1]):0}if(It===null){var C=navigator.userAgent.match(/Safari\/(\d+)/i);It=C?parseInt(C[1]):0}nr=!!St&&St<75||!!It&&It<600}var g=v.prototype;return g.destroy=function(){},g.resetTimeStamp=function(l){M.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=l},g.resetNextTimestamp=function(){M.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},g.resetInitSegment=function(){M.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},g.getVideoStartPts=function(l){var m=!1,L=l.reduce(function(x,R){var C=R.pts-x;return C<-4294967296?(m=!0,et(x,R.pts)):C>0?x:R.pts},l[0].pts);return m&&M.b.debug("PTS rollover detected"),L},g.remux=function(l,m,L,x,R,C,N,W){var j,$,te,re,ne,ve,pe=R,ce=R,De=l.pid>-1,Re=m.pid>-1,ke=m.samples.length,_e=l.samples.length>0,ye=ke>1;if((!De||_e)&&(!Re||ye)||this.ISGenerated||N){this.ISGenerated||(te=this.generateIS(l,m,R));var be=this.isVideoContiguous,Ce=-1;if(ye&&(Ce=function($e){for(var Ue=0;Ue<$e.length;Ue++)if($e[Ue].key)return Ue;return-1}(m.samples),!be&&this.config.forceKeyFrameOnDiscontinuity))if(ve=!0,Ce>0){M.b.warn("[mp4-remuxer]: Dropped "+Ce+" out of "+ke+" video samples due to a missing keyframe");var Oe=this.getVideoStartPts(m.samples);m.samples=m.samples.slice(Ce),m.dropped+=Ce,ce+=(m.samples[0].pts-Oe)/(m.timescale||9e4)}else Ce===-1&&(M.b.warn("[mp4-remuxer]: No keyframe found out of "+ke+" video samples"),ve=!1);if(this.ISGenerated){if(_e&&ye){var Pe=this.getVideoStartPts(m.samples),Ye=(et(l.samples[0].pts,Pe)-Pe)/m.inputTimeScale;pe+=Math.max(0,Ye),ce+=Math.max(0,-Ye)}if(_e){if(l.samplerate||(M.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),te=this.generateIS(l,m,R)),$=this.remuxAudio(l,pe,this.isAudioContiguous,C,Re||ye||W===pt.b.AUDIO?ce:void 0),ye){var tt=$?$.endPTS-$.startPTS:0;m.inputTimeScale||(M.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),te=this.generateIS(l,m,R)),j=this.remuxVideo(m,ce,be,tt)}}else ye&&(j=this.remuxVideo(m,ce,be,0));j&&(j.firstKeyFrame=Ce,j.independent=Ce!==-1)}}return this.ISGenerated&&(L.samples.length&&(ne=this.remuxID3(L,R)),x.samples.length&&(re=this.remuxText(x,R))),{audio:$,video:j,initSegment:te,independent:ve,text:re,id3:ne}},g.generateIS=function(l,m,L){var x,R,C,N=l.samples,W=m.samples,j=this.typeSupported,$={},te=!Object(B.a)(this._initPTS),re="audio/mp4";if(te&&(x=R=1/0),l.config&&N.length&&(l.timescale=l.samplerate,l.isAAC||(j.mpeg?(re="audio/mpeg",l.codec=""):j.mp3&&(l.codec="mp3")),$.audio={id:"audio",container:re,codec:l.codec,initSegment:!l.isAAC&&j.mpeg?new Uint8Array(0):Et.initSegment([l]),metadata:{channelCount:l.channelCount}},te&&(C=l.inputTimeScale,x=R=N[0].pts-Math.round(C*L))),m.sps&&m.pps&&W.length&&(m.timescale=m.inputTimeScale,$.video={id:"main",container:"video/mp4",codec:m.codec,initSegment:Et.initSegment([m]),metadata:{width:m.width,height:m.height}},te)){C=m.inputTimeScale;var ne=this.getVideoStartPts(W),ve=Math.round(C*L);R=Math.min(R,et(W[0].dts,ne)-ve),x=Math.min(x,ne-ve)}if(Object.keys($).length)return this.ISGenerated=!0,te&&(this._initPTS=x,this._initDTS=R),{tracks:$,initPTS:x,timescale:C}},g.remuxVideo=function(l,m,L,x){var R,C,N,W=l.inputTimeScale,j=l.samples,$=[],te=j.length,re=this._initPTS,ne=this.nextAvcDts,ve=8,pe=Number.POSITIVE_INFINITY,ce=Number.NEGATIVE_INFINITY,De=0,Re=!1;L&&ne!==null||(ne=m*W-(j[0].pts-et(j[0].dts,j[0].pts)));for(var ke=0;ke<te;ke++){var _e=j[ke];_e.pts=et(_e.pts-re,ne),_e.dts=et(_e.dts-re,ne),_e.dts>_e.pts&&(De=Math.max(Math.min(De,_e.pts-_e.dts),-18e3)),_e.dts<j[ke>0?ke-1:ke].dts&&(Re=!0)}Re&&j.sort(function(ur,dr){var Fr=ur.dts-dr.dts,p=ur.pts-dr.pts;return Fr||p}),C=j[0].dts,N=j[j.length-1].dts;var ye=Math.round((N-C)/(te-1));if(De<0){if(De<-2*ye){M.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Tt(-ye,!0)+" ms");for(var be=De,Ce=0;Ce<te;Ce++)j[Ce].dts=be=Math.max(be,j[Ce].pts-ye),j[Ce].pts=Math.max(be,j[Ce].pts)}else{M.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Tt(De,!0)+" ms to overcome this issue");for(var Oe=0;Oe<te;Oe++)j[Oe].dts=j[Oe].dts+De}C=j[0].dts}if(L){var Pe=C-ne,Ye=Pe>ye;if(Ye||Pe<-1){Ye?M.b.warn("AVC: "+Tt(Pe,!0)+" ms ("+Pe+"dts) hole between fragments detected, filling it"):M.b.warn("AVC: "+Tt(-Pe,!0)+" ms ("+Pe+"dts) overlapping between fragments detected"),C=ne;var tt=j[0].pts-Pe;j[0].dts=C,j[0].pts=tt,M.b.log("Video: First PTS/DTS adjusted: "+Tt(tt,!0)+"/"+Tt(C,!0)+", delta: "+Tt(Pe,!0)+" ms")}}nr&&(C=Math.max(0,C));for(var $e=0,Ue=0,ze=0;ze<te;ze++){for(var Ie=j[ze],Qe=Ie.units,Nt=Qe.length,ft=0,Bt=0;Bt<Nt;Bt++)ft+=Qe[Bt].data.length;Ue+=ft,$e+=Nt,Ie.length=ft,Ie.dts=Math.max(Ie.dts,C),Ie.pts=Math.max(Ie.pts,Ie.dts,0),pe=Math.min(Ie.pts,pe),ce=Math.max(Ie.pts,ce)}N=j[te-1].dts;var ht,Lt=Ue+4*$e+8;try{ht=new Uint8Array(Lt)}catch{return void this.observer.emit(_.a.ERROR,_.a.ERROR,{type:T.b.MUX_ERROR,details:T.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:Lt,reason:"fail allocating video mdat "+Lt})}var yt=new DataView(ht.buffer);yt.setUint32(0,Lt),ht.set(Et.types.mdat,4);for(var rt=0;rt<te;rt++){for(var it=j[rt],At=it.units,Ut=0,Dt=0,Ht=At.length;Dt<Ht;Dt++){var Wt=At[Dt],bt=Wt.data,or=Wt.data.byteLength;yt.setUint32(ve,or),ve+=4,ht.set(bt,ve),ve+=or,Ut+=4+or}if(rt<te-1)R=j[rt+1].dts-it.dts;else{var lr=this.config,qt=it.dts-j[rt>0?rt-1:rt].dts;if(lr.stretchShortVideoTrack&&this.nextAudioPts!==null){var Or=Math.floor(lr.maxBufferHole*W),Yt=(x?pe+x*W:this.nextAudioPts)-it.pts;Yt>Or?((R=Yt-qt)<0&&(R=qt),M.b.log("[mp4-remuxer]: It is approximately "+Yt/90+" ms to the next segment; using duration "+R/90+" ms for the last video frame.")):R=qt}else R=qt}var Ir=Math.round(it.pts-it.dts);$.push(new ar(it.key,R,Ut,Ir))}if($.length&&St&&St<70){var Pr=$[0].flags;Pr.dependsOn=2,Pr.isNonSync=0}this.nextAvcDts=ne=N+R,this.isVideoContiguous=!0;var tn={data1:Et.moof(l.sequenceNumber++,C,Ne({},l,{samples:$})),data2:ht,startPTS:pe/W,endPTS:(ce+R)/W,startDTS:C/W,endDTS:ne/W,type:"video",hasAudio:!1,hasVideo:!0,nb:$.length,dropped:l.dropped};return l.samples=[],l.dropped=0,tn},g.remuxAudio=function(l,m,L,x,R){var C=l.inputTimeScale,N=C/(l.samplerate?l.samplerate:C),W=l.isAAC?1024:1152,j=W*N,$=this._initPTS,te=!l.isAAC&&this.typeSupported.mpeg,re=[],ne=l.samples,ve=te?0:8,pe=this.nextAudioPts||-1,ce=m*C;if(this.isAudioContiguous=L=L||ne.length&&pe>0&&(x&&Math.abs(ce-pe)<9e3||Math.abs(et(ne[0].pts-$,ce)-pe)<20*j),ne.forEach(function(bt){bt.pts=et(bt.pts-$,ce)}),!L||pe<0){if(!(ne=ne.filter(function(bt){return bt.pts>=0})).length)return;pe=R===0?0:x?Math.max(0,ce):ne[0].pts}if(l.isAAC)for(var De=R!==void 0,Re=this.config.maxAudioFramesDrift,ke=0,_e=pe;ke<ne.length;ke++){var ye=ne[ke],be=ye.pts,Ce=be-_e,Oe=Math.abs(1e3*Ce/C);if(Ce<=-Re*j&&De)ke===0&&(M.b.warn("Audio frame @ "+(be/C).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*Ce/C)+" ms."),this.nextAudioPts=pe=_e=be);else if(Ce>=Re*j&&Oe<1e4&&De){var Pe=Math.round(Ce/j);(_e=be-Pe*j)<0&&(Pe--,_e+=j),ke===0&&(this.nextAudioPts=pe=_e),M.b.warn("[mp4-remuxer]: Injecting "+Pe+" audio frame @ "+(_e/C).toFixed(3)+"s due to "+Math.round(1e3*Ce/C)+" ms gap.");for(var Ye=0;Ye<Pe;Ye++){var tt=Math.max(_e,0),$e=_r.getSilentFrame(l.manifestCodec||l.codec,l.channelCount);$e||(M.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),$e=ye.unit.subarray()),ne.splice(ke,0,{unit:$e,pts:tt}),_e+=j,ke++}}ye.pts=_e,_e+=j}for(var Ue,ze=null,Ie=null,Qe=0,Nt=ne.length;Nt--;)Qe+=ne[Nt].unit.byteLength;for(var ft=0,Bt=ne.length;ft<Bt;ft++){var ht=ne[ft],Lt=ht.unit,yt=ht.pts;if(Ie!==null)re[ft-1].duration=Math.round((yt-Ie)/N);else{if(L&&l.isAAC&&(yt=pe),ze=yt,!(Qe>0))return;Qe+=ve;try{Ue=new Uint8Array(Qe)}catch{return void this.observer.emit(_.a.ERROR,_.a.ERROR,{type:T.b.MUX_ERROR,details:T.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:Qe,reason:"fail allocating audio mdat "+Qe})}te||(new DataView(Ue.buffer).setUint32(0,Qe),Ue.set(Et.types.mdat,4))}Ue.set(Lt,ve);var rt=Lt.byteLength;ve+=rt,re.push(new ar(!0,W,rt,0)),Ie=yt}var it=re.length;if(it){var At=re[re.length-1];this.nextAudioPts=pe=Ie+N*At.duration;var Ut=te?new Uint8Array(0):Et.moof(l.sequenceNumber++,ze/N,Ne({},l,{samples:re}));l.samples=[];var Dt=ze/C,Ht=pe/C,Wt={data1:Ut,data2:Ue,startPTS:Dt,endPTS:Ht,startDTS:Dt,endDTS:Ht,type:"audio",hasAudio:!0,hasVideo:!1,nb:it};return this.isAudioContiguous=!0,Wt}},g.remuxEmptyAudio=function(l,m,L,x){var R=l.inputTimeScale,C=R/(l.samplerate?l.samplerate:R),N=this.nextAudioPts,W=(N!==null?N:x.startDTS*R)+this._initDTS,j=x.endDTS*R+this._initDTS,$=1024*C,te=Math.ceil((j-W)/$),re=_r.getSilentFrame(l.manifestCodec||l.codec,l.channelCount);if(M.b.warn("[mp4-remuxer]: remux empty Audio"),re){for(var ne=[],ve=0;ve<te;ve++){var pe=W+ve*$;ne.push({unit:re,pts:pe,dts:pe})}return l.samples=ne,this.remuxAudio(l,m,L,!1)}M.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},g.remuxID3=function(l,m){var L=l.samples.length;if(L){for(var x=l.inputTimeScale,R=this._initPTS,C=this._initDTS,N=0;N<L;N++){var W=l.samples[N];W.pts=et(W.pts-R,m*x)/x,W.dts=et(W.dts-C,m*x)/x}var j=l.samples;return l.samples=[],{samples:j}}},g.remuxText=function(l,m){var L=l.samples.length;if(L){for(var x=l.inputTimeScale,R=this._initPTS,C=0;C<L;C++){var N=l.samples[C];N.pts=et(N.pts-R,m*x)/x}l.samples.sort(function(j,$){return j.pts-$.pts});var W=l.samples;return l.samples=[],{samples:W}}},v}();function et(v,g){var l;if(g===null)return v;for(l=g<v?-8589934592:8589934592;Math.abs(v-g)>4294967296;)v+=l;return v}var ar=function(v,g,l,m){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=g,this.size=l,this.cts=m,this.flags=new Qr(v)},Qr=function(v){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=v?2:1,this.isNonSync=v?0:1},Vt=b(5),xr=function(){function v(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var g=v.prototype;return g.destroy=function(){},g.resetTimeStamp=function(l){this.initPTS=l,this.lastEndDTS=null},g.resetNextTimestamp=function(){this.lastEndDTS=null},g.resetInitSegment=function(l,m,L){this.audioCodec=m,this.videoCodec=L,this.generateInitSegment(l),this.emitInitSegment=!0},g.generateInitSegment=function(l){var m=this.audioCodec,L=this.videoCodec;if(!l||!l.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var x=this.initData=Object(X.f)(l);m||(m=Pt(x.audio,Vt.a.AUDIO)),L||(L=Pt(x.video,Vt.a.VIDEO));var R={};x.audio&&x.video?R.audiovideo={container:"video/mp4",codec:m+","+L,initSegment:l,id:"main"}:x.audio?R.audio={container:"audio/mp4",codec:m,initSegment:l,id:"audio"}:x.video?R.video={container:"video/mp4",codec:L,initSegment:l,id:"main"}:M.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=R},g.remux=function(l,m,L,x,R){var C=this.initPTS,N=this.lastEndDTS,W={audio:void 0,video:void 0,text:x,id3:L,initSegment:void 0};Object(B.a)(N)||(N=this.lastEndDTS=R||0);var j=m.samples;if(!j||!j.length)return W;var $={initPTS:void 0,timescale:1},te=this.initData;if(te&&te.length||(this.generateInitSegment(j),te=this.initData),!te||!te.length)return M.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),W;this.emitInitSegment&&($.tracks=this.initTracks,this.emitInitSegment=!1),Object(B.a)(C)||(this.initPTS=$.initPTS=C=Jr(te,j,N));var re=Object(X.c)(j,te),ne=N,ve=re+ne;Object(X.e)(te,j,C),re>0?this.lastEndDTS=ve:(M.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var pe=!!te.audio,ce=!!te.video,De="";pe&&(De+="audio"),ce&&(De+="video");var Re={data1:j,startPTS:ne,startDTS:ne,endPTS:ve,endDTS:ve,type:De,hasAudio:pe,hasVideo:ce,nb:1,dropped:0};return W.audio=Re.type==="audio"?Re:void 0,W.video=Re.type!=="audio"?Re:void 0,W.text=x,W.id3=L,W.initSegment=$,W},v}(),Jr=function(v,g,l){return Object(X.d)(v,g)-l};function Pt(v,g){var l=v?.codec;return l&&l.length>4?l:l==="hvc1"?"hvc1.1.c.L120.90":l==="av01"?"av01.0.04M.08":l==="avc1"||g===Vt.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var ut,sr=xr,Zr=b(16);try{ut=self.performance.now.bind(self.performance)}catch{M.b.debug("Unable to use Performance API on this environment"),ut=self.Date.now}var Ft=[{demux:Dr,remux:ir},{demux:de,remux:sr},{demux:ue,remux:ir},{demux:Ke,remux:ir}],dt=1024;Ft.forEach(function(v){var g=v.demux;dt=Math.max(dt,g.minProbeByteLength)});var en=function(){function v(l,m,L,x,R){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new Zr.a,this.observer=l,this.typeSupported=m,this.config=L,this.vendor=x,this.id=R}var g=v.prototype;return g.configure=function(l){this.transmuxConfig=l,this.decrypter&&this.decrypter.reset()},g.push=function(l,m,L,x){var R=this,C=L.transmuxing;C.executeStart=ut();var N=new Uint8Array(l),W=this.cache,j=this.config,$=this.currentTransmuxState,te=this.transmuxConfig;x&&(this.currentTransmuxState=x);var re=function(ze,Ie){var Qe=null;return ze.byteLength>0&&Ie!=null&&Ie.key!=null&&Ie.iv!==null&&Ie.method!=null&&(Qe=Ie),Qe}(N,m);if(re&&re.method==="AES-128"){var ne=this.getDecrypter();if(!j.enableSoftwareAES)return this.decryptionPromise=ne.webCryptoDecrypt(N,re.key.buffer,re.iv.buffer).then(function(ze){var Ie=R.push(ze,null,L);return R.decryptionPromise=null,Ie}),this.decryptionPromise;var ve=ne.softwareDecrypt(N,re.key.buffer,re.iv.buffer);if(!ve)return C.executeEnd=ut(),kr(L);N=new Uint8Array(ve)}var pe=x||$,ce=pe.contiguous,De=pe.discontinuity,Re=pe.trackSwitch,ke=pe.accurateTimeOffset,_e=pe.timeOffset,ye=pe.initSegmentChange,be=te.audioCodec,Ce=te.videoCodec,Oe=te.defaultInitPts,Pe=te.duration,Ye=te.initSegmentData;if((De||Re||ye)&&this.resetInitSegment(Ye,be,Ce,Pe),(De||ye)&&this.resetInitialTimestamp(Oe),ce||this.resetContiguity(),this.needsProbing(N,De,Re)){if(W.dataLength){var tt=W.flush();N=Object(X.a)(tt,N)}this.configureTransmuxer(N,te)}var $e=this.transmux(N,re,_e,ke,L),Ue=this.currentTransmuxState;return Ue.contiguous=!0,Ue.discontinuity=!1,Ue.trackSwitch=!1,C.executeEnd=ut(),$e},g.flush=function(l){var m=this,L=l.transmuxing;L.executeStart=ut();var x=this.decrypter,R=this.cache,C=this.currentTransmuxState,N=this.decryptionPromise;if(N)return N.then(function(){return m.flush(l)});var W=[],j=C.timeOffset;if(x){var $=x.flush();$&&W.push(this.push($,null,l))}var te=R.dataLength;R.reset();var re=this.demuxer,ne=this.remuxer;if(!re||!ne)return te>=dt&&this.observer.emit(_.a.ERROR,_.a.ERROR,{type:T.b.MEDIA_ERROR,details:T.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),L.executeEnd=ut(),[kr(l)];var ve=re.flush(j);return wr(ve)?ve.then(function(pe){return m.flushRemux(W,pe,l),W}):(this.flushRemux(W,ve,l),W)},g.flushRemux=function(l,m,L){var x=m.audioTrack,R=m.avcTrack,C=m.id3Track,N=m.textTrack,W=this.currentTransmuxState,j=W.accurateTimeOffset,$=W.timeOffset;M.b.log("[transmuxer.ts]: Flushed fragment "+L.sn+(L.part>-1?" p: "+L.part:"")+" of level "+L.level);var te=this.remuxer.remux(x,R,C,N,$,j,!0,this.id);l.push({remuxResult:te,chunkMeta:L}),L.transmuxing.executeEnd=ut()},g.resetInitialTimestamp=function(l){var m=this.demuxer,L=this.remuxer;m&&L&&(m.resetTimeStamp(l),L.resetTimeStamp(l))},g.resetContiguity=function(){var l=this.demuxer,m=this.remuxer;l&&m&&(l.resetContiguity(),m.resetNextTimestamp())},g.resetInitSegment=function(l,m,L,x){var R=this.demuxer,C=this.remuxer;R&&C&&(R.resetInitSegment(m,L,x),C.resetInitSegment(l,m,L))},g.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},g.transmux=function(l,m,L,x,R){return m&&m.method==="SAMPLE-AES"?this.transmuxSampleAes(l,m,L,x,R):this.transmuxUnencrypted(l,L,x,R)},g.transmuxUnencrypted=function(l,m,L,x){var R=this.demuxer.demux(l,m,!1,!this.config.progressive),C=R.audioTrack,N=R.avcTrack,W=R.id3Track,j=R.textTrack;return{remuxResult:this.remuxer.remux(C,N,W,j,m,L,!1,this.id),chunkMeta:x}},g.transmuxSampleAes=function(l,m,L,x,R){var C=this;return this.demuxer.demuxSampleAes(l,m,L).then(function(N){return{remuxResult:C.remuxer.remux(N.audioTrack,N.avcTrack,N.id3Track,N.textTrack,L,x,!1,C.id),chunkMeta:R}})},g.configureTransmuxer=function(l,m){for(var L,x=this.config,R=this.observer,C=this.typeSupported,N=this.vendor,W=m.audioCodec,j=m.defaultInitPts,$=m.duration,te=m.initSegmentData,re=m.videoCodec,ne=0,ve=Ft.length;ne<ve;ne++)if(Ft[ne].demux.probe(l)){L=Ft[ne];break}L||(M.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),L={demux:de,remux:sr});var pe=this.demuxer,ce=this.remuxer,De=L.remux,Re=L.demux;ce&&ce instanceof De||(this.remuxer=new De(R,x,C,N)),pe&&pe instanceof Re||(this.demuxer=new Re(R,x,C),this.probe=Re.probe),this.resetInitSegment(te,W,re,$),this.resetInitialTimestamp(j)},g.needsProbing=function(l,m,L){return!this.demuxer||!this.remuxer||m||L},g.getDecrypter=function(){var l=this.decrypter;return l||(l=this.decrypter=new c.a(this.observer,this.config)),l},v}(),kr=function(v){return{remuxResult:{},chunkMeta:v}};function wr(v){return"then"in v&&v.then instanceof Function}var Cr=function(v,g,l,m,L){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=v,this.videoCodec=g,this.initSegmentData=l,this.duration=m,this.defaultInitPts=L},Mt=function(v,g,l,m,L,x){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=v,this.contiguous=g,this.accurateTimeOffset=l,this.trackSwitch=m,this.timeOffset=L,this.initSegmentChange=x}},function(E,A){E.exports=void 0},function(E,A,b){var _,T,c,B,I;_=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,T=/^([^\/?#]*)([^]*)$/,c=/(?:\/|^)\.(?=\/)/g,B=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,I={buildAbsoluteURL:function(X,q,H){if(H=H||{},X=X.trim(),!(q=q.trim())){if(!H.alwaysNormalize)return X;var V=I.parseURL(X);if(!V)throw new Error("Error trying to parse base URL.");return V.path=I.normalizePath(V.path),I.buildURLFromParts(V)}var G=I.parseURL(q);if(!G)throw new Error("Error trying to parse relative URL.");if(G.scheme)return H.alwaysNormalize?(G.path=I.normalizePath(G.path),I.buildURLFromParts(G)):q;var M=I.parseURL(X);if(!M)throw new Error("Error trying to parse base URL.");if(!M.netLoc&&M.path&&M.path[0]!=="/"){var ae=T.exec(M.path);M.netLoc=ae[1],M.path=ae[2]}M.netLoc&&!M.path&&(M.path="/");var Y={scheme:M.scheme,netLoc:G.netLoc,path:null,params:G.params,query:G.query,fragment:G.fragment};if(!G.netLoc&&(Y.netLoc=M.netLoc,G.path[0]!=="/"))if(G.path){var J=M.path,z=J.substring(0,J.lastIndexOf("/")+1)+G.path;Y.path=I.normalizePath(z)}else Y.path=M.path,G.params||(Y.params=M.params,G.query||(Y.query=M.query));return Y.path===null&&(Y.path=H.alwaysNormalize?I.normalizePath(G.path):G.path),I.buildURLFromParts(Y)},parseURL:function(X){var q=_.exec(X);return q?{scheme:q[1]||"",netLoc:q[2]||"",path:q[3]||"",params:q[4]||"",query:q[5]||"",fragment:q[6]||""}:null},normalizePath:function(X){for(X=X.split("").reverse().join("").replace(c,"");X.length!==(X=X.replace(B,"")).length;);return X.split("").reverse().join("")},buildURLFromParts:function(X){return X.scheme+X.netLoc+X.path+X.params+X.query+X.fragment}},E.exports=I},function(E,A,b){b.d(A,"a",function(){return _});var _=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(E,A,b){var _=Object.prototype.hasOwnProperty,T="~";function c(){}function B(H,V,G){this.fn=H,this.context=V,this.once=G||!1}function I(H,V,G,M,ae){if(typeof G!="function")throw new TypeError("The listener must be a function");var Y=new B(G,M||H,ae),J=T?T+V:V;return H._events[J]?H._events[J].fn?H._events[J]=[H._events[J],Y]:H._events[J].push(Y):(H._events[J]=Y,H._eventsCount++),H}function X(H,V){--H._eventsCount==0?H._events=new c:delete H._events[V]}function q(){this._events=new c,this._eventsCount=0}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(T=!1)),q.prototype.eventNames=function(){var H,V,G=[];if(this._eventsCount===0)return G;for(V in H=this._events)_.call(H,V)&&G.push(T?V.slice(1):V);return Object.getOwnPropertySymbols?G.concat(Object.getOwnPropertySymbols(H)):G},q.prototype.listeners=function(H){var V=T?T+H:H,G=this._events[V];if(!G)return[];if(G.fn)return[G.fn];for(var M=0,ae=G.length,Y=new Array(ae);M<ae;M++)Y[M]=G[M].fn;return Y},q.prototype.listenerCount=function(H){var V=T?T+H:H,G=this._events[V];return G?G.fn?1:G.length:0},q.prototype.emit=function(H,V,G,M,ae,Y){var J=T?T+H:H;if(!this._events[J])return!1;var z,Q,P=this._events[J],w=arguments.length;if(P.fn){switch(P.once&&this.removeListener(H,P.fn,void 0,!0),w){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,V),!0;case 3:return P.fn.call(P.context,V,G),!0;case 4:return P.fn.call(P.context,V,G,M),!0;case 5:return P.fn.call(P.context,V,G,M,ae),!0;case 6:return P.fn.call(P.context,V,G,M,ae,Y),!0}for(Q=1,z=new Array(w-1);Q<w;Q++)z[Q-1]=arguments[Q];P.fn.apply(P.context,z)}else{var O,Z=P.length;for(Q=0;Q<Z;Q++)switch(P[Q].once&&this.removeListener(H,P[Q].fn,void 0,!0),w){case 1:P[Q].fn.call(P[Q].context);break;case 2:P[Q].fn.call(P[Q].context,V);break;case 3:P[Q].fn.call(P[Q].context,V,G);break;case 4:P[Q].fn.call(P[Q].context,V,G,M);break;default:if(!z)for(O=1,z=new Array(w-1);O<w;O++)z[O-1]=arguments[O];P[Q].fn.apply(P[Q].context,z)}}return!0},q.prototype.on=function(H,V,G){return I(this,H,V,G,!1)},q.prototype.once=function(H,V,G){return I(this,H,V,G,!0)},q.prototype.removeListener=function(H,V,G,M){var ae=T?T+H:H;if(!this._events[ae])return this;if(!V)return X(this,ae),this;var Y=this._events[ae];if(Y.fn)Y.fn!==V||M&&!Y.once||G&&Y.context!==G||X(this,ae);else{for(var J=0,z=[],Q=Y.length;J<Q;J++)(Y[J].fn!==V||M&&!Y[J].once||G&&Y[J].context!==G)&&z.push(Y[J]);z.length?this._events[ae]=z.length===1?z[0]:z:X(this,ae)}return this},q.prototype.removeAllListeners=function(H){var V;return H?(V=T?T+H:H,this._events[V]&&X(this,V)):(this._events=new c,this._eventsCount=0),this},q.prototype.off=q.prototype.removeListener,q.prototype.addListener=q.prototype.on,q.prefixed=T,q.EventEmitter=q,E.exports=q},function(E,A,b){b.d(A,"a",function(){return q});var _=function(){function H(V,G){this.subtle=void 0,this.aesIV=void 0,this.subtle=V,this.aesIV=G}return H.prototype.decrypt=function(V,G){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},G,V)},H}(),T=function(){function H(V,G){this.subtle=void 0,this.key=void 0,this.subtle=V,this.key=G}return H.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},H}(),c=b(8),B=function(){function H(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var V=H.prototype;return V.uint8ArrayToUint32Array_=function(G){for(var M=new DataView(G),ae=new Uint32Array(4),Y=0;Y<4;Y++)ae[Y]=M.getUint32(4*Y);return ae},V.initTable=function(){var G=this.sBox,M=this.invSBox,ae=this.subMix,Y=ae[0],J=ae[1],z=ae[2],Q=ae[3],P=this.invSubMix,w=P[0],O=P[1],Z=P[2],ie=P[3],ue=new Uint32Array(256),he=0,de=0,ee=0;for(ee=0;ee<256;ee++)ue[ee]=ee<128?ee<<1:ee<<1^283;for(ee=0;ee<256;ee++){var Ee=de^de<<1^de<<2^de<<3^de<<4;Ee=Ee>>>8^255&Ee^99,G[he]=Ee,M[Ee]=he;var Le=ue[he],Se=ue[Le],Ae=ue[Se],xe=257*ue[Ee]^16843008*Ee;Y[he]=xe<<24|xe>>>8,J[he]=xe<<16|xe>>>16,z[he]=xe<<8|xe>>>24,Q[he]=xe,xe=16843009*Ae^65537*Se^257*Le^16843008*he,w[Ee]=xe<<24|xe>>>8,O[Ee]=xe<<16|xe>>>16,Z[Ee]=xe<<8|xe>>>24,ie[Ee]=xe,he?(he=Le^ue[ue[ue[Ae^Le]]],de^=ue[ue[de]]):he=de=1}},V.expandKey=function(G){for(var M=this.uint8ArrayToUint32Array_(G),ae=!0,Y=0;Y<M.length&&ae;)ae=M[Y]===this.key[Y],Y++;if(!ae){this.key=M;var J=this.keySize=M.length;if(J!==4&&J!==6&&J!==8)throw new Error("Invalid aes key size="+J);var z,Q,P,w,O=this.ksRows=4*(J+6+1),Z=this.keySchedule=new Uint32Array(O),ie=this.invKeySchedule=new Uint32Array(O),ue=this.sBox,he=this.rcon,de=this.invSubMix,ee=de[0],Ee=de[1],Le=de[2],Se=de[3];for(z=0;z<O;z++)z<J?P=Z[z]=M[z]:(w=P,z%J==0?(w=ue[(w=w<<8|w>>>24)>>>24]<<24|ue[w>>>16&255]<<16|ue[w>>>8&255]<<8|ue[255&w],w^=he[z/J|0]<<24):J>6&&z%J==4&&(w=ue[w>>>24]<<24|ue[w>>>16&255]<<16|ue[w>>>8&255]<<8|ue[255&w]),Z[z]=P=(Z[z-J]^w)>>>0);for(Q=0;Q<O;Q++)z=O-Q,w=3&Q?Z[z]:Z[z-4],ie[Q]=Q<4||z<=4?w:ee[ue[w>>>24]]^Ee[ue[w>>>16&255]]^Le[ue[w>>>8&255]]^Se[ue[255&w]],ie[Q]=ie[Q]>>>0}},V.networkToHostOrderSwap=function(G){return G<<24|(65280&G)<<8|(16711680&G)>>8|G>>>24},V.decrypt=function(G,M,ae){for(var Y,J,z,Q,P,w,O,Z,ie,ue,he,de,ee,Ee,Le=this.keySize+6,Se=this.invKeySchedule,Ae=this.invSBox,xe=this.invSubMix,Be=xe[0],je=xe[1],Me=xe[2],Ge=xe[3],He=this.uint8ArrayToUint32Array_(ae),Kt=He[0],Ct=He[1],Ot=He[2],gt=He[3],ot=new Int32Array(G),lt=new Int32Array(ot.length),qe=this.networkToHostOrderSwap;M<ot.length;){for(ie=qe(ot[M]),ue=qe(ot[M+1]),he=qe(ot[M+2]),de=qe(ot[M+3]),P=ie^Se[0],w=de^Se[1],O=he^Se[2],Z=ue^Se[3],ee=4,Ee=1;Ee<Le;Ee++)Y=Be[P>>>24]^je[w>>16&255]^Me[O>>8&255]^Ge[255&Z]^Se[ee],J=Be[w>>>24]^je[O>>16&255]^Me[Z>>8&255]^Ge[255&P]^Se[ee+1],z=Be[O>>>24]^je[Z>>16&255]^Me[P>>8&255]^Ge[255&w]^Se[ee+2],Q=Be[Z>>>24]^je[P>>16&255]^Me[w>>8&255]^Ge[255&O]^Se[ee+3],P=Y,w=J,O=z,Z=Q,ee+=4;Y=Ae[P>>>24]<<24^Ae[w>>16&255]<<16^Ae[O>>8&255]<<8^Ae[255&Z]^Se[ee],J=Ae[w>>>24]<<24^Ae[O>>16&255]<<16^Ae[Z>>8&255]<<8^Ae[255&P]^Se[ee+1],z=Ae[O>>>24]<<24^Ae[Z>>16&255]<<16^Ae[P>>8&255]<<8^Ae[255&w]^Se[ee+2],Q=Ae[Z>>>24]<<24^Ae[P>>16&255]<<16^Ae[w>>8&255]<<8^Ae[255&O]^Se[ee+3],lt[M]=qe(Y^Kt),lt[M+1]=qe(Q^Ct),lt[M+2]=qe(z^Ot),lt[M+3]=qe(J^gt),Kt=ie,Ct=ue,Ot=he,gt=de,M+=4}return lt.buffer},H}(),I=b(1),X=b(6),q=function(){function H(G,M,ae){var Y=(ae===void 0?{}:ae).removePKCS7Padding,J=Y===void 0||Y;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=G,this.config=M,this.removePKCS7Padding=J,J)try{var z=self.crypto;z&&(this.subtle=z.subtle||z.webkitSubtle)}catch{}this.subtle===null&&(this.config.enableSoftwareAES=!0)}var V=H.prototype;return V.destroy=function(){this.observer=null},V.isSync=function(){return this.config.enableSoftwareAES},V.flush=function(){var G=this.currentResult;if(G){var M,ae,Y,J=new Uint8Array(G);return this.reset(),this.removePKCS7Padding?(ae=(M=J).byteLength,(Y=ae&&new DataView(M.buffer).getUint8(ae-1))?Object(c.a)(M,0,ae-Y):M):J}this.reset()},V.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},V.decrypt=function(G,M,ae,Y){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(G),M,ae);var J=this.flush();J&&Y(J.buffer)}else this.webCryptoDecrypt(new Uint8Array(G),M,ae).then(Y)},V.softwareDecrypt=function(G,M,ae){var Y=this.currentIV,J=this.currentResult,z=this.remainderData;this.logOnce("JS AES decrypt"),z&&(G=Object(X.a)(z,G),this.remainderData=null);var Q=this.getValidChunk(G);if(!Q.length)return null;Y&&(ae=Y);var P=this.softwareDecrypter;P||(P=this.softwareDecrypter=new B),P.expandKey(M);var w=J;return this.currentResult=P.decrypt(Q.buffer,0,ae),this.currentIV=Object(c.a)(Q,-16).buffer,w||null},V.webCryptoDecrypt=function(G,M,ae){var Y=this,J=this.subtle;return this.key===M&&this.fastAesKey||(this.key=M,this.fastAesKey=new T(J,M)),this.fastAesKey.expandKey().then(function(z){return J?new _(J,ae).decrypt(G.buffer,z):Promise.reject(new Error("web crypto not initialized"))}).catch(function(z){return Y.onWebCryptoError(z,G,M,ae)})},V.onWebCryptoError=function(G,M,ae,Y){return I.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",G),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(M,ae,Y)},V.getValidChunk=function(G){var M=G,ae=G.length-G.length%16;return ae!==G.length&&(M=Object(c.a)(G,0,ae),this.remainderData=Object(c.a)(G,ae)),M},V.logOnce=function(G){this.logEnabled&&(I.b.log("[decrypter.ts]: "+G),this.logEnabled=!1)},H}()},function(E,A,b){b.d(A,"a",function(){return c});var _=b(11);function T(B,I){for(var X=0;X<I.length;X++){var q=I[X];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(B,q.key,q)}}var c=function(){function B(q,H){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=H?Object(_.buildAbsoluteURL)(q,H,{alwaysNormalize:!0}):q}var I,X;return B.fromURL=function(q,H){return new B(q,H)},B.fromURI=function(q){return new B(q)},I=B,(X=[{key:"uri",get:function(){return this._uri}}])&&T(I.prototype,X),B}()},function(E,A,b){b.d(A,"a",function(){return _});var _=function(){function T(){this.chunks=[],this.dataLength=0}var c=T.prototype;return c.push=function(B){this.chunks.push(B),this.dataLength+=B.length},c.flush=function(){var B,I=this.chunks,X=this.dataLength;return I.length?(B=I.length===1?I[0]:function(q,H){for(var V=new Uint8Array(H),G=0,M=0;M<q.length;M++){var ae=q[M];V.set(ae,G),G+=ae.length}return V}(I,X),this.reset(),B):new Uint8Array(0)},c.reset=function(){this.chunks.length=0,this.dataLength=0},T}()},function(E,A,b){function _(I){var X={};function q(V){if(X[V])return X[V].exports;var G=X[V]={i:V,l:!1,exports:{}};return I[V].call(G.exports,G,G.exports,q),G.l=!0,G.exports}q.m=I,q.c=X,q.i=function(V){return V},q.d=function(V,G,M){q.o(V,G)||Object.defineProperty(V,G,{configurable:!1,enumerable:!0,get:M})},q.r=function(V){Object.defineProperty(V,"__esModule",{value:!0})},q.n=function(V){var G=V&&V.__esModule?function(){return V.default}:function(){return V};return q.d(G,"a",G),G},q.o=function(V,G){return Object.prototype.hasOwnProperty.call(V,G)},q.p="/",q.oe=function(V){throw console.error(V),V};var H=q(q.s=ENTRY_MODULE);return H.default||H}function T(I){return(I+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function c(I,X,q){var H={};H[q]=[];var V=X.toString(),G=V.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!G)return H;for(var M,ae=G[1],Y=new RegExp("(\\\\n|\\W)"+T(ae)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");M=Y.exec(V);)M[3]!=="dll-reference"&&H[q].push(M[3]);for(Y=new RegExp("\\("+T(ae)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");M=Y.exec(V);)I[M[2]]||(H[q].push(M[1]),I[M[2]]=b(M[1]).m),H[M[2]]=H[M[2]]||[],H[M[2]].push(M[4]);for(var J,z=Object.keys(H),Q=0;Q<z.length;Q++)for(var P=0;P<H[z[Q]].length;P++)J=H[z[Q]][P],isNaN(1*J)||(H[z[Q]][P]=1*H[z[Q]][P]);return H}function B(I){return Object.keys(I).reduce(function(X,q){return X||I[q].length>0},!1)}E.exports=function(I,X){X=X||{};var q={main:b.m},H=X.all?{main:Object.keys(q.main)}:function(Y,J){for(var z={main:[J]},Q={main:[]},P={main:{}};B(z);)for(var w=Object.keys(z),O=0;O<w.length;O++){var Z=w[O],ie=z[Z].pop();if(P[Z]=P[Z]||{},!P[Z][ie]&&Y[Z][ie]){P[Z][ie]=!0,Q[Z]=Q[Z]||[],Q[Z].push(ie);for(var ue=c(Y,Y[Z][ie],Z),he=Object.keys(ue),de=0;de<he.length;de++)z[he[de]]=z[he[de]]||[],z[he[de]]=z[he[de]].concat(ue[he[de]])}}return Q}(q,I),V="";Object.keys(H).filter(function(Y){return Y!=="main"}).forEach(function(Y){for(var J=0;H[Y][J];)J++;H[Y].push(J),q[Y][J]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",V=V+"var "+Y+" = ("+_.toString().replace("ENTRY_MODULE",JSON.stringify(J))+")({"+H[Y].map(function(z){return JSON.stringify(z)+": "+q[Y][z].toString()}).join(",")+`});
`}),V=V+"new (("+_.toString().replace("ENTRY_MODULE",JSON.stringify(I))+")({"+H.main.map(function(Y){return JSON.stringify(Y)+": "+q.main[Y].toString()}).join(",")+"}))(self);";var G=new window.Blob([V],{type:"text/javascript"});if(X.bare)return G;var M=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(G),ae=new window.Worker(M);return ae.objectURL=M,ae}},function(E,A,b){b.r(A),b.d(A,"default",function(){return I});var _=b(9),T=b(0),c=b(1),B=b(13);function I(V){var G=new B.EventEmitter,M=function(ae,Y){V.postMessage({event:ae,data:Y})};G.on(T.a.FRAG_DECRYPTED,M),G.on(T.a.ERROR,M),V.addEventListener("message",function(ae){var Y=ae.data;switch(Y.cmd){case"init":var J=JSON.parse(Y.config);V.transmuxer=new _.c(G,Y.typeSupported,J,Y.vendor,Y.id),Object(c.a)(J.debug),M("init",null);break;case"configure":V.transmuxer.configure(Y.config);break;case"demux":var z=V.transmuxer.push(Y.data,Y.decryptdata,Y.chunkMeta,Y.state);Object(_.d)(z)?z.then(function(w){X(V,w)}):X(V,z);break;case"flush":var Q=Y.chunkMeta,P=V.transmuxer.flush(Q);Object(_.d)(P)?P.then(function(w){H(V,w,Q)}):H(V,P,Q)}})}function X(V,G){if((M=G.remuxResult).audio||M.video||M.text||M.id3||M.initSegment){var M,ae=[],Y=G.remuxResult,J=Y.audio,z=Y.video;J&&q(ae,J),z&&q(ae,z),V.postMessage({event:"transmuxComplete",data:G},ae)}}function q(V,G){G.data1&&V.push(G.data1.buffer),G.data2&&V.push(G.data2.buffer)}function H(V,G,M){G.forEach(function(ae){X(V,ae)}),V.postMessage({event:"flush",data:M})}},function(E,A,b){b.r(A),b.d(A,"default",function(){return Fr});var _=b(11),T=b(3),c=b(0),B=b(2),I=b(1),X=b(6),q=b(5);function H(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var V=function(){function p(r){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=r}var u,e;return p.prototype.reloaded=function(r){if(!r)return this.advanced=!0,void(this.updated=!0);var n=this.lastPartSn-r.lastPartSn,i=this.lastPartIndex-r.lastPartIndex;this.updated=this.endSN!==r.endSN||!!i||!!n,this.advanced=this.endSN>r.endSN||n>0||n===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(.6*r.misses):this.misses=r.misses+1,this.availabilityDelay=r.availabilityDelay},u=p,(e=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(T.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var r=this.driftEndTime-this.driftStartTime;return r>0?1e3*(this.driftEnd-this.driftStart)/r:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var r;return(r=this.partList)!==null&&r!==void 0&&r.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var r;return(r=this.fragments)!==null&&r!==void 0&&r.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var r;return(r=this.partList)!==null&&r!==void 0&&r.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var r;return(r=this.partList)!==null&&r!==void 0&&r.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&H(u.prototype,e),p}(),G=b(15),M=/^(\d+)x(\d+)$/,ae=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,Y=function(){function p(e){for(var r in typeof e=="string"&&(e=p.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}var u=p.prototype;return u.decimalInteger=function(e){var r=parseInt(this[e],10);return r>Number.MAX_SAFE_INTEGER?1/0:r},u.hexadecimalInteger=function(e){if(this[e]){var r=(this[e]||"0x").slice(2);r=(1&r.length?"0":"")+r;for(var n=new Uint8Array(r.length/2),i=0;i<r.length/2;i++)n[i]=parseInt(r.slice(2*i,2*i+2),16);return n}return null},u.hexadecimalIntegerAsNumber=function(e){var r=parseInt(this[e],16);return r>Number.MAX_SAFE_INTEGER?1/0:r},u.decimalFloatingPoint=function(e){return parseFloat(this[e])},u.optionalFloat=function(e,r){var n=this[e];return n?parseFloat(n):r},u.enumeratedString=function(e){return this[e]},u.bool=function(e){return this[e]==="YES"},u.decimalResolution=function(e){var r=M.exec(this[e]);if(r!==null)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}},p.parseAttrList=function(e){var r,n={};for(ae.lastIndex=0;(r=ae.exec(e))!==null;){var i=r[2];i.indexOf('"')===0&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[r[1]]=i}return n},p}(),J={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function z(p,u){return MediaSource.isTypeSupported((u||"video")+'/mp4;codecs="'+p+'"')}var Q=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,P=/#EXT-X-MEDIA:(.*)/g,w=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),O=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Z=/\.(mp4|m4s|m4v|m4a)$/i,ie=function(){function p(){}return p.findGroup=function(u,e){for(var r=0;r<u.length;r++){var n=u[r];if(n.id===e)return n}},p.convertAVC1ToAVCOTI=function(u){var e=u.split(".");if(e.length>2){var r=e.shift()+".";return r+=parseInt(e.shift()).toString(16),r+=("000"+parseInt(e.shift()).toString(16)).substr(-4)}return u},p.resolve=function(u,e){return _.buildAbsoluteURL(e,u,{alwaysNormalize:!0})},p.parseMasterPlaylist=function(u,e){var r,n=[],i={},a=!1;for(Q.lastIndex=0;(r=Q.exec(u))!=null;)if(r[1]){var t=new Y(r[1]),s={attrs:t,bitrate:t.decimalInteger("AVERAGE-BANDWIDTH")||t.decimalInteger("BANDWIDTH"),name:t.NAME,url:p.resolve(r[2],e)},o=t.decimalResolution("RESOLUTION");o&&(s.width=o.width,s.height=o.height),ue((t.CODECS||"").split(/[ ,]+/).filter(function(f){return f}),s),s.videoCodec&&s.videoCodec.indexOf("avc1")!==-1&&(s.videoCodec=p.convertAVC1ToAVCOTI(s.videoCodec)),n.push(s)}else if(r[3]){var d=new Y(r[3]);d["DATA-ID"]&&(a=!0,i[d["DATA-ID"]]=d)}return{levels:n,sessionData:a?i:null}},p.parseMasterPlaylistMedia=function(u,e,r,n){var i;n===void 0&&(n=[]);var a=[],t=0;for(P.lastIndex=0;(i=P.exec(u))!==null;){var s=new Y(i[1]);if(s.TYPE===r){var o={attrs:s,bitrate:0,id:t++,groupId:s["GROUP-ID"],instreamId:s["INSTREAM-ID"],name:s.NAME||s.LANGUAGE||"",type:r,default:s.bool("DEFAULT"),autoselect:s.bool("AUTOSELECT"),forced:s.bool("FORCED"),lang:s.LANGUAGE,url:s.URI?p.resolve(s.URI,e):""};if(n.length){var d=p.findGroup(n,o.groupId)||n[0];he(o,d,"audioCodec"),he(o,d,"textCodec")}a.push(o)}}return a},p.parseLevelPlaylist=function(u,e,r,n,i){var a,t,s,o=new V(e),d=o.fragments,f=null,S=0,D=0,k=0,F=0,K=null,U=new q.b(n,e),fe=-1,le=!1;for(w.lastIndex=0,o.m3u8=u;(a=w.exec(u))!==null;){le&&(le=!1,(U=new q.b(n,e)).start=k,U.sn=S,U.cc=F,U.level=r,f&&(U.initSegment=f,U.rawProgramDateTime=f.rawProgramDateTime));var se=a[1];if(se){U.duration=parseFloat(se);var oe=(" "+a[2]).slice(1);U.title=oe||null,U.tagList.push(oe?["INF",se,oe]:["INF",se])}else if(a[3])Object(T.a)(U.duration)&&(U.start=k,s&&(U.levelkey=s),U.sn=S,U.level=r,U.cc=F,U.urlId=i,d.push(U),U.relurl=(" "+a[3]).slice(1),de(U,K),K=U,k+=U.duration,S++,D=0,le=!0);else if(a[4]){var me=(" "+a[4]).slice(1);K?U.setByteRange(me,K):U.setByteRange(me)}else if(a[5])U.rawProgramDateTime=(" "+a[5]).slice(1),U.tagList.push(["PROGRAM-DATE-TIME",U.rawProgramDateTime]),fe===-1&&(fe=d.length);else{if(!(a=a[0].match(O))){I.b.warn("No matches on slow regex match for level playlist!");continue}for(t=1;t<a.length&&a[t]===void 0;t++);var Te=(" "+a[t]).slice(1),ge=(" "+a[t+1]).slice(1),Fe=a[t+2]?(" "+a[t+2]).slice(1):"";switch(Te){case"PLAYLIST-TYPE":o.type=ge.toUpperCase();break;case"MEDIA-SEQUENCE":S=o.startSN=parseInt(ge);break;case"SKIP":var We=new Y(ge),Xe=We.decimalInteger("SKIPPED-SEGMENTS");if(Object(T.a)(Xe)){o.skippedSegments=Xe;for(var Rt=Xe;Rt--;)d.unshift(null);S+=Xe}var at=We.enumeratedString("RECENTLY-REMOVED-DATERANGES");at&&(o.recentlyRemovedDateranges=at.split("	"));break;case"TARGETDURATION":o.targetduration=parseFloat(ge);break;case"VERSION":o.version=parseInt(ge);break;case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(ge||Fe)&&U.tagList.push(Fe?[ge,Fe]:[ge]);break;case"DIS":F++;case"GAP":U.tagList.push([Te]);break;case"BITRATE":U.tagList.push([Te,ge]);break;case"DISCONTINUITY-SEQ":F=parseInt(ge);break;case"KEY":var st,ct=new Y(ge),fr=ct.enumeratedString("METHOD"),Mr=ct.URI,Xn=ct.hexadecimalInteger("IV"),vn=ct.enumeratedString("KEYFORMATVERSIONS"),gn=ct.enumeratedString("KEYID"),Nr=(st=ct.enumeratedString("KEYFORMAT"))!=null?st:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(Nr)>-1){I.b.warn("Keyformat "+Nr+" is not supported from the manifest");continue}if(Nr!=="identity")continue;fr&&(s=G.a.fromURL(e,Mr),Mr&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(fr)>=0&&(s.method=fr,s.keyFormat=Nr,gn&&(s.keyID=gn),vn&&(s.keyFormatVersions=vn),s.iv=Xn));break;case"START":var mn=new Y(ge).decimalFloatingPoint("TIME-OFFSET");Object(T.a)(mn)&&(o.startTimeOffset=mn);break;case"MAP":var rn=new Y(ge);U.relurl=rn.URI,rn.BYTERANGE&&U.setByteRange(rn.BYTERANGE),U.level=r,U.sn="initSegment",s&&(U.levelkey=s),U.initSegment=null,f=U,le=!0;break;case"SERVER-CONTROL":var hr=new Y(ge);o.canBlockReload=hr.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=hr.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&hr.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=hr.optionalFloat("PART-HOLD-BACK",0),o.holdBack=hr.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var zn=new Y(ge);o.partTarget=zn.decimalFloatingPoint("PART-TARGET");break;case"PART":var cr=o.partList;cr||(cr=o.partList=[]);var $n=D>0?cr[cr.length-1]:void 0,Qn=D++,pn=new q.c(new Y(ge),U,e,Qn,$n);cr.push(pn),U.duration+=pn.duration;break;case"PRELOAD-HINT":var Jn=new Y(ge);o.preloadHint=Jn;break;case"RENDITION-REPORT":var Zn=new Y(ge);o.renditionReports=o.renditionReports||[],o.renditionReports.push(Zn);break;default:I.b.warn("line parsed but not handled: "+a)}}}K&&!K.relurl?(d.pop(),k-=K.duration,o.partList&&(o.fragmentHint=K)):o.partList&&(de(U,K),U.cc=F,o.fragmentHint=U);var nn=d.length,Br=d[0],an=d[nn-1];if((k+=o.skippedSegments*o.targetduration)>0&&nn&&an){o.averagetargetduration=k/nn;var yn=an.sn;o.endSN=yn!=="initSegment"?yn:0,Br&&(o.startCC=Br.cc,Br.initSegment||o.fragments.every(function(vr){return vr.relurl&&(gr=vr.relurl,Z.test((mr=(Xt=_.parseURL(gr))===null||Xt===void 0?void 0:Xt.path)!=null?mr:""));var gr,mr,Xt})&&(I.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(U=new q.b(n,e)).relurl=an.relurl,U.level=r,U.sn="initSegment",Br.initSegment=U,o.needSidxRanges=!0))}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(k+=o.fragmentHint.duration),o.totalduration=k,o.endCC=F,fe>0&&function(vr,gr){for(var mr=vr[gr],Xt=gr;Xt--;){var Ur=vr[Xt];if(!Ur)return;Ur.programDateTime=mr.programDateTime-1e3*Ur.duration,mr=Ur}}(d,fe),o},p}();function ue(p,u){["video","audio","text"].forEach(function(e){var r=p.filter(function(i){return function(a,t){var s=J[t];return!!s&&s[a.slice(0,4)]===!0}(i,e)});if(r.length){var n=r.filter(function(i){return i.lastIndexOf("avc1",0)===0||i.lastIndexOf("mp4a",0)===0});u[e+"Codec"]=n.length>0?n[0]:r[0],p=p.filter(function(i){return r.indexOf(i)===-1})}}),u.unknownCodecs=p}function he(p,u,e){var r=u[e];r&&(p[e]=r)}function de(p,u){p.rawProgramDateTime?p.programDateTime=Date.parse(p.rawProgramDateTime):u!=null&&u.programDateTime&&(p.programDateTime=u.endProgramDateTime),Object(T.a)(p.programDateTime)||(p.programDateTime=null,p.rawProgramDateTime=null)}var ee=b(4);function Ee(p,u){var e=p.url;return e!==void 0&&e.indexOf("data:")!==0||(e=u.url),e}var Le=function(){function p(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var u=p.prototype;return u.registerListeners=function(){var e=this.hls;e.on(c.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(c.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(c.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(c.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},u.unregisterListeners=function(){var e=this.hls;e.off(c.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(c.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(c.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(c.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},u.createInternalLoader=function(e){var r=this.hls.config,n=r.pLoader,i=r.loader,a=new(n||i)(r);return e.loader=a,this.loaders[e.type]=a,a},u.getInternalLoader=function(e){return this.loaders[e.type]},u.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},u.destroyInternalLoaders=function(){for(var e in this.loaders){var r=this.loaders[e];r&&r.destroy(),this.resetInternalLoader(e)}},u.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},u.onManifestLoading=function(e,r){var n=r.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:ee.a.MANIFEST,url:n,deliveryDirectives:null})},u.onLevelLoading=function(e,r){var n=r.id,i=r.level,a=r.url,t=r.deliveryDirectives;this.load({id:n,groupId:null,level:i,responseType:"text",type:ee.a.LEVEL,url:a,deliveryDirectives:t})},u.onAudioTrackLoading=function(e,r){var n=r.id,i=r.groupId,a=r.url,t=r.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:ee.a.AUDIO_TRACK,url:a,deliveryDirectives:t})},u.onSubtitleTrackLoading=function(e,r){var n=r.id,i=r.groupId,a=r.url,t=r.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:ee.a.SUBTITLE_TRACK,url:a,deliveryDirectives:t})},u.load=function(e){var r,n,i,a,t,s,o=this.hls.config,d=this.getInternalLoader(e);if(d){var f=d.context;if(f&&f.url===e.url)return void I.b.trace("[playlist-loader]: playlist request ongoing");I.b.log("[playlist-loader]: aborting previous loader for type: "+e.type),d.abort()}switch(e.type){case ee.a.MANIFEST:n=o.manifestLoadingMaxRetry,i=o.manifestLoadingTimeOut,a=o.manifestLoadingRetryDelay,t=o.manifestLoadingMaxRetryTimeout;break;case ee.a.LEVEL:case ee.a.AUDIO_TRACK:case ee.a.SUBTITLE_TRACK:n=0,i=o.levelLoadingTimeOut;break;default:n=o.levelLoadingMaxRetry,i=o.levelLoadingTimeOut,a=o.levelLoadingRetryDelay,t=o.levelLoadingMaxRetryTimeout}if(d=this.createInternalLoader(e),(r=e.deliveryDirectives)!==null&&r!==void 0&&r.part&&(e.type===ee.a.LEVEL&&e.level!==null?s=this.hls.levels[e.level].details:e.type===ee.a.AUDIO_TRACK&&e.id!==null?s=this.hls.audioTracks[e.id].details:e.type===ee.a.SUBTITLE_TRACK&&e.id!==null&&(s=this.hls.subtitleTracks[e.id].details),s)){var S=s.partTarget,D=s.targetduration;S&&D&&(i=Math.min(1e3*Math.max(3*S,.8*D),i))}var k={timeout:i,maxRetry:n,retryDelay:a,maxRetryDelay:t,highWaterMark:0},F={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};d.load(e,k,F)},u.loadsuccess=function(e,r,n,i){if(i===void 0&&(i=null),n.isSidxRequest)return this.handleSidxRequest(e,n),void this.handlePlaylistLoaded(e,r,n,i);this.resetInternalLoader(n.type);var a=e.data;a.indexOf("#EXTM3U")===0?(r.parsing.start=performance.now(),a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,r,n,i):this.handleMasterPlaylist(e,r,n,i)):this.handleManifestParsingError(e,n,"no EXTM3U delimiter",i)},u.loaderror=function(e,r,n){n===void 0&&(n=null),this.handleNetworkError(r,n,!1,e)},u.loadtimeout=function(e,r,n){n===void 0&&(n=null),this.handleNetworkError(r,n,!0)},u.handleMasterPlaylist=function(e,r,n,i){var a=this.hls,t=e.data,s=Ee(e,n),o=ie.parseMasterPlaylist(t,s),d=o.levels,f=o.sessionData;if(d.length){var S=d.map(function(U){return{id:U.attrs.AUDIO,audioCodec:U.audioCodec}}),D=d.map(function(U){return{id:U.attrs.SUBTITLES,textCodec:U.textCodec}}),k=ie.parseMasterPlaylistMedia(t,s,"AUDIO",S),F=ie.parseMasterPlaylistMedia(t,s,"SUBTITLES",D),K=ie.parseMasterPlaylistMedia(t,s,"CLOSED-CAPTIONS");k.length&&(k.some(function(U){return!U.url})||!d[0].audioCodec||d[0].attrs.AUDIO||(I.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),k.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Y({}),bitrate:0,url:""}))),a.trigger(c.a.MANIFEST_LOADED,{levels:d,audioTracks:k,subtitles:F,captions:K,url:s,stats:r,networkDetails:i,sessionData:f})}else this.handleManifestParsingError(e,n,"no level found in manifest",i)},u.handleTrackOrLevelPlaylist=function(e,r,n,i){var a=this.hls,t=n.id,s=n.level,o=n.type,d=Ee(e,n),f=Object(T.a)(t)?t:0,S=Object(T.a)(s)?s:f,D=function(fe){switch(fe.type){case ee.a.AUDIO_TRACK:return ee.b.AUDIO;case ee.a.SUBTITLE_TRACK:return ee.b.SUBTITLE;default:return ee.b.MAIN}}(n),k=ie.parseLevelPlaylist(e.data,d,S,D,f);if(k.fragments.length){if(o===ee.a.MANIFEST){var F={attrs:new Y({}),bitrate:0,details:k,name:"",url:d};a.trigger(c.a.MANIFEST_LOADED,{levels:[F],audioTracks:[],url:d,stats:r,networkDetails:i,sessionData:null})}if(r.parsing.end=performance.now(),k.needSidxRanges){var K,U=(K=k.fragments[0].initSegment)===null||K===void 0?void 0:K.url;this.load({url:U,isSidxRequest:!0,type:o,level:s,levelDetails:k,id:t,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else n.levelDetails=k,this.handlePlaylistLoaded(e,r,n,i)}else a.trigger(c.a.ERROR,{type:B.b.NETWORK_ERROR,details:B.a.LEVEL_EMPTY_ERROR,fatal:!1,url:d,reason:"no fragments found in level",level:typeof n.level=="number"?n.level:void 0})},u.handleSidxRequest=function(e,r){var n=Object(X.g)(new Uint8Array(e.data));if(n){var i=n.references,a=r.levelDetails;i.forEach(function(t,s){var o=t.info,d=a.fragments[s];d.byteRange.length===0&&d.setByteRange(String(1+o.end-o.start)+"@"+String(o.start)),d.initSegment&&d.initSegment.setByteRange(String(n.moovEndOffset)+"@0")})}},u.handleManifestParsingError=function(e,r,n,i){this.hls.trigger(c.a.ERROR,{type:B.b.NETWORK_ERROR,details:B.a.MANIFEST_PARSING_ERROR,fatal:r.type===ee.a.MANIFEST,url:e.url,reason:n,response:e,context:r,networkDetails:i})},u.handleNetworkError=function(e,r,n,i){n===void 0&&(n=!1),I.b.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var a=B.a.UNKNOWN,t=!1,s=this.getInternalLoader(e);switch(e.type){case ee.a.MANIFEST:a=n?B.a.MANIFEST_LOAD_TIMEOUT:B.a.MANIFEST_LOAD_ERROR,t=!0;break;case ee.a.LEVEL:a=n?B.a.LEVEL_LOAD_TIMEOUT:B.a.LEVEL_LOAD_ERROR,t=!1;break;case ee.a.AUDIO_TRACK:a=n?B.a.AUDIO_TRACK_LOAD_TIMEOUT:B.a.AUDIO_TRACK_LOAD_ERROR,t=!1;break;case ee.a.SUBTITLE_TRACK:a=n?B.a.SUBTITLE_TRACK_LOAD_TIMEOUT:B.a.SUBTITLE_LOAD_ERROR,t=!1}s&&this.resetInternalLoader(e.type);var o={type:B.b.NETWORK_ERROR,details:a,fatal:t,url:e.url,loader:s,context:e,networkDetails:r};i&&(o.response=i),this.hls.trigger(c.a.ERROR,o)},u.handlePlaylistLoaded=function(e,r,n,i){var a=n.type,t=n.level,s=n.id,o=n.groupId,d=n.loader,f=n.levelDetails,S=n.deliveryDirectives;if(f!=null&&f.targetduration){if(d)switch(f.live&&(d.getCacheAge&&(f.ageHeader=d.getCacheAge()||0),d.getCacheAge&&!isNaN(f.ageHeader)||(f.ageHeader=0)),a){case ee.a.MANIFEST:case ee.a.LEVEL:this.hls.trigger(c.a.LEVEL_LOADED,{details:f,level:t||0,id:s||0,stats:r,networkDetails:i,deliveryDirectives:S});break;case ee.a.AUDIO_TRACK:this.hls.trigger(c.a.AUDIO_TRACK_LOADED,{details:f,id:s||0,groupId:o||"",stats:r,networkDetails:i,deliveryDirectives:S});break;case ee.a.SUBTITLE_TRACK:this.hls.trigger(c.a.SUBTITLE_TRACK_LOADED,{details:f,id:s||0,groupId:o||"",stats:r,networkDetails:i,deliveryDirectives:S})}}else this.handleManifestParsingError(e,n,"invalid target duration",i)},p}(),Se=function(){function p(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this._registerListeners()}var u=p.prototype;return u._registerListeners=function(){this.hls.on(c.a.KEY_LOADING,this.onKeyLoading,this)},u._unregisterListeners=function(){this.hls.off(c.a.KEY_LOADING,this.onKeyLoading)},u.destroy=function(){for(var e in this._unregisterListeners(),this.loaders){var r=this.loaders[e];r&&r.destroy()}this.loaders={}},u.onKeyLoading=function(e,r){var n=r.frag,i=n.type,a=this.loaders[i];if(n.decryptdata){var t=n.decryptdata.uri;if(t!==this.decrypturl||this.decryptkey===null){var s=this.hls.config;if(a&&(I.b.warn("abort previous key loader for type:"+i),a.abort()),!t)return void I.b.warn("key uri is falsy");var o=s.loader,d=n.loader=this.loaders[i]=new o(s);this.decrypturl=t,this.decryptkey=null;var f={url:t,frag:n,responseType:"arraybuffer"},S={timeout:s.fragLoadingTimeOut,maxRetry:0,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout,highWaterMark:0},D={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};d.load(f,S,D)}else this.decryptkey&&(n.decryptdata.key=this.decryptkey,this.hls.trigger(c.a.KEY_LOADED,{frag:n}))}else I.b.warn("Missing decryption data on fragment in onKeyLoading")},u.loadsuccess=function(e,r,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(c.a.KEY_LOADED,{frag:i})):I.b.error("after key load, decryptdata unset")},u.loaderror=function(e,r){var n=r.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(c.a.ERROR,{type:B.b.NETWORK_ERROR,details:B.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},u.loadtimeout=function(e,r){var n=r.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(c.a.ERROR,{type:B.b.NETWORK_ERROR,details:B.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},p}();function Ae(p,u){var e;try{e=new Event("addtrack")}catch{(e=document.createEvent("Event")).initEvent("addtrack",!1,!1)}e.track=p,u.dispatchEvent(e)}function xe(p,u,e){var r=p.mode;if(r==="disabled"&&(p.mode="hidden"),p.cues&&p.cues.length>0)for(var n=function(a,t,s){var o=[],d=function(k,F){if(F<k[0].startTime)return 0;var K=k.length-1;if(F>k[K].endTime)return-1;for(var U=0,fe=K;U<=fe;){var le=Math.floor((fe+U)/2);if(F<k[le].startTime)fe=le-1;else{if(!(F>k[le].startTime&&U<K))return le;U=le+1}}return k[U].startTime-F<F-k[fe].startTime?U:fe}(a,t);if(d>-1)for(var f=d,S=a.length;f<S;f++){var D=a[f];if(D.startTime>=t&&D.endTime<=s)o.push(D);else if(D.startTime>s)return o}return o}(p.cues,u,e),i=0;i<n.length;i++)p.removeCue(n[i]);r==="disabled"&&(p.mode=r)}var Be=b(7),je=function(){function p(e){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=e,this._registerListeners()}var u=p.prototype;return u.destroy=function(){this._unregisterListeners()},u._registerListeners=function(){var e=this.hls;e.on(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(c.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(c.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},u._unregisterListeners=function(){var e=this.hls;e.off(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(c.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(c.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},u.onMediaAttached=function(e,r){this.media=r.media},u.onMediaDetaching=function(){this.id3Track&&(function(e){var r=e.mode;if(r==="disabled"&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);r==="disabled"&&(e.mode=r)}(this.id3Track),this.id3Track=null,this.media=null)},u.getID3Track=function(e){if(this.media){for(var r=0;r<e.length;r++){var n=e[r];if(n.kind==="metadata"&&n.label==="id3")return Ae(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},u.onFragParsingMetadata=function(e,r){if(this.media){var n=r.frag,i=r.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var a=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,t=0;t<i.length;t++){var s=Be.c(i[t].data);if(s){var o=i[t].pts,d=t<i.length-1?i[t+1].pts:n.end;d-o<=0&&(d=o+.25);for(var f=0;f<s.length;f++){var S=s[f];if(!Be.e(S)){var D=new a(o,d,"");D.value=S,this.id3Track.addCue(D)}}}}}},u.onBufferFlushing=function(e,r){var n=r.startOffset,i=r.endOffset,a=r.type;if(!a||a==="audio"){var t=this.id3Track;t&&xe(t,n,i)}},p}();function Me(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var Ge,He=function(){function p(n){var i=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return i.timeupdate()},this.hls=n,this.config=n.config,this.registerListeners()}var u,e,r=p.prototype;return r.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},r.registerListeners=function(){this.hls.on(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(c.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(c.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(c.a.ERROR,this.onError,this)},r.unregisterListeners=function(){this.hls.off(c.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(c.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(c.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(c.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(c.a.ERROR,this.onError)},r.onMediaAttached=function(n,i){this.media=i.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},r.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},r.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},r.onLevelUpdated=function(n,i){var a=i.details;this.levelDetails=a,a.advanced&&this.timeupdate(),!a.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},r.onError=function(n,i){i.details===B.a.BUFFER_STALLED_ERROR&&(this.stallCount++,I.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},r.timeupdate=function(){var n=this.media,i=this.levelDetails;if(n&&i){this.currentTime=n.currentTime;var a=this.computeLatency();if(a!==null){this._latency=a;var t=this.config,s=t.lowLatencyMode,o=t.maxLiveSyncPlaybackRate;if(s&&o!==1){var d=this.targetLatency;if(d!==null){var f=a-d,S=f<Math.min(this.maxLatency,d+i.targetduration);if(i.live&&S&&f>.05&&this.forwardBufferLength>1){var D=Math.min(2,Math.max(1,o)),k=Math.round(2/(1+Math.exp(-.75*f-this.edgeStalled))*20)/20;n.playbackRate=Math.min(D,Math.max(1,k))}else n.playbackRate!==1&&n.playbackRate!==0&&(n.playbackRate=1)}}}}},r.estimateLiveEdge=function(){var n=this.levelDetails;return n===null?null:n.edge+n.age},r.computeLatency=function(){var n=this.estimateLiveEdge();return n===null?null:n-this.currentTime},u=p,(e=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var n=this.config,i=this.levelDetails;return n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:i?n.liveMaxLatencyDurationCount*i.targetduration:0}},{key:"targetLatency",get:function(){var n=this.levelDetails;if(n===null)return null;var i=n.holdBack,a=n.partHoldBack,t=n.targetduration,s=this.config,o=s.liveSyncDuration,d=s.liveSyncDurationCount,f=s.lowLatencyMode,S=this.hls.userConfig,D=f&&a||i;(S.liveSyncDuration||S.liveSyncDurationCount||D===0)&&(D=o!==void 0?o:d*t);var k=t;return D+Math.min(1*this.stallCount,k)}},{key:"liveSyncPosition",get:function(){var n=this.estimateLiveEdge(),i=this.targetLatency,a=this.levelDetails;if(n===null||i===null||a===null)return null;var t=a.edge,s=n-i-this.edgeStalled,o=t-a.totalduration,d=t-(this.config.lowLatencyMode&&a.partTarget||a.targetduration);return Math.min(Math.max(o,s),d)}},{key:"drift",get:function(){var n=this.levelDetails;return n===null?1:n.drift}},{key:"edgeStalled",get:function(){var n=this.levelDetails;if(n===null)return 0;var i=3*(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.max(n.age-i,0)}},{key:"forwardBufferLength",get:function(){var n=this.media,i=this.levelDetails;if(!n||!i)return 0;var a=n.buffered.length;return a?n.buffered.end(a-1):i.edge-this.currentTime}}])&&Me(u.prototype,e),p}();function Kt(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}(function(p){p.No="",p.Yes="YES",p.v2="v2"})(Ge||(Ge={}));var Ct=function(){function p(u,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=u,this.part=e,this.skip=r}return p.prototype.addDirectives=function(u){var e=new self.URL(u);return this.msn!==void 0&&e.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},p}(),Ot=function(){function p(r){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[r.url],this.attrs=r.attrs,this.bitrate=r.bitrate,r.details&&(this.details=r.details),this.id=r.id||0,this.name=r.name,this.width=r.width||0,this.height=r.height||0,this.audioCodec=r.audioCodec,this.videoCodec=r.videoCodec,this.unknownCodecs=r.unknownCodecs,this.codecSet=[r.videoCodec,r.audioCodec].filter(function(n){return n}).join(",").replace(/\.[^.,]+/g,"")}var u,e;return u=p,(e=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(r){var n=r%this.url.length;this._urlId!==n&&(this.details=void 0,this._urlId=n)}}])&&Kt(u.prototype,e),p}();function gt(p,u,e){switch(u){case"audio":p.audioGroupIds||(p.audioGroupIds=[]),p.audioGroupIds.push(e);break;case"text":p.textGroupIds||(p.textGroupIds=[]),p.textGroupIds.push(e)}}function ot(p){var u={};p.forEach(function(e){var r=e.groupId||"";e.id=u[r]=u[r]||0,u[r]++})}function lt(p,u){var e=u.startPTS;if(Object(T.a)(e)){var r,n=0;u.sn>p.sn?(n=e-p.start,r=p):(n=p.start-e,r=u),r.duration!==n&&(r.duration=n)}else u.sn>p.sn?p.cc===u.cc&&p.minEndPTS?u.start=p.start+(p.minEndPTS-p.start):u.start=p.start+p.duration:u.start=Math.max(p.start-u.duration,0)}function qe(p,u,e,r,n,i){r-e<=0&&(I.b.warn("Fragment should have a positive duration",u),r=e+u.duration,i=n+u.duration);var a=e,t=r,s=u.startPTS,o=u.endPTS;if(Object(T.a)(s)){var d=Math.abs(s-e);Object(T.a)(u.deltaPTS)?u.deltaPTS=Math.max(d,u.deltaPTS):u.deltaPTS=d,a=Math.max(e,s),e=Math.min(e,s),n=Math.min(n,u.startDTS),t=Math.min(r,o),r=Math.max(r,o),i=Math.max(i,u.endDTS)}u.duration=r-e;var f=e-u.start;u.appendedPTS=r,u.start=u.startPTS=e,u.maxStartPTS=a,u.startDTS=n,u.endPTS=r,u.minEndPTS=t,u.endDTS=i;var S,D=u.sn;if(!p||D<p.startSN||D>p.endSN)return 0;var k=D-p.startSN,F=p.fragments;for(F[k]=u,S=k;S>0;S--)lt(F[S],F[S-1]);for(S=k;S<F.length-1;S++)lt(F[S],F[S+1]);return p.fragmentHint&&lt(F[F.length-1],p.fragmentHint),p.PTSKnown=p.alignedSliding=!0,f}function er(p,u){for(var e=null,r=p.fragments,n=r.length-1;n>=0;n--){var i=r[n].initSegment;if(i){e=i;break}}p.fragmentHint&&delete p.fragmentHint.endPTS;var a,t=0;if(function(D,k,F){for(var K=k.skippedSegments,U=Math.max(D.startSN,k.startSN)-k.startSN,fe=(D.fragmentHint?1:0)+(K?k.endSN:Math.min(D.endSN,k.endSN))-k.startSN,le=k.startSN-D.startSN,se=k.fragmentHint?k.fragments.concat(k.fragmentHint):k.fragments,oe=D.fragmentHint?D.fragments.concat(D.fragmentHint):D.fragments,me=U;me<=fe;me++){var Te=oe[le+me],ge=se[me];K&&!ge&&me<K&&(ge=k.fragments[me]=Te),Te&&ge&&F(Te,ge)}}(p,u,function(D,k){D.relurl&&(t=D.cc-k.cc),Object(T.a)(D.startPTS)&&Object(T.a)(D.endPTS)&&(k.start=k.startPTS=D.startPTS,k.startDTS=D.startDTS,k.appendedPTS=D.appendedPTS,k.maxStartPTS=D.maxStartPTS,k.endPTS=D.endPTS,k.endDTS=D.endDTS,k.minEndPTS=D.minEndPTS,k.duration=D.endPTS-D.startPTS,k.duration&&(a=k),u.PTSKnown=u.alignedSliding=!0),k.elementaryStreams=D.elementaryStreams,k.loader=D.loader,k.stats=D.stats,k.urlId=D.urlId,D.initSegment&&(k.initSegment=D.initSegment,e=D.initSegment)}),e&&(u.fragmentHint?u.fragments.concat(u.fragmentHint):u.fragments).forEach(function(D){var k;D.initSegment&&D.initSegment.relurl!==((k=e)===null||k===void 0?void 0:k.relurl)||(D.initSegment=e)}),u.skippedSegments&&(u.deltaUpdateFailed=u.fragments.some(function(D){return!D}),u.deltaUpdateFailed)){I.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var s=u.skippedSegments;s--;)u.fragments.shift();u.startSN=u.fragments[0].sn,u.startCC=u.fragments[0].cc}var o=u.fragments;if(t){I.b.warn("discontinuity sliding from playlist, take drift into account");for(var d=0;d<o.length;d++)o[d].cc+=t}u.skippedSegments&&(u.startCC=u.fragments[0].cc),function(D,k,F){if(D&&k)for(var K=0,U=0,fe=D.length;U<=fe;U++){var le=D[U],se=k[U+K];le&&se&&le.index===se.index&&le.fragment.sn===se.fragment.sn?F(le,se):K--}}(p.partList,u.partList,function(D,k){k.elementaryStreams=D.elementaryStreams,k.stats=D.stats}),a?qe(u,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS):tr(p,u),o.length&&(u.totalduration=u.edge-o[0].start),u.driftStartTime=p.driftStartTime,u.driftStart=p.driftStart;var f=u.advancedDateTime;if(u.advanced&&f){var S=u.edge;u.driftStart||(u.driftStartTime=f,u.driftStart=S),u.driftEndTime=f,u.driftEnd=S}else u.driftEndTime=p.driftEndTime,u.driftEnd=p.driftEnd,u.advancedDateTime=p.advancedDateTime}function tr(p,u){var e=u.startSN+u.skippedSegments-p.startSN,r=p.fragments;e<0||e>=r.length||function(n,i){if(i){for(var a=n.fragments,t=n.skippedSegments;t<a.length;t++)a[t].start+=i;n.fragmentHint&&(n.fragmentHint.start+=i)}}(u,r[e].start)}var Ar=function(){function p(e,r){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=I.b.log.bind(I.b,r+":"),this.warn=I.b.warn.bind(I.b,r+":"),this.hls=e}var u=p.prototype;return u.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},u.onError=function(e,r){r.fatal&&r.type===B.b.NETWORK_ERROR&&this.clearTimer()},u.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},u.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},u.stopLoad=function(){this.canLoad=!1,this.clearTimer()},u.switchParams=function(e,r){var n=r?.renditionReports;if(n)for(var i=0;i<n.length;i++){var a=n[i],t=""+a.URI;if(t===e.substr(-t.length)){var s=parseInt(a["LAST-MSN"]),o=parseInt(a["LAST-PART"]);if(r&&this.hls.config.lowLatencyMode){var d=Math.min(r.age-r.partTarget,r.targetduration);o!==void 0&&d>r.partTarget&&(o+=1)}if(Object(T.a)(s))return new Ct(s,Object(T.a)(o)?o:void 0,Ge.No)}}},u.loadPlaylist=function(e){},u.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},u.playlistLoaded=function(e,r,n){var i=this,a=r.details,t=r.stats,s=t.loading.end?Math.max(0,self.performance.now()-t.loading.end):0;if(a.advancedDateTime=Date.now()-s,a.live||n!=null&&n.live){if(a.reloaded(n),n&&this.log("live playlist "+e+" "+(a.advanced?"REFRESHED "+a.lastPartSn+"-"+a.lastPartIndex:"MISSED")),n&&a.fragments.length>0&&er(n,a),!this.canLoad||!a.live)return;var o,d=void 0,f=void 0;if(a.canBlockReload&&a.endSN&&a.advanced){var S=this.hls.config.lowLatencyMode,D=a.lastPartSn,k=a.endSN,F=a.lastPartIndex,K=D===k;F!==-1?(d=K?k+1:D,f=K?S?0:F:F+1):d=k+1;var U=a.age,fe=U+a.ageHeader,le=Math.min(fe-a.partTarget,1.5*a.targetduration);if(le>0){if(n&&le>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+le+" with playlist age: "+a.age),le=0;else{var se=Math.floor(le/a.targetduration);d+=se,f!==void 0&&(f+=Math.round(le%a.targetduration/a.partTarget)),this.log("CDN Tune-in age: "+a.ageHeader+"s last advanced "+U.toFixed(2)+"s goal: "+le+" skip sn "+se+" to part "+f)}a.tuneInGoal=le}if(o=this.getDeliveryDirectives(a,r.deliveryDirectives,d,f),S||!K)return void this.loadPlaylist(o)}else o=this.getDeliveryDirectives(a,r.deliveryDirectives,d,f);var oe=function(me,Te){var ge,Fe=1e3*me.levelTargetDuration,We=Fe/2,Xe=me.age,Rt=Xe>0&&Xe<3*Fe,at=Te.loading.end-Te.loading.start,st=me.availabilityDelay;if(me.updated===!1)if(Rt){var ct=333*me.misses;ge=Math.max(Math.min(We,2*at),ct),me.availabilityDelay=(me.availabilityDelay||0)+ge}else ge=We;else Rt?(st=Math.min(st||Fe/2,Xe),me.availabilityDelay=st,ge=st+Fe-Xe):ge=Fe-at;return Math.round(ge)}(a,t);d!==void 0&&a.canBlockReload&&(oe-=a.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(oe)+" ms"),this.timer=self.setTimeout(function(){return i.loadPlaylist(o)},oe)}else this.clearTimer()},u.getDeliveryDirectives=function(e,r,n,i){var a=function(t,s){var o=t.canSkipUntil,d=t.canSkipDateRanges,f=t.endSN;return o&&(s!==void 0?s-f:0)<o?d?Ge.v2:Ge.Yes:Ge.No}(e,n);return r!=null&&r.skip&&e.deltaUpdateFailed&&(n=r.msn,i=r.part,a=Ge.No),new Ct(n,i,a)},u.retryLoadingOrFail=function(e){var r,n=this,i=this.hls.config,a=this.retryCount<i.levelLoadingMaxRetry;if(a)if(this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&(r=e.context)!==null&&r!==void 0&&r.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var t=Math.min(Math.pow(2,this.retryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return n.loadPlaylist()},t),this.warn("retry playlist loading #"+this.retryCount+" in "+t+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return a},p}();function Dr(){return(Dr=Object.assign||function(p){for(var u=1;u<arguments.length;u++){var e=arguments[u];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(p[r]=e[r])}return p}).apply(this,arguments)}function Rr(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}function rr(p,u){return(rr=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}var Ke,_r=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),mt=function(p){var u,e;function r(t){var s;return(s=p.call(this,t,"[level-controller]")||this)._levels=[],s._firstLevel=-1,s._startLevel=void 0,s.currentLevelIndex=-1,s.manualLevelIndex=-1,s.onParsedComplete=void 0,s._registerListeners(),s}e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,rr(u,e);var n,i,a=r.prototype;return a._registerListeners=function(){var t=this.hls;t.on(c.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(c.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(c.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(c.a.FRAG_LOADED,this.onFragLoaded,this),t.on(c.a.ERROR,this.onError,this)},a._unregisterListeners=function(){var t=this.hls;t.off(c.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(c.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(c.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(c.a.FRAG_LOADED,this.onFragLoaded,this),t.off(c.a.ERROR,this.onError,this)},a.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,p.prototype.destroy.call(this)},a.startLoad=function(){this._levels.forEach(function(t){t.loadError=0}),p.prototype.startLoad.call(this)},a.onManifestLoaded=function(t,s){var o,d,f=[],S=[],D=[],k={},F=!1,K=!1,U=!1;if(s.levels.forEach(function(oe){var me=oe.attrs;F=F||!(!oe.width||!oe.height),K=K||!!oe.videoCodec,U=U||!!oe.audioCodec,_r&&oe.audioCodec&&oe.audioCodec.indexOf("mp4a.40.34")!==-1&&(oe.audioCodec=void 0);var Te=oe.bitrate+"-"+oe.attrs.RESOLUTION+"-"+oe.attrs.CODECS;(d=k[Te])?d.url.push(oe.url):(d=new Ot(oe),k[Te]=d,f.push(d)),me&&(me.AUDIO&&gt(d,"audio",me.AUDIO),me.SUBTITLES&&gt(d,"text",me.SUBTITLES))}),(F||K)&&U&&(f=f.filter(function(oe){var me=oe.videoCodec,Te=oe.width,ge=oe.height;return!!me||!(!Te||!ge)})),f=f.filter(function(oe){var me=oe.audioCodec,Te=oe.videoCodec;return(!me||z(me,"audio"))&&(!Te||z(Te,"video"))}),s.audioTracks&&ot(S=s.audioTracks.filter(function(oe){return!oe.audioCodec||z(oe.audioCodec,"audio")})),s.subtitles&&ot(D=s.subtitles),f.length>0){o=f[0].bitrate,f.sort(function(oe,me){return oe.bitrate-me.bitrate}),this._levels=f;for(var fe=0;fe<f.length;fe++)if(f[fe].bitrate===o){this._firstLevel=fe,this.log("manifest loaded, "+f.length+" level(s) found, first bitrate: "+o);break}var le=U&&!K,se={levels:f,audioTracks:S,subtitleTracks:D,firstLevel:this._firstLevel,stats:s.stats,audio:U,video:K,altAudio:!le&&S.some(function(oe){return!!oe.url})};this.hls.trigger(c.a.MANIFEST_PARSED,se),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(c.a.ERROR,{type:B.b.MEDIA_ERROR,details:B.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})},a.onError=function(t,s){if(p.prototype.onError.call(this,t,s),!s.fatal){var o=s.context,d=this._levels[this.currentLevelIndex];if(o&&(o.type===ee.a.AUDIO_TRACK&&d.audioGroupIds&&o.groupId===d.audioGroupIds[d.urlId]||o.type===ee.a.SUBTITLE_TRACK&&d.textGroupIds&&o.groupId===d.textGroupIds[d.urlId]))this.redundantFailover(this.currentLevelIndex);else{var f,S=!1,D=!0;switch(s.details){case B.a.FRAG_LOAD_ERROR:case B.a.FRAG_LOAD_TIMEOUT:case B.a.KEY_LOAD_ERROR:case B.a.KEY_LOAD_TIMEOUT:if(s.frag){var k=this._levels[s.frag.level];k?(k.fragmentError++,k.fragmentError>this.hls.config.fragLoadingMaxRetry&&(f=s.frag.level)):f=s.frag.level}break;case B.a.LEVEL_LOAD_ERROR:case B.a.LEVEL_LOAD_TIMEOUT:o&&(o.deliveryDirectives&&(D=!1),f=o.level),S=!0;break;case B.a.REMUX_ALLOC_ERROR:f=s.level,S=!0}f!==void 0&&this.recoverLevel(s,f,S,D)}}},a.recoverLevel=function(t,s,o,d){var f=t.details,S=this._levels[s];if(S.loadError++,o){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(d){var D=S.url.length;if(D>1&&S.loadError<D)t.levelRetry=!0,this.redundantFailover(s);else if(this.manualLevelIndex===-1){var k=s===0?this._levels.length-1:s-1;this.currentLevelIndex!==k&&this._levels[k].loadError===0&&(this.warn(f+": switch to "+k),t.levelRetry=!0,this.hls.nextAutoLevel=k)}}},a.redundantFailover=function(t){var s=this._levels[t],o=s.url.length;if(o>1){var d=(s.urlId+1)%o;this.warn("Switching to redundant URL-id "+d),this._levels.forEach(function(f){f.urlId=d}),this.level=t}},a.onFragLoaded=function(t,s){var o=s.frag;if(o!==void 0&&o.type===ee.b.MAIN){var d=this._levels[o.level];d!==void 0&&(d.fragmentError=0,d.loadError=0)}},a.onLevelLoaded=function(t,s){var o,d,f=s.level,S=s.details,D=this._levels[f];if(!D)return this.warn("Invalid level index "+f),void((d=s.deliveryDirectives)!==null&&d!==void 0&&d.skip&&(S.deltaUpdateFailed=!0));f===this.currentLevelIndex?(D.fragmentError===0&&(D.loadError=0,this.retryCount=0),this.playlistLoaded(f,s,D.details)):(o=s.deliveryDirectives)!==null&&o!==void 0&&o.skip&&(S.deltaUpdateFailed=!0)},a.onAudioTrackSwitched=function(t,s){var o=this.hls.levels[this.currentLevelIndex];if(o&&o.audioGroupIds){for(var d=-1,f=this.hls.audioTracks[s.id].groupId,S=0;S<o.audioGroupIds.length;S++)if(o.audioGroupIds[S]===f){d=S;break}d!==o.urlId&&(o.urlId=d,this.startLoad())}},a.loadPlaylist=function(t){var s=this.currentLevelIndex,o=this._levels[s];if(this.canLoad&&o&&o.url.length>0){var d=o.urlId,f=o.url[d];if(t)try{f=t.addDirectives(f)}catch(S){this.warn("Could not construct new URL with HLS Delivery Directives: "+S)}this.log("Attempt loading level index "+s+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+d+" "+f),this.clearTimer(),this.hls.trigger(c.a.LEVEL_LOADING,{url:f,level:s,id:d,deliveryDirectives:t||null})}},a.removeLevel=function(t,s){var o=function(f,S){return S!==s},d=this._levels.filter(function(f,S){return S!==t||f.url.length>1&&s!==void 0&&(f.url=f.url.filter(o),f.audioGroupIds&&(f.audioGroupIds=f.audioGroupIds.filter(o)),f.textGroupIds&&(f.textGroupIds=f.textGroupIds.filter(o)),f.urlId=0,!0)}).map(function(f,S){var D=f.details;return D!=null&&D.fragments&&D.fragments.forEach(function(k){k.level=S}),f});this._levels=d,this.hls.trigger(c.a.LEVELS_UPDATED,{levels:d})},n=r,(i=[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var s,o=this._levels;if(o.length!==0&&(this.currentLevelIndex!==t||(s=o[t])===null||s===void 0||!s.details)){if(t<0||t>=o.length){var d=t<0;if(this.hls.trigger(c.a.ERROR,{type:B.b.OTHER_ERROR,details:B.a.LEVEL_SWITCH_ERROR,level:t,fatal:d,reason:"invalid level idx"}),d)return;t=Math.min(t,o.length-1)}this.clearTimer();var f=this.currentLevelIndex,S=o[f],D=o[t];this.log("switching to level "+t+" from "+f),this.currentLevelIndex=t;var k=Dr({},D,{level:t,maxBitrate:D.maxBitrate,uri:D.uri,urlId:D.urlId});delete k._urlId,this.hls.trigger(c.a.LEVEL_SWITCHING,k);var F=D.details;if(!F||F.live){var K=this.switchParams(D.uri,S?.details);this.loadPlaylist(K)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,this._startLevel===void 0&&(this._startLevel=t),t!==-1&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var t=this.hls.config.startLevel;return t!==void 0?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}}])&&Rr(n.prototype,i),r}(Ar);(function(p){p.NOT_LOADED="NOT_LOADED",p.BACKTRACKED="BACKTRACKED",p.APPENDING="APPENDING",p.PARTIAL="PARTIAL",p.OK="OK"})(Ke||(Ke={}));var Ze=function(){function p(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var u=p.prototype;return u._registerListeners=function(){var e=this.hls;e.on(c.a.BUFFER_APPENDED,this.onBufferAppended,this),e.on(c.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(c.a.FRAG_LOADED,this.onFragLoaded,this)},u._unregisterListeners=function(){var e=this.hls;e.off(c.a.BUFFER_APPENDED,this.onBufferAppended,this),e.off(c.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(c.a.FRAG_LOADED,this.onFragLoaded,this)},u.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},u.getAppendedFrag=function(e,r){if(r===ee.b.MAIN){var n=this.activeFragment,i=this.activeParts;if(!n)return null;if(i)for(var a=i.length;a--;){var t=i[a],s=t?t.end:n.appendedPTS;if(t.start<=e&&s!==void 0&&e<=s)return a>9&&(this.activeParts=i.slice(a-9)),t}else if(n.start<=e&&n.appendedPTS!==void 0&&e<=n.appendedPTS)return n}return this.getBufferedFrag(e,r)},u.getBufferedFrag=function(e,r){for(var n=this.fragments,i=Object.keys(n),a=i.length;a--;){var t=n[i[a]];if(t?.body.type===r&&t.buffered){var s=t.body;if(s.start<=e&&e<=s.end)return s}}return null},u.detectEvictedFragments=function(e,r,n){var i=this;Object.keys(this.fragments).forEach(function(a){var t=i.fragments[a];if(t)if(t.buffered){var s=t.range[e];s&&s.time.some(function(o){var d=!i.isTimeBuffered(o.startPTS,o.endPTS,r);return d&&i.removeFragment(t.body),d})}else t.body.type===n&&i.removeFragment(t.body)})},u.detectPartialFragments=function(e){var r=this,n=this.timeRanges,i=e.frag,a=e.part;if(n&&i.sn!=="initSegment"){var t=pt(i),s=this.fragments[t];s&&(Object.keys(n).forEach(function(o){var d=i.elementaryStreams[o];if(d){var f=n[o],S=a!==null||d.partial===!0;s.range[o]=r.getBufferedTimes(i,a,S,f)}}),s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},u.fragBuffered=function(e){var r=pt(e),n=this.fragments[r];n&&(n.backtrack=n.loaded=null,n.buffered=!0)},u.getBufferedTimes=function(e,r,n,i){for(var a={time:[],partial:n},t=r?r.start:e.start,s=r?r.end:e.end,o=e.minEndPTS||s,d=e.maxStartPTS||t,f=0;f<i.length;f++){var S=i.start(f)-this.bufferPadding,D=i.end(f)+this.bufferPadding;if(d>=S&&o<=D){a.time.push({startPTS:Math.max(t,i.start(f)),endPTS:Math.min(s,i.end(f))});break}if(t<D&&s>S)a.partial=!0,a.time.push({startPTS:Math.max(t,i.start(f)),endPTS:Math.min(s,i.end(f))});else if(s<=S)break}return a},u.getPartialFragment=function(e){var r,n,i,a=null,t=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach(function(d){var f=o[d];f&&Et(f)&&(n=f.body.start-s,i=f.body.end+s,e>=n&&e<=i&&(r=Math.min(e-n,i-e),t<=r&&(a=f.body,t=r)))}),a},u.getState=function(e){var r=pt(e),n=this.fragments[r];return n?n.buffered?Et(n)?Ke.PARTIAL:Ke.OK:n.backtrack?Ke.BACKTRACKED:Ke.APPENDING:Ke.NOT_LOADED},u.backtrack=function(e,r){var n=pt(e),i=this.fragments[n];if(!i||i.backtrack)return null;var a=i.backtrack=r||i.loaded;return i.loaded=null,a},u.getBacktrackData=function(e){var r=pt(e),n=this.fragments[r];if(n){var i,a=n.backtrack;if(a!=null&&(i=a.payload)!==null&&i!==void 0&&i.byteLength)return a;this.removeFragment(e)}return null},u.isTimeBuffered=function(e,r,n){for(var i,a,t=0;t<n.length;t++){if(i=n.start(t)-this.bufferPadding,a=n.end(t)+this.bufferPadding,e>=i&&r<=a)return!0;if(r<=i)return!1}return!1},u.onFragLoaded=function(e,r){var n=r.frag,i=r.part;if(n.sn!=="initSegment"&&!n.bitrateTest&&!i){var a=pt(n);this.fragments[a]={body:n,loaded:r,backtrack:null,buffered:!1,range:Object.create(null)}}},u.onBufferAppended=function(e,r){var n=this,i=r.frag,a=r.part,t=r.timeRanges;if(i.type===ee.b.MAIN)if(this.activeFragment=i,a){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(a)}else this.activeParts=null;this.timeRanges=t,Object.keys(t).forEach(function(o){var d=t[o];if(n.detectEvictedFragments(o,d),!a)for(var f=0;f<d.length;f++)i.appendedPTS=Math.max(d.end(f),i.appendedPTS||0)})},u.onFragBuffered=function(e,r){this.detectPartialFragments(r)},u.hasFragment=function(e){var r=pt(e);return!!this.fragments[r]},u.removeFragmentsInRange=function(e,r,n){var i=this;Object.keys(this.fragments).forEach(function(a){var t=i.fragments[a];if(t&&t.buffered){var s=t.body;s.type===n&&s.start<r&&s.end>e&&i.removeFragment(s)}})},u.removeFragment=function(e){var r=pt(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[r]},u.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},p}();function Et(p){var u,e;return p.buffered&&(((u=p.range.video)===null||u===void 0?void 0:u.partial)||((e=p.range.audio)===null||e===void 0?void 0:e.partial))}function pt(p){return p.type+"_"+p.level+"_"+p.urlId+"_"+p.sn}var $r=function(){function p(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var u=p.prototype;return u.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},u.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},u.onHandlerDestroyed=function(){},u.hasInterval=function(){return!!this._tickInterval},u.hasNextTick=function(){return!!this._tickTimer},u.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},u.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},u.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},u.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},u.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},u.doTick=function(){},p}(),Tt={length:0,start:function(){return 0},end:function(){return 0}},Ne=function(){function p(){}return p.isBuffered=function(u,e){try{if(u){for(var r=p.getBuffered(u),n=0;n<r.length;n++)if(e>=r.start(n)&&e<=r.end(n))return!0}}catch{}return!1},p.bufferInfo=function(u,e,r){try{if(u){var n,i=p.getBuffered(u),a=[];for(n=0;n<i.length;n++)a.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(a,e,r)}}catch{}return{len:0,start:e,end:e,nextStart:void 0}},p.bufferedInfo=function(u,e,r){e=Math.max(0,e),u.sort(function(F,K){var U=F.start-K.start;return U||K.end-F.end});var n=[];if(r)for(var i=0;i<u.length;i++){var a=n.length;if(a){var t=n[a-1].end;u[i].start-t<r?u[i].end>t&&(n[a-1].end=u[i].end):n.push(u[i])}else n.push(u[i])}else n=u;for(var s,o=0,d=e,f=e,S=0;S<n.length;S++){var D=n[S].start,k=n[S].end;if(e+r>=D&&e<k)d=D,o=(f=k)-e;else if(e+r<D){s=D;break}}return{len:o,start:d||0,end:f||0,nextStart:s}},p.getBuffered=function(u){try{return u.buffered}catch(e){return I.b.log("failed to get media.buffered",e),Tt}},p}(),St=function(p,u,e,r,n,i){r===void 0&&(r=0),n===void 0&&(n=-1),i===void 0&&(i=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=p,this.sn=u,this.id=e,this.size=r,this.part=n,this.partial=i};function It(p,u){if(p){var e=p.start+u;p.start=p.startPTS=e,p.endPTS=e+p.duration}}function nr(p,u){for(var e=u.fragments,r=0,n=e.length;r<n;r++)It(e[r],p);u.fragmentHint&&It(u.fragmentHint,p),u.alignedSliding=!0}function ir(p,u,e){u&&(function(r,n,i){if(function(t,s,o){return!(!s.details||!(o.endCC>o.startCC||t&&t.cc<o.startCC))}(r,i,n)){var a=function(t,s){var o=t.fragments,d=s.fragments;if(d.length&&o.length){var f=function(S,D){for(var k=null,F=0,K=S.length;F<K;F++){var U=S[F];if(U&&U.cc===D){k=U;break}}return k}(o,d[0].cc);if(f&&(!f||f.startPTS))return f;I.b.log("No frag in previous level to align on")}else I.b.log("No fragments to align")}(i.details,n);a&&Object(T.a)(a.start)&&(I.b.log("Adjusting PTS using last level due to CC increase within current level "+n.url),nr(a.start,n))}}(p,e,u),!e.alignedSliding&&u.details&&function(r,n){if(!(!n.fragments.length||!r.hasProgramDateTime||!n.hasProgramDateTime)){var i=n.fragments[0].programDateTime,a=r.fragments[0].programDateTime,t=(a-i)/1e3+n.fragments[0].start;t&&Object(T.a)(t)&&(I.b.log("Adjusting PTS using programDateTime delta "+(a-i)+"ms, sliding:"+t.toFixed(3)+" "+r.url+" "),nr(t,r))}}(e,u.details),e.alignedSliding||!u.details||e.skippedSegments||tr(u.details,e))}var et={search:function(p,u){for(var e=0,r=p.length-1,n=null,i=null;e<=r;){var a=u(i=p[n=(e+r)/2|0]);if(a>0)e=n+1;else{if(!(a<0))return i;r=n-1}}return null}};function ar(p,u,e){p===void 0&&(p=0),u===void 0&&(u=0);var r=Math.min(u,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-r<=p?1:e.start-r>p&&e.start?-1:0}function Qr(p,u,e){var r=1e3*Math.min(u,e.duration+(e.deltaPTS?e.deltaPTS:0));return(e.endProgramDateTime||0)-r>p}function Vt(p){var u=typeof Map=="function"?new Map:void 0;return(Vt=function(e){if(e===null||(r=e,Function.toString.call(r).indexOf("[native code]")===-1))return e;var r;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(e))return u.get(e);u.set(e,n)}function n(){return xr(e,arguments,ut(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Pt(n,e)})(p)}function xr(p,u,e){return(xr=Jr()?Reflect.construct:function(r,n,i){var a=[null];a.push.apply(a,n);var t=new(Function.bind.apply(r,a));return i&&Pt(t,i.prototype),t}).apply(null,arguments)}function Jr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pt(p,u){return(Pt=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}function ut(p){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(p)}var sr=Math.pow(2,17),Zr=function(){function p(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var u=p.prototype;return u.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},u.abort=function(){this.loader&&this.loader.abort()},u.load=function(e,r){var n=this,i=e.url;if(!i)return Promise.reject(new dt({type:B.b.NETWORK_ERROR,details:B.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(i?"part list":"url")));this.abort();var a=this.config,t=a.fLoader,s=a.loader;return new Promise(function(o,d){n.loader&&n.loader.destroy();var f=n.loader=e.loader=t?new t(a):new s(a),S=Ft(e),D={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:sr};e.stats=f.stats,f.load(S,D,{onSuccess:function(k,F,K,U){n.resetLoader(e,f),o({frag:e,part:null,payload:k.data,networkDetails:U})},onError:function(k,F,K){n.resetLoader(e,f),d(new dt({type:B.b.NETWORK_ERROR,details:B.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:k,networkDetails:K}))},onAbort:function(k,F,K){n.resetLoader(e,f),d(new dt({type:B.b.NETWORK_ERROR,details:B.a.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:K}))},onTimeout:function(k,F,K){n.resetLoader(e,f),d(new dt({type:B.b.NETWORK_ERROR,details:B.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:K}))},onProgress:function(k,F,K,U){r&&r({frag:e,part:null,payload:K,networkDetails:U})}})})},u.loadPart=function(e,r,n){var i=this;this.abort();var a=this.config,t=a.fLoader,s=a.loader;return new Promise(function(o,d){i.loader&&i.loader.destroy();var f=i.loader=e.loader=t?new t(a):new s(a),S=Ft(e,r),D={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:sr};r.stats=f.stats,f.load(S,D,{onSuccess:function(k,F,K,U){i.resetLoader(e,f),i.updateStatsFromPart(e,r);var fe={frag:e,part:r,payload:k.data,networkDetails:U};n(fe),o(fe)},onError:function(k,F,K){i.resetLoader(e,f),d(new dt({type:B.b.NETWORK_ERROR,details:B.a.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:r,response:k,networkDetails:K}))},onAbort:function(k,F,K){e.stats.aborted=r.stats.aborted,i.resetLoader(e,f),d(new dt({type:B.b.NETWORK_ERROR,details:B.a.INTERNAL_ABORTED,fatal:!1,frag:e,part:r,networkDetails:K}))},onTimeout:function(k,F,K){i.resetLoader(e,f),d(new dt({type:B.b.NETWORK_ERROR,details:B.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:r,networkDetails:K}))}})})},u.updateStatsFromPart=function(e,r){var n=e.stats,i=r.stats,a=i.total;if(n.loaded+=i.loaded,a){var t=Math.round(e.duration/r.duration),s=Math.min(Math.round(n.loaded/a),t),o=(t-s)*Math.round(n.loaded/s);n.total=n.loaded+o}else n.total=Math.max(n.loaded,n.total);var d=n.loading,f=i.loading;d.start?d.first+=f.first-f.start:(d.start=f.start,d.first=f.first),d.end=f.end},u.resetLoader=function(e,r){e.loader=null,this.loader===r&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),r.destroy()},p}();function Ft(p,u){u===void 0&&(u=null);var e=u||p,r={frag:p,part:u,responseType:"arraybuffer",url:e.url,headers:{},rangeStart:0,rangeEnd:0},n=e.byteRangeStartOffset,i=e.byteRangeEndOffset;return Object(T.a)(n)&&Object(T.a)(i)&&(r.rangeStart=n,r.rangeEnd=i),r}var dt=function(p){var u,e;function r(n){for(var i,a=arguments.length,t=new Array(a>1?a-1:0),s=1;s<a;s++)t[s-1]=arguments[s];return(i=p.call.apply(p,[this].concat(t))||this).data=void 0,i.data=n,i}return e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,Pt(u,e),r}(Vt(Error)),en=b(14),kr={toString:function(p){for(var u="",e=p.length,r=0;r<e;r++)u+="["+p.start(r).toFixed(3)+","+p.end(r).toFixed(3)+"]";return u}};function wr(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}function Cr(p,u){return(Cr=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}var Mt="STOPPED",v="IDLE",g="KEY_LOADING",l="FRAG_LOADING",m="FRAG_LOADING_WAITING_RETRY",L="PARSING",x="PARSED",R="BACKTRACKING",C="ENDED",N="ERROR",W="WAITING_LEVEL",j=function(p){var u,e;function r(t,s,o){var d;return(d=p.call(this)||this).hls=void 0,d.fragPrevious=null,d.fragCurrent=null,d.fragmentTracker=void 0,d.transmuxer=null,d._state=Mt,d.media=void 0,d.mediaBuffer=void 0,d.config=void 0,d.bitrateTest=!1,d.lastCurrentTime=0,d.nextLoadPosition=0,d.startPosition=0,d.loadedmetadata=!1,d.fragLoadError=0,d.retryDate=0,d.levels=null,d.fragmentLoader=void 0,d.levelLastLoaded=null,d.startFragRequested=!1,d.decrypter=void 0,d.initPTS=[],d.onvseeking=null,d.onvended=null,d.logPrefix="",d.log=void 0,d.warn=void 0,d.logPrefix=o,d.log=I.b.log.bind(I.b,o+":"),d.warn=I.b.warn.bind(I.b,o+":"),d.hls=t,d.fragmentLoader=new Zr(t.config),d.fragmentTracker=s,d.config=t.config,d.decrypter=new en.a(t,t.config),t.on(c.a.KEY_LOADED,d.onKeyLoaded,function(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}(d)),d}e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,Cr(u,e);var n,i,a=r.prototype;return a.doTick=function(){this.onTickEnd()},a.onTickEnd=function(){},a.startLoad=function(t){},a.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Mt},a._streamEnded=function(t,s){var o=this.fragCurrent,d=this.fragmentTracker;if(!s.live&&o&&o.sn>=s.endSN&&!t.nextStart){var f=s.partList;if(f!=null&&f.length){var S=f[f.length-1];return Ne.isBuffered(this.media,S.start+S.duration/2)}var D=d.getState(o);return D===Ke.PARTIAL||D===Ke.OK}return!1},a.onMediaAttached=function(t,s){var o=this.media=this.mediaBuffer=s.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),o.addEventListener("seeking",this.onvseeking),o.addEventListener("ended",this.onvended);var d=this.config;this.levels&&d.autoStartLoad&&this.state===Mt&&this.startLoad(d.startPosition)},a.onMediaDetaching=function(){var t=this.media;t!=null&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},a.onMediaSeeking=function(){var t=this.config,s=this.fragCurrent,o=this.media,d=this.mediaBuffer,f=this.state,S=o?o.currentTime:0,D=Ne.bufferInfo(d||o,S,t.maxBufferHole);if(this.log("media seeking to "+(Object(T.a)(S)?S.toFixed(3):S)+", state: "+f),f===C)this.resetLoadingState();else if(s&&!D.len){var k=t.maxFragLookUpTolerance,F=s.start-k,K=S>s.start+s.duration+k;(S<F||K)&&(K&&s.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),s.loader.abort()),this.resetLoadingState())}o&&(this.lastCurrentTime=S),this.loadedmetadata||D.len||(this.nextLoadPosition=this.startPosition=S),this.tickImmediate()},a.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},a.onKeyLoaded=function(t,s){if(this.state===g&&s.frag===this.fragCurrent&&this.levels){this.state=v;var o=this.levels[s.frag.level].details;o&&this.loadFragment(s.frag,o,s.frag.start)}},a.onHandlerDestroying=function(){this.stopLoad(),p.prototype.onHandlerDestroying.call(this)},a.onHandlerDestroyed=function(){this.state=Mt,this.hls.off(c.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,p.prototype.onHandlerDestroyed.call(this)},a.loadKey=function(t,s){this.log("Loading key for "+t.sn+" of ["+s.startSN+"-"+s.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+t.level),this.state=g,this.fragCurrent=t,this.hls.trigger(c.a.KEY_LOADING,{frag:t})},a.loadFragment=function(t,s,o){this._loadFragForPlayback(t,s,o)},a._loadFragForPlayback=function(t,s,o){var d=this;this._doFragLoad(t,s,o,function(f){if(d.fragContextChanged(t))return d.warn("Fragment "+t.sn+(f.part?" p: "+f.part.index:"")+" of level "+t.level+" was dropped during download."),void d.fragmentTracker.removeFragment(t);t.stats.chunkCount++,d._handleFragmentLoadProgress(f)}).then(function(f){if(f){d.fragLoadError=0;var S=d.state;if(!d.fragContextChanged(t))return"payload"in f&&(d.log("Loaded fragment "+t.sn+" of level "+t.level),d.hls.trigger(c.a.FRAG_LOADED,f),d.state===R)?(d.fragmentTracker.backtrack(t,f),void d.resetFragmentLoading(t)):void d._handleFragmentLoadComplete(f);(S===l||S===R||!d.fragCurrent&&S===L)&&(d.fragmentTracker.removeFragment(t),d.state=v)}}).catch(function(f){d.warn(f),d.resetFragmentLoading(t)})},a.flushMainBuffer=function(t,s,o){if(o===void 0&&(o=null),t-s){var d={startOffset:t,endOffset:s,type:o};this.fragLoadError=0,this.hls.trigger(c.a.BUFFER_FLUSHING,d)}},a._loadInitSegment=function(t){var s=this;this._doFragLoad(t).then(function(o){if(!o||s.fragContextChanged(t)||!s.levels)throw new Error("init load aborted");return o}).then(function(o){var d=s.hls,f=o.payload,S=t.decryptdata;if(f&&f.byteLength>0&&S&&S.key&&S.iv&&S.method==="AES-128"){var D=self.performance.now();return s.decrypter.webCryptoDecrypt(new Uint8Array(f),S.key.buffer,S.iv.buffer).then(function(k){var F=self.performance.now();return d.trigger(c.a.FRAG_DECRYPTED,{frag:t,payload:k,stats:{tstart:D,tdecrypt:F}}),o.payload=k,o})}return o}).then(function(o){var d=s.fragCurrent,f=s.hls,S=s.levels;if(!S)throw new Error("init load aborted, missing levels");S[t.level].details;var D=t.stats;s.state=v,s.fragLoadError=0,t.data=new Uint8Array(o.payload),D.parsing.start=D.buffering.start=self.performance.now(),D.parsing.end=D.buffering.end=self.performance.now(),o.frag===d&&f.trigger(c.a.FRAG_BUFFERED,{stats:D,frag:d,part:null,id:t.type}),s.tick()}).catch(function(o){s.warn(o),s.resetFragmentLoading(t)})},a.fragContextChanged=function(t){var s=this.fragCurrent;return!t||!s||t.level!==s.level||t.sn!==s.sn||t.urlId!==s.urlId},a.fragBufferedComplete=function(t,s){var o=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(s?" part: "+s.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+t.level+" "+kr.toString(Ne.getBuffered(o))),this.state=v,this.tick()},a._handleFragmentLoadComplete=function(t){var s=this.transmuxer;if(s){var o=t.frag,d=t.part,f=t.partsLoaded,S=!f||f.length===0||f.some(function(k){return!k}),D=new St(o.level,o.sn,o.stats.chunkCount+1,0,d?d.index:-1,!S);s.flush(D)}},a._handleFragmentLoadProgress=function(t){},a._doFragLoad=function(t,s,o,d){var f=this;if(o===void 0&&(o=null),!this.levels)throw new Error("frag load aborted, missing levels");if(o=Math.max(t.start,o||0),this.config.lowLatencyMode&&s){var S=s.partList;if(S&&d){o>t.end&&s.fragmentHint&&(t=s.fragmentHint);var D=this.getNextPart(S,t,o);if(D>-1){var k=S[D];return this.log("Loading part sn: "+t.sn+" p: "+k.index+" cc: "+t.cc+" of playlist ["+s.startSN+"-"+s.endSN+"] parts [0-"+D+"-"+(S.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+t.level+", target: "+parseFloat(o.toFixed(3))),this.nextLoadPosition=k.start+k.duration,this.state=l,this.hls.trigger(c.a.FRAG_LOADING,{frag:t,part:S[D],targetBufferTime:o}),this.doFragPartsLoad(t,S,D,d).catch(function(F){return f.handleFragLoadError(F)})}if(!t.url||this.loadedEndOfParts(S,o))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(s?"of ["+s.startSN+"-"+s.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+t.level+", target: "+parseFloat(o.toFixed(3))),Object(T.a)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=l,this.hls.trigger(c.a.FRAG_LOADING,{frag:t,targetBufferTime:o}),this.fragmentLoader.load(t,d).catch(function(F){return f.handleFragLoadError(F)})},a.doFragPartsLoad=function(t,s,o,d){var f=this;return new Promise(function(S,D){var k=[];(function F(K){var U=s[K];f.fragmentLoader.loadPart(t,U,d).then(function(fe){k[U.index]=fe;var le=fe.part;f.hls.trigger(c.a.FRAG_LOADED,fe);var se=s[K+1];if(!se||se.fragment!==t)return S({frag:t,part:le,partsLoaded:k});F(K+1)}).catch(D)})(o)})},a.handleFragLoadError=function(t){var s=t.data;return s&&s.details===B.a.INTERNAL_ABORTED?this.handleFragLoadAborted(s.frag,s.part):this.hls.trigger(c.a.ERROR,s),null},a._handleTransmuxerFlush=function(t){var s=this.getCurrentContext(t);if(s&&this.state===L){var o=s.frag,d=s.part,f=s.level,S=self.performance.now();o.stats.parsing.end=S,d&&(d.stats.parsing.end=S),this.updateLevelTiming(o,d,f,t.partial)}else this.fragCurrent||(this.state=v)},a.getCurrentContext=function(t){var s=this.levels,o=t.level,d=t.sn,f=t.part;if(!s||!s[o])return this.warn("Levels object was unset while buffering fragment "+d+" of level "+o+". The current chunk will not be buffered."),null;var S=s[o],D=f>-1?function(F,K,U){if(!F||!F.details)return null;var fe=F.details.partList;if(fe)for(var le=fe.length;le--;){var se=fe[le];if(se.index===U&&se.fragment.sn===K)return se}return null}(S,d,f):null,k=D?D.fragment:function(F,K,U){if(!F||!F.details)return null;var fe=F.details,le=fe.fragments[K-fe.startSN];return le||((le=fe.fragmentHint)&&le.sn===K?le:K<fe.startSN&&U&&U.sn===K?U:null)}(S,d,this.fragCurrent);return k?{frag:k,part:D,level:S}:null},a.bufferFragmentData=function(t,s,o,d){if(t&&this.state===L){var f=t.data1,S=t.data2,D=f;if(f&&S&&(D=Object(X.a)(f,S)),D&&D.length){var k={type:t.type,frag:s,part:o,chunkMeta:d,parent:s.type,data:D};this.hls.trigger(c.a.BUFFER_APPENDING,k),t.dropped&&t.independent&&!o&&this.flushBufferGap(s)}}},a.flushBufferGap=function(t){var s=this.media;if(s)if(Ne.isBuffered(s,s.currentTime)){var o=s.currentTime,d=Ne.bufferInfo(s,o,0),f=t.duration,S=Math.min(2*this.config.maxFragLookUpTolerance,.25*f),D=Math.max(Math.min(t.start-S,d.end-S),o+S);t.start-D>S&&this.flushMainBuffer(D,t.start)}else this.flushMainBuffer(0,t.start)},a.getFwdBufferInfo=function(t,s){var o=this.config,d=this.getLoadPosition();if(!Object(T.a)(d))return null;var f=Ne.bufferInfo(t,d,o.maxBufferHole);if(f.len===0&&f.nextStart!==void 0){var S=this.fragmentTracker.getBufferedFrag(d,s);if(S&&f.nextStart<S.end)return Ne.bufferInfo(t,d,Math.max(f.nextStart,o.maxBufferHole))}return f},a.getMaxBufferLength=function(t){var s,o=this.config;return s=t?Math.max(8*o.maxBufferSize/t,o.maxBufferLength):o.maxBufferLength,Math.min(s,o.maxMaxBufferLength)},a.reduceMaxBufferLength=function(t){var s=this.config,o=t||s.maxBufferLength;return s.maxMaxBufferLength>=o&&(s.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+s.maxMaxBufferLength+"s"),!0)},a.getNextFragment=function(t,s){var o,d,f=s.fragments,S=f.length;if(!S)return null;var D,k=this.config,F=f[0].start;if(s.live){var K=k.initialLiveManifestSize;if(S<K)return this.warn("Not enough fragments to start playback (have: "+S+", need: "+K+")"),null;s.PTSKnown||this.startFragRequested||this.startPosition!==-1||(D=this.getInitialLiveFragment(s,f),this.startPosition=D?this.hls.liveSyncPosition||D.start:t)}else t<=F&&(D=f[0]);if(!D){var U=k.lowLatencyMode?s.partEnd:s.fragmentEnd;D=this.getFragmentAtPosition(t,U,s)}return(o=D)===null||o===void 0||!o.initSegment||(d=D)!==null&&d!==void 0&&d.initSegment.data||this.bitrateTest||(D=D.initSegment),D},a.getNextPart=function(t,s,o){for(var d=-1,f=!1,S=!0,D=0,k=t.length;D<k;D++){var F=t[D];if(S=S&&!F.independent,d>-1&&o<F.start)break;var K=F.loaded;!K&&(f||F.independent||S)&&F.fragment===s&&(d=D),f=K}return d},a.loadedEndOfParts=function(t,s){var o=t[t.length-1];return o&&s>o.start&&o.loaded},a.getInitialLiveFragment=function(t,s){var o=this.fragPrevious,d=null;if(o){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+o.programDateTime),d=function(k,F,K){if(F===null||!Array.isArray(k)||!k.length||!Object(T.a)(F)||F<(k[0].programDateTime||0)||F>=(k[k.length-1].endProgramDateTime||0))return null;K=K||0;for(var U=0;U<k.length;++U){var fe=k[U];if(Qr(F,K,fe))return fe}return null}(s,o.endProgramDateTime,this.config.maxFragLookUpTolerance)),!d){var f=o.sn+1;if(f>=t.startSN&&f<=t.endSN){var S=s[f-t.startSN];o.cc===S.cc&&(d=S,this.log("Live playlist, switching playlist, load frag with next SN: "+d.sn))}d||(d=function(k,F){return et.search(k,function(K){return K.cc<F?1:K.cc>F?-1:0})}(s,o.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+d.sn)}}else{var D=this.hls.liveSyncPosition;D!==null&&(d=this.getFragmentAtPosition(D,this.bitrateTest?t.fragmentEnd:t.edge,t))}return d},a.getFragmentAtPosition=function(t,s,o){var d,f=this.config,S=this.fragPrevious,D=o.fragments,k=o.endSN,F=o.fragmentHint,K=f.maxFragLookUpTolerance,U=!!(f.lowLatencyMode&&o.partList&&F);if(U&&F&&!this.bitrateTest&&(D=D.concat(F),k=F.sn),t<s?d=function(me,Te,ge,Fe){ge===void 0&&(ge=0),Fe===void 0&&(Fe=0);var We=null;if(me?We=Te[me.sn-Te[0].sn+1]||null:ge===0&&Te[0].start===0&&(We=Te[0]),We&&ar(ge,Fe,We)===0)return We;var Xe=et.search(Te,ar.bind(null,ge,Fe));return Xe||We}(S,D,t,t>s-K?0:K):d=D[D.length-1],d){var fe=d.sn-o.startSN,le=S&&d.level===S.level,se=D[fe+1];if(this.fragmentTracker.getState(d)===Ke.BACKTRACKED){d=null;for(var oe=fe;D[oe]&&this.fragmentTracker.getState(D[oe])===Ke.BACKTRACKED;)d=S?D[oe--]:D[--oe];d||(d=se)}else S&&d.sn===S.sn&&!U&&le&&(d.sn<k&&this.fragmentTracker.getState(se)!==Ke.OK?(this.log("SN "+d.sn+" just loaded, load next one: "+se.sn),d=se):d=null)}return d},a.synchronizeToLiveEdge=function(t){var s=this.config,o=this.media;if(o){var d=this.hls.liveSyncPosition,f=o.currentTime,S=t.fragments[0].start,D=t.edge,k=f>=S-s.maxFragLookUpTolerance&&f<=D;if(d!==null&&o.duration>d&&(f<d||!k)){var F=s.liveMaxLatencyDuration!==void 0?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;(!k&&o.readyState<4||f<D-F)&&(this.loadedmetadata||(this.nextLoadPosition=d),o.readyState&&(this.warn("Playback: "+f.toFixed(3)+" is located too far from the end of live sliding playlist: "+D+", reset currentTime to : "+d.toFixed(3)),o.currentTime=d))}}},a.alignPlaylists=function(t,s){var o=this.levels,d=this.levelLastLoaded,f=this.fragPrevious,S=d!==null?o[d]:null,D=t.fragments.length;if(!D)return this.warn("No fragments in live playlist"),0;var k=t.fragments[0].start,F=!s,K=t.alignedSliding&&Object(T.a)(k);if(F||!K&&!k){ir(f,S,t);var U=t.fragments[0].start;return this.log("Live playlist sliding: "+U.toFixed(2)+" start-sn: "+(s?s.startSN:"na")+"->"+t.startSN+" prev-sn: "+(f?f.sn:"na")+" fragments: "+D),U}return k},a.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},a.setStartPosition=function(t,s){var o=this.startPosition;if(o<s&&(o=-1),o===-1||this.lastCurrentTime===-1){var d=t.startTimeOffset;Object(T.a)(d)?(o=s+d,d<0&&(o+=t.totalduration),o=Math.min(Math.max(s,o),s+t.totalduration),this.log("Start time offset "+d+" found in playlist, adjust startPosition to "+o),this.startPosition=o):t.live?o=this.hls.liveSyncPosition||s:this.startPosition=o=0,this.lastCurrentTime=o}this.nextLoadPosition=o},a.getLoadPosition=function(){var t=this.media,s=0;return this.loadedmetadata&&t?s=t.currentTime:this.nextLoadPosition&&(s=this.nextLoadPosition),s},a.handleFragLoadAborted=function(t,s){this.transmuxer&&t.sn!=="initSegment"&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(s?" part"+s.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},a.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=v)},a.onFragmentOrKeyLoadError=function(t,s){if(!s.fatal){var o=s.frag;if(o&&o.type===t){this.fragCurrent;var d=this.config;if(this.fragLoadError+1<=d.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(o.level))return;var f=Math.min(Math.pow(2,this.fragLoadError)*d.fragLoadingRetryDelay,d.fragLoadingMaxRetryTimeout);this.warn("Fragment "+o.sn+" of "+t+" "+o.level+" failed to load, retrying in "+f+"ms"),this.retryDate=self.performance.now()+f,this.fragLoadError++,this.state=m}else s.levelRetry?(t===ee.b.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=v):(I.b.error(s.details+" reaches max retry, redispatch as fatal ..."),s.fatal=!0,this.hls.stopLoad(),this.state=N)}}},a.afterBufferFlushed=function(t,s,o){if(t){var d=Ne.getBuffered(t);this.fragmentTracker.detectEvictedFragments(s,d,o),this.state===C&&this.resetLoadingState()}},a.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=v},a.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var s=this.levels?this.levels[t].details:null;if(s!=null&&s.live)return this.startPosition=-1,this.setStartPosition(s,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},a.updateLevelTiming=function(t,s,o,d){var f=this,S=o.details;Object.keys(t.elementaryStreams).reduce(function(D,k){var F=t.elementaryStreams[k];if(F){var K=F.endPTS-F.startPTS;if(K<=0)return f.warn("Could not parse fragment "+t.sn+" "+k+" duration reliably ("+K+") resetting transmuxer to fallback to playlist timing"),f.resetTransmuxer(),D||!1;var U=d?0:qe(S,t,F.startPTS,F.endPTS,F.startDTS,F.endDTS);return f.hls.trigger(c.a.LEVEL_PTS_UPDATED,{details:S,level:o,drift:U,type:k,frag:t,start:F.startPTS,end:F.endPTS}),!0}return D},!1)?(this.state=x,this.hls.trigger(c.a.FRAG_PARSED,{frag:t,part:s})):this.resetLoadingState()},a.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},n=r,(i=[{key:"state",get:function(){return this._state},set:function(t){var s=this._state;s!==t&&(this._state=t,this.log(s+"->"+t))}}])&&wr(n.prototype,i),r}($r);function $(){return self.MediaSource||self.WebKitMediaSource}function te(){return self.SourceBuffer||self.WebKitSourceBuffer}var re=b(17),ne=b(9),ve=b(13),pe=$()||{isTypeSupported:function(){return!1}},ce=function(){function p(e,r,n,i){var a=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=e,this.id=r,this.onTransmuxComplete=n,this.onFlush=i;var t=e.config,s=function(S,D){(D=D||{}).frag=a.frag,D.id=a.id,e.trigger(S,D)};this.observer=new ve.EventEmitter,this.observer.on(c.a.FRAG_DECRYPTED,s),this.observer.on(c.a.ERROR,s);var o={mp4:pe.isTypeSupported("video/mp4"),mpeg:pe.isTypeSupported("audio/mpeg"),mp3:pe.isTypeSupported('audio/mp4; codecs="mp3"')},d=navigator.vendor;if(t.enableWorker&&typeof Worker<"u"){var f;I.b.log("demuxing in webworker");try{f=this.worker=re(18),this.onwmsg=this.onWorkerMessage.bind(this),f.addEventListener("message",this.onwmsg),f.onerror=function(S){e.trigger(c.a.ERROR,{type:B.b.OTHER_ERROR,details:B.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(S.message+"  ("+S.filename+":"+S.lineno+")")})},f.postMessage({cmd:"init",typeSupported:o,vendor:d,id:r,config:JSON.stringify(t)})}catch(S){I.b.warn("Error in worker:",S),I.b.error("Error while initializing DemuxerWorker, fallback to inline"),f&&self.URL.revokeObjectURL(f.objectURL),this.transmuxer=new ne.c(this.observer,o,t,d,r),this.worker=null}}else this.transmuxer=new ne.c(this.observer,o,t,d,r)}var u=p.prototype;return u.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null;else{var r=this.transmuxer;r&&(r.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.observer=null},u.push=function(e,r,n,i,a,t,s,o,d,f){var S,D,k=this;d.transmuxing.start=self.performance.now();var F=this.transmuxer,K=this.worker,U=t?t.start:a.start,fe=a.decryptdata,le=this.frag,se=!(le&&a.cc===le.cc),oe=!(le&&d.level===le.level),me=le?d.sn-le.sn:-1,Te=this.part?d.part-this.part.index:1,ge=!oe&&(me===1||me===0&&Te===1),Fe=self.performance.now();(oe||me||a.stats.parsing.start===0)&&(a.stats.parsing.start=Fe),!t||!Te&&ge||(t.stats.parsing.start=Fe);var We=!(le&&((S=a.initSegment)===null||S===void 0?void 0:S.url)===((D=le.initSegment)===null||D===void 0?void 0:D.url)),Xe=new ne.b(se,ge,o,oe,U,We);if(!ge||se||We){I.b.log("[transmuxer-interface, "+a.type+"]: Starting new transmux session for sn: "+d.sn+" p: "+d.part+" level: "+d.level+" id: "+d.id+`
        discontinuity: `+se+`
        trackSwitch: `+oe+`
        contiguous: `+ge+`
        accurateTimeOffset: `+o+`
        timeOffset: `+U+`
        initSegmentChange: `+We);var Rt=new ne.a(n,i,r,s,f);this.configureTransmuxer(Rt)}if(this.frag=a,this.part=t,K)K.postMessage({cmd:"demux",data:e,decryptdata:fe,chunkMeta:d,state:Xe},e instanceof ArrayBuffer?[e]:[]);else if(F){var at=F.push(e,fe,d,Xe);Object(ne.d)(at)?at.then(function(st){k.handleTransmuxComplete(st)}):this.handleTransmuxComplete(at)}},u.flush=function(e){var r=this;e.transmuxing.start=self.performance.now();var n=this.transmuxer,i=this.worker;if(i)i.postMessage({cmd:"flush",chunkMeta:e});else if(n){var a=n.flush(e);Object(ne.d)(a)?a.then(function(t){r.handleFlushResult(t,e)}):this.handleFlushResult(a,e)}},u.handleFlushResult=function(e,r){var n=this;e.forEach(function(i){n.handleTransmuxComplete(i)}),this.onFlush(r)},u.onWorkerMessage=function(e){var r=e.data,n=this.hls;switch(r.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(r.data);break;case"flush":this.onFlush(r.data);break;default:r.data=r.data||{},r.data.frag=this.frag,r.data.id=this.id,n.trigger(r.event,r.data)}},u.configureTransmuxer=function(e){var r=this.worker,n=this.transmuxer;r?r.postMessage({cmd:"configure",config:e}):n&&n.configure(e)},u.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},p}(),De=function(){function p(e,r,n,i){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=r,this.fragmentTracker=n,this.hls=i}var u=p.prototype;return u.destroy=function(){this.hls=this.fragmentTracker=this.media=null},u.poll=function(e){var r=this.config,n=this.media,i=this.stalled,a=n.currentTime,t=n.seeking,s=this.seeking&&!t,o=!this.seeking&&t;if(this.seeking=t,a===e){if((o||s)&&(this.stalled=null),!n.paused&&!n.ended&&n.playbackRate!==0&&Ne.getBuffered(n).length){var d=Ne.bufferInfo(n,a,0),f=d.len>0,S=d.nextStart||0;if(f||S){if(t){var D=d.len>2,k=!S||S-a>2&&!this.fragmentTracker.getPartialFragment(a);if(D||k)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var F,K=Math.max(S,d.start||0)-a,U=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,fe=!(U==null||(F=U.details)===null||F===void 0)&&F.live?2*U.details.targetduration:2;if(K>0&&K<=fe)return void this._trySkipBufferHole(null)}var le=self.performance.now();if(i!==null){var se=le-i;!t&&se>=250&&this._reportStall(d.len);var oe=Ne.bufferInfo(n,a,r.maxBufferHole);this._tryFixBufferStall(oe,se)}else this.stalled=le}}}else if(this.moved=!0,i!==null){if(this.stallReported){var me=self.performance.now()-i;I.b.warn("playback not stuck anymore @"+a+", after "+Math.round(me)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},u._tryFixBufferStall=function(e,r){var n=this.config,i=this.fragmentTracker,a=this.media.currentTime,t=i.getPartialFragment(a);t&&this._trySkipBufferHole(t)||e.len>n.maxBufferHole&&r>1e3*n.highBufferWatchdogPeriod&&(I.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},u._reportStall=function(e){var r=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,I.b.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+e+")"),r.trigger(c.a.ERROR,{type:B.b.MEDIA_ERROR,details:B.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},u._trySkipBufferHole=function(e){for(var r=this.config,n=this.hls,i=this.media,a=i.currentTime,t=0,s=Ne.getBuffered(i),o=0;o<s.length;o++){var d=s.start(o);if(a+r.maxBufferHole>=t&&a<d){var f=Math.max(d+.05,i.currentTime+.1);return I.b.warn("skipping hole, adjusting currentTime from "+a+" to "+f),this.moved=!0,this.stalled=null,i.currentTime=f,e&&n.trigger(c.a.ERROR,{type:B.b.MEDIA_ERROR,details:B.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+a+" to "+f,frag:e}),f}t=s.end(o)}return 0},u._tryNudgeBuffer=function(){var e=this.config,r=this.hls,n=this.media,i=n.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<e.nudgeMaxRetry){var t=i+a*e.nudgeOffset;I.b.warn("Nudging 'currentTime' from "+i+" to "+t),n.currentTime=t,r.trigger(c.a.ERROR,{type:B.b.MEDIA_ERROR,details:B.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else I.b.error("Playhead still not moving while enough data buffered @"+i+" after "+e.nudgeMaxRetry+" nudges"),r.trigger(c.a.ERROR,{type:B.b.MEDIA_ERROR,details:B.a.BUFFER_STALLED_ERROR,fatal:!0})},p}();function Re(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}function ke(p,u){return(ke=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}var _e=function(p){var u,e;function r(t,s){var o;return(o=p.call(this,t,s,"[stream-controller]")||this).audioCodecSwap=!1,o.gapController=null,o.level=-1,o._forceStartLoad=!1,o.altAudio=!1,o.audioOnly=!1,o.fragPlaying=null,o.onvplaying=null,o.onvseeked=null,o.fragLastKbps=0,o.stalled=!1,o.couldBacktrack=!1,o.audioCodecSwitch=!1,o.videoBuffer=null,o._registerListeners(),o}e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,ke(u,e);var n,i,a=r.prototype;return a._registerListeners=function(){var t=this.hls;t.on(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(c.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(c.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(c.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(c.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(c.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(c.a.ERROR,this.onError,this),t.on(c.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(c.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(c.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(c.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(c.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(c.a.FRAG_BUFFERED,this.onFragBuffered,this)},a._unregisterListeners=function(){var t=this.hls;t.off(c.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(c.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(c.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(c.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(c.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(c.a.ERROR,this.onError,this),t.off(c.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(c.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(c.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(c.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(c.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(c.a.FRAG_BUFFERED,this.onFragBuffered,this)},a.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},a.startLoad=function(t){if(this.levels){var s=this.lastCurrentTime,o=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var d=o.startLevel;d===-1&&(o.config.testBandwidth?(d=0,this.bitrateTest=!0):d=o.nextAutoLevel),this.level=o.nextLoadLevel=d,this.loadedmetadata=!1}s>0&&t===-1&&(this.log("Override startPosition with lastCurrentTime @"+s.toFixed(3)),t=s),this.state=v,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=Mt},a.stopLoad=function(){this._forceStartLoad=!1,p.prototype.stopLoad.call(this)},a.doTick=function(){switch(this.state){case v:this.doTickIdle();break;case W:var t,s=this.levels,o=this.level,d=s==null||(t=s[o])===null||t===void 0?void 0:t.details;if(d&&(!d.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(d))break;this.state=v;break}break;case m:var f,S=self.performance.now(),D=this.retryDate;(!D||S>=D||(f=this.media)!==null&&f!==void 0&&f.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=v)}this.onTickEnd()},a.onTickEnd=function(){p.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},a.doTickIdle=function(){var t,s,o=this.hls,d=this.levelLastLoaded,f=this.levels,S=this.media,D=o.config,k=o.nextLoadLevel;if(d!==null&&(S||!this.startFragRequested&&D.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&f&&f[k]){var F=f[k];this.level=o.nextLoadLevel=k;var K=F.details;if(!K||this.state===W||K.live&&this.levelLastLoaded!==k)this.state=W;else{var U=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:S,ee.b.MAIN);if(U!==null&&!(U.len>=this.getMaxBufferLength(F.maxBitrate))){if(this._streamEnded(U,K)){var fe={};return this.altAudio&&(fe.type="video"),this.hls.trigger(c.a.BUFFER_EOS,fe),void(this.state=C)}var le=U.end,se=this.getNextFragment(le,K);if(this.couldBacktrack&&!this.fragPrevious&&se&&se.sn!=="initSegment"){var oe=se.sn-K.startSN;oe>1&&(se=K.fragments[oe-1],this.fragmentTracker.removeFragment(se))}if(se&&this.fragmentTracker.getState(se)===Ke.OK&&this.nextLoadPosition>le){var me=this.audioOnly&&!this.altAudio?q.a.AUDIO:q.a.VIDEO;this.afterBufferFlushed(S,me,ee.b.MAIN),se=this.getNextFragment(this.nextLoadPosition,K)}se&&(!se.initSegment||se.initSegment.data||this.bitrateTest||(se=se.initSegment),((t=se.decryptdata)===null||t===void 0?void 0:t.keyFormat)!=="identity"||(s=se.decryptdata)!==null&&s!==void 0&&s.key?this.loadFragment(se,K,le):this.loadKey(se,K))}}}},a.loadFragment=function(t,s,o){var d,f=this.fragmentTracker.getState(t);if(this.fragCurrent=t,f===Ke.BACKTRACKED){var S=this.fragmentTracker.getBacktrackData(t);if(S)return this._handleFragmentLoadProgress(S),void this._handleFragmentLoadComplete(S);f=Ke.NOT_LOADED}f===Ke.NOT_LOADED||f===Ke.PARTIAL?t.sn==="initSegment"?this._loadInitSegment(t):this.bitrateTest?(t.bitrateTest=!0,this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t)):(this.startFragRequested=!0,p.prototype.loadFragment.call(this,t,s,o)):f===Ke.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):((d=this.media)===null||d===void 0?void 0:d.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},a.getAppendedFrag=function(t){var s=this.fragmentTracker.getAppendedFrag(t,ee.b.MAIN);return s&&"fragment"in s?s.fragment:s},a.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,ee.b.MAIN)},a.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},a.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},a.nextLevelSwitch=function(){var t=this.levels,s=this.media;if(s!=null&&s.readyState){var o,d=this.getAppendedFrag(s.currentTime);if(d&&d.start>1&&this.flushMainBuffer(0,d.start-1),!s.paused&&t){var f=t[this.hls.nextLoadLevel],S=this.fragLastKbps;o=S&&this.fragCurrent?this.fragCurrent.duration*f.maxBitrate/(1e3*S)+1:0}else o=0;var D=this.getBufferedFrag(s.currentTime+o);if(D){var k=this.followingBufferedFrag(D);if(k){this.abortCurrentFrag();var F=k.maxStartPTS?k.maxStartPTS:k.start,K=k.duration,U=Math.max(D.end,F+Math.min(Math.max(K-this.config.maxFragLookUpTolerance,.5*K),.75*K));this.flushMainBuffer(U,Number.POSITIVE_INFINITY)}}}},a.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,t!=null&&t.loader&&t.loader.abort(),this.state===g&&(this.state=v),this.nextLoadPosition=this.getLoadPosition()},a.flushMainBuffer=function(t,s){p.prototype.flushMainBuffer.call(this,t,s,this.altAudio?"video":null)},a.onMediaAttached=function(t,s){p.prototype.onMediaAttached.call(this,t,s);var o=s.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),o.addEventListener("playing",this.onvplaying),o.addEventListener("seeked",this.onvseeked),this.gapController=new De(this.config,o,this.fragmentTracker,this.hls)},a.onMediaDetaching=function(){var t=this.media;t&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),p.prototype.onMediaDetaching.call(this)},a.onMediaPlaying=function(){this.tick()},a.onMediaSeeked=function(){var t=this.media,s=t?t.currentTime:null;Object(T.a)(s)&&this.log("Media seeked to "+s.toFixed(3)),this.tick()},a.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(c.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},a.onManifestParsed=function(t,s){var o,d,f,S=!1,D=!1;s.levels.forEach(function(k){(o=k.audioCodec)&&(o.indexOf("mp4a.40.2")!==-1&&(S=!0),o.indexOf("mp4a.40.5")!==-1&&(D=!0))}),this.audioCodecSwitch=S&&D&&typeof((f=te())==null||(d=f.prototype)===null||d===void 0?void 0:d.changeType)!="function",this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=s.levels,this.startFragRequested=!1},a.onLevelLoading=function(t,s){var o=this.levels;if(o&&this.state===v){var d=o[s.level];(!d.details||d.details.live&&this.levelLastLoaded!==s.level||this.waitForCdnTuneIn(d.details))&&(this.state=W)}},a.onLevelLoaded=function(t,s){var o,d=this.levels,f=s.level,S=s.details,D=S.totalduration;if(d){this.log("Level "+f+" loaded ["+S.startSN+","+S.endSN+"], cc ["+S.startCC+", "+S.endCC+"] duration:"+D);var k=this.fragCurrent;!k||this.state!==l&&this.state!==m||k.level!==s.level&&k.loader&&(this.state=v,k.loader.abort());var F=d[f],K=0;if(S.live||(o=F.details)!==null&&o!==void 0&&o.live){if(S.fragments[0]||(S.deltaUpdateFailed=!0),S.deltaUpdateFailed)return;K=this.alignPlaylists(S,F.details)}if(F.details=S,this.levelLastLoaded=f,this.hls.trigger(c.a.LEVEL_UPDATED,{details:S,level:f}),this.state===W){if(this.waitForCdnTuneIn(S))return;this.state=v}this.startFragRequested?S.live&&this.synchronizeToLiveEdge(S):this.setStartPosition(S,K),this.tick()}else this.warn("Levels were reset while loading level "+f)},a._handleFragmentLoadProgress=function(t){var s,o=t.frag,d=t.part,f=t.payload,S=this.levels;if(S){var D=S[o.level],k=D.details;if(k){var F=D.videoCodec,K=k.PTSKnown||!k.live,U=(s=o.initSegment)===null||s===void 0?void 0:s.data,fe=this._getAudioCodec(D),le=this.transmuxer=this.transmuxer||new ce(this.hls,ee.b.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),se=d?d.index:-1,oe=se!==-1,me=new St(o.level,o.sn,o.stats.chunkCount,f.byteLength,se,oe),Te=this.initPTS[o.cc];le.push(f,U,fe,F,o,d,k.totalduration,K,me,Te)}else this.warn("Dropping fragment "+o.sn+" of level "+o.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+o.sn+" of level "+o.level+" will not be buffered")},a.onAudioTrackSwitching=function(t,s){var o=this.altAudio,d=!!s.url,f=s.id;if(!d){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var S=this.fragCurrent;S!=null&&S.loader&&(this.log("Switching to main audio track, cancel main fragment load"),S.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var D=this.hls;o&&D.trigger(c.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),D.trigger(c.a.AUDIO_TRACK_SWITCHED,{id:f})}},a.onAudioTrackSwitched=function(t,s){var o=s.id,d=!!this.hls.audioTracks[o].url;if(d){var f=this.videoBuffer;f&&this.mediaBuffer!==f&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=f)}this.altAudio=d,this.tick()},a.onBufferCreated=function(t,s){var o,d,f=s.tracks,S=!1;for(var D in f){var k=f[D];if(k.id==="main"){if(d=D,o=k,D==="video"){var F=f[D];F&&(this.videoBuffer=F.buffer)}}else S=!0}S&&o?(this.log("Alternate track found, use "+d+".buffered to schedule main fragment loading"),this.mediaBuffer=o.buffer):this.mediaBuffer=this.media},a.onFragBuffered=function(t,s){var o=s.frag,d=s.part;if(!o||o.type===ee.b.MAIN){if(this.fragContextChanged(o))return this.warn("Fragment "+o.sn+(d?" p: "+d.index:"")+" of level "+o.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===x&&(this.state=v));var f=d?d.stats:o.stats;this.fragLastKbps=Math.round(8*f.total/(f.buffering.end-f.loading.first)),o.sn!=="initSegment"&&(this.fragPrevious=o),this.fragBufferedComplete(o,d)}},a.onError=function(t,s){switch(s.details){case B.a.FRAG_LOAD_ERROR:case B.a.FRAG_LOAD_TIMEOUT:case B.a.KEY_LOAD_ERROR:case B.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ee.b.MAIN,s);break;case B.a.LEVEL_LOAD_ERROR:case B.a.LEVEL_LOAD_TIMEOUT:this.state!==N&&(s.fatal?(this.warn(""+s.details),this.state=N):s.levelRetry||this.state!==W||(this.state=v));break;case B.a.BUFFER_FULL_ERROR:if(s.parent==="main"&&(this.state===L||this.state===x)){var o=!0,d=this.getFwdBufferInfo(this.media,ee.b.MAIN);d&&d.len>.5&&(o=!this.reduceMaxBufferLength(d.len)),o&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},a.checkBuffer=function(){var t=this.media,s=this.gapController;if(t&&s&&t.readyState){var o=Ne.getBuffered(t);!this.loadedmetadata&&o.length?(this.loadedmetadata=!0,this.seekToStartPos()):s.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},a.onFragLoadEmergencyAborted=function(){this.state=v,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},a.onBufferFlushed=function(t,s){var o=s.type;if(o!==q.a.AUDIO||this.audioOnly&&!this.altAudio){var d=(o===q.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(d,o,ee.b.MAIN)}},a.onLevelsUpdated=function(t,s){this.levels=s.levels},a.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},a.seekToStartPos=function(){var t=this.media,s=t.currentTime,o=this.startPosition;if(o>=0&&s<o){if(t.seeking)return void I.b.log("could not seek to "+o+", already seeking at "+s);var d=Ne.getBuffered(t),f=(d.length?d.start(0):0)-o;f>0&&(f<this.config.maxBufferHole||f<this.config.maxFragLookUpTolerance)&&(I.b.log("adjusting start position by "+f+" to match buffer start"),o+=f,this.startPosition=o),this.log("seek to target start position "+o+" from current time "+s),t.currentTime=o}},a._getAudioCodec=function(t){var s=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&s&&(this.log("Swapping audio codec"),s=s.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),s},a._loadBitrateTestFrag=function(t){var s=this;this._doFragLoad(t).then(function(o){var d=s.hls;if(o&&!d.nextLoadLevel&&!s.fragContextChanged(t)){s.fragLoadError=0,s.state=v,s.startFragRequested=!1,s.bitrateTest=!1;var f=t.stats;f.parsing.start=f.parsing.end=f.buffering.start=f.buffering.end=self.performance.now(),d.trigger(c.a.FRAG_LOADED,o)}})},a._handleTransmuxComplete=function(t){var s,o="main",d=this.hls,f=t.remuxResult,S=t.chunkMeta,D=this.getCurrentContext(S);if(!D)return this.warn("The loading context changed while buffering fragment "+S.sn+" of level "+S.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(S.level);var k=D.frag,F=D.part,K=D.level,U=f.video,fe=f.text,le=f.id3,se=f.initSegment,oe=this.altAudio?void 0:f.audio;if(!this.fragContextChanged(k)){if(this.state=L,se){se.tracks&&(this._bufferInitSegment(K,se.tracks,k,S),d.trigger(c.a.FRAG_PARSING_INIT_SEGMENT,{frag:k,id:o,tracks:se.tracks}));var me=se.initPTS,Te=se.timescale;Object(T.a)(me)&&(this.initPTS[k.cc]=me,d.trigger(c.a.INIT_PTS_FOUND,{frag:k,id:o,initPTS:me,timescale:Te}))}if(U&&f.independent!==!1){if(K.details){var ge=U.startPTS,Fe=U.endPTS,We=U.startDTS,Xe=U.endDTS;if(F)F.elementaryStreams[U.type]={startPTS:ge,endPTS:Fe,startDTS:We,endDTS:Xe};else if(U.firstKeyFrame&&U.independent&&(this.couldBacktrack=!0),U.dropped&&U.independent){if(this.getLoadPosition()+this.config.maxBufferHole<ge)return void this.backtrack(k);k.setElementaryStreamInfo(U.type,k.start,Fe,k.start,Xe,!0)}k.setElementaryStreamInfo(U.type,ge,Fe,We,Xe),this.bufferFragmentData(U,k,F,S)}}else if(f.independent===!1)return void this.backtrack(k);if(oe){var Rt=oe.startPTS,at=oe.endPTS,st=oe.startDTS,ct=oe.endDTS;F&&(F.elementaryStreams[q.a.AUDIO]={startPTS:Rt,endPTS:at,startDTS:st,endDTS:ct}),k.setElementaryStreamInfo(q.a.AUDIO,Rt,at,st,ct),this.bufferFragmentData(oe,k,F,S)}if(le!=null&&(s=le.samples)!==null&&s!==void 0&&s.length){var fr={frag:k,id:o,samples:le.samples};d.trigger(c.a.FRAG_PARSING_METADATA,fr)}if(fe){var Mr={frag:k,id:o,samples:fe.samples};d.trigger(c.a.FRAG_PARSING_USERDATA,Mr)}}},a._bufferInitSegment=function(t,s,o,d){var f=this;if(this.state===L){this.audioOnly=!!s.audio&&!s.video,this.altAudio&&!this.audioOnly&&delete s.audio;var S=s.audio,D=s.video,k=s.audiovideo;if(S){var F=t.audioCodec,K=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(F&&(F=F.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),S.metadata.channelCount!==1&&K.indexOf("firefox")===-1&&(F="mp4a.40.5")),K.indexOf("android")!==-1&&S.container!=="audio/mpeg"&&(F="mp4a.40.2",this.log("Android: force audio codec to "+F)),t.audioCodec&&t.audioCodec!==F&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+F+'"'),S.levelCodec=F,S.id="main",this.log("Init audio buffer, container:"+S.container+", codecs[selected/level/parsed]=["+(F||"")+"/"+(t.audioCodec||"")+"/"+S.codec+"]")}D&&(D.levelCodec=t.videoCodec,D.id="main",this.log("Init video buffer, container:"+D.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+D.codec+"]")),k&&this.log("Init audiovideo buffer, container:"+k.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+k.codec+"]"),this.hls.trigger(c.a.BUFFER_CODECS,s),Object.keys(s).forEach(function(U){var fe=s[U].initSegment;fe!=null&&fe.byteLength&&f.hls.trigger(c.a.BUFFER_APPENDING,{type:U,data:fe,frag:o,part:null,chunkMeta:d,parent:o.type})}),this.tick()}},a.backtrack=function(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var s=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,s?this.resetFragmentLoading(t):this.state=R},a.checkFragmentChanged=function(){var t=this.media,s=null;if(t&&t.readyState>1&&t.seeking===!1){var o=t.currentTime;if(Ne.isBuffered(t,o)?s=this.getAppendedFrag(o):Ne.isBuffered(t,o+.1)&&(s=this.getAppendedFrag(o+.1)),s){var d=this.fragPlaying,f=s.level;d&&s.sn===d.sn&&d.level===f&&s.urlId===d.urlId||(this.hls.trigger(c.a.FRAG_CHANGED,{frag:s}),d&&d.level===f||this.hls.trigger(c.a.LEVEL_SWITCHED,{level:f}),this.fragPlaying=s)}}},n=r,(i=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var s=this.getAppendedFrag(t.currentTime);if(s)return s.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var s=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(s)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&Re(n.prototype,i),r}(j),ye=function(){function p(e,r,n){r===void 0&&(r=0),n===void 0&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=r,this.totalWeight_=n}var u=p.prototype;return u.sample=function(e,r){var n=Math.pow(this.alpha_,e);this.estimate_=r*(1-n)+n*this.estimate_,this.totalWeight_+=e},u.getTotalWeight=function(){return this.totalWeight_},u.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},p}(),be=function(){function p(e,r,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ye(e),this.fast_=new ye(r)}var u=p.prototype;return u.update=function(e,r){var n=this.slow_,i=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new ye(e,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==r&&(this.fast_=new ye(r,i.getEstimate(),i.getTotalWeight()))},u.sample=function(e,r){var n=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*r/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},u.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},u.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},u.destroy=function(){},p}();function Ce(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var Oe=function(){function p(n){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=n;var i=n.config;this.bwEstimator=new be(i.abrEwmaSlowVoD,i.abrEwmaFastVoD,i.abrEwmaDefaultEstimate),this.registerListeners()}var u,e,r=p.prototype;return r.registerListeners=function(){var n=this.hls;n.on(c.a.FRAG_LOADING,this.onFragLoading,this),n.on(c.a.FRAG_LOADED,this.onFragLoaded,this),n.on(c.a.FRAG_BUFFERED,this.onFragBuffered,this),n.on(c.a.LEVEL_LOADED,this.onLevelLoaded,this),n.on(c.a.ERROR,this.onError,this)},r.unregisterListeners=function(){var n=this.hls;n.off(c.a.FRAG_LOADING,this.onFragLoading,this),n.off(c.a.FRAG_LOADED,this.onFragLoaded,this),n.off(c.a.FRAG_BUFFERED,this.onFragBuffered,this),n.off(c.a.LEVEL_LOADED,this.onLevelLoaded,this),n.off(c.a.ERROR,this.onError,this)},r.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},r.onFragLoading=function(n,i){var a,t=i.frag;t.type===ee.b.MAIN&&(this.timer||(this.fragCurrent=t,this.partCurrent=(a=i.part)!=null?a:null,this.timer=self.setInterval(this.onCheck,100)))},r.onLevelLoaded=function(n,i){var a=this.hls.config;i.details.live?this.bwEstimator.update(a.abrEwmaSlowLive,a.abrEwmaFastLive):this.bwEstimator.update(a.abrEwmaSlowVoD,a.abrEwmaFastVoD)},r._abandonRulesCheck=function(){var n=this.fragCurrent,i=this.partCurrent,a=this.hls,t=a.autoLevelEnabled,s=a.config,o=a.media;if(n&&o){var d=i?i.stats:n.stats,f=i?i.duration:n.duration;if(d.aborted)return I.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(t&&!o.paused&&o.playbackRate&&o.readyState){var S=performance.now()-d.loading.start,D=Math.abs(o.playbackRate);if(!(S<=500*f/D)){var k=a.levels,F=a.minAutoLevel,K=k[n.level],U=d.total||Math.max(d.loaded,Math.round(f*K.maxBitrate/8)),fe=Math.max(1,d.bwEstimate?d.bwEstimate/8:1e3*d.loaded/S),le=(U-d.loaded)/fe,se=o.currentTime,oe=(Ne.bufferInfo(o,se,s.maxBufferHole).end-se)/D;if(!(oe>=2*f/D||le<=oe)){var me,Te=Number.POSITIVE_INFINITY;for(me=n.level-1;me>F&&!((Te=f*k[me].maxBitrate/(6.4*fe))<oe);me--);if(!(Te>=le)){var ge=this.bwEstimator.getEstimate();I.b.warn("Fragment "+n.sn+(i?" part "+i.index:"")+" of level "+n.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+me+`
      Current BW estimate: `+(Object(T.a)(ge)?(ge/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+le.toFixed(3)+` s
      Estimated load time for the next fragment: `+Te.toFixed(3)+` s
      Time to underbuffer: `+oe.toFixed(3)+" s"),a.nextLoadLevel=me,this.bwEstimator.sample(S,d.loaded),this.clearTimer(),n.loader&&(this.fragCurrent=this.partCurrent=null,n.loader.abort()),a.trigger(c.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:i,stats:d})}}}}}},r.onFragLoaded=function(n,i){var a=i.frag,t=i.part;if(a.type===ee.b.MAIN&&Object(T.a)(a.sn)){var s=t?t.stats:a.stats,o=t?t.duration:a.duration;if(this.clearTimer(),this.lastLoadedFragLevel=a.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var d=this.hls.levels[a.level],f=(d.loaded?d.loaded.bytes:0)+s.loaded,S=(d.loaded?d.loaded.duration:0)+o;d.loaded={bytes:f,duration:S},d.realBitrate=Math.round(8*f/S)}if(a.bitrateTest){var D={stats:s,frag:a,part:t,id:a.type};this.onFragBuffered(c.a.FRAG_BUFFERED,D),a.bitrateTest=!1}}},r.onFragBuffered=function(n,i){var a=i.frag,t=i.part,s=t?t.stats:a.stats;if(!s.aborted&&a.type===ee.b.MAIN&&a.sn!=="initSegment"){var o=s.parsing.end-s.loading.start;this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.bwEstimator.getEstimate(),a.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}},r.onError=function(n,i){switch(i.details){case B.a.FRAG_LOAD_ERROR:case B.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},r.getNextABRAutoLevel=function(){var n=this.fragCurrent,i=this.partCurrent,a=this.hls,t=a.maxAutoLevel,s=a.config,o=a.minAutoLevel,d=a.media,f=i?i.duration:n?n.duration:0,S=d?d.currentTime:0,D=d&&d.playbackRate!==0?Math.abs(d.playbackRate):1,k=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,F=(Ne.bufferInfo(d,S,s.maxBufferHole).end-S)/D,K=this.findBestLevel(k,o,t,F,s.abrBandWidthFactor,s.abrBandWidthUpFactor);if(K>=0)return K;I.b.trace((F?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var U=f?Math.min(f,s.maxStarvationDelay):s.maxStarvationDelay,fe=s.abrBandWidthFactor,le=s.abrBandWidthUpFactor;if(!F){var se=this.bitrateTestDelay;se&&(U=(f?Math.min(f,s.maxLoadingDelay):s.maxLoadingDelay)-se,I.b.trace("bitrate test took "+Math.round(1e3*se)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*U)+" ms"),fe=le=1)}return K=this.findBestLevel(k,o,t,F+U,fe,le),Math.max(K,0)},r.findBestLevel=function(n,i,a,t,s,o){for(var d,f=this.fragCurrent,S=this.partCurrent,D=this.lastLoadedFragLevel,k=this.hls.levels,F=k[D],K=!(F==null||(d=F.details)===null||d===void 0||!d.live),U=F?.codecSet,fe=S?S.duration:f?f.duration:0,le=a;le>=i;le--){var se=k[le];if(se&&(!U||se.codecSet===U)){var oe=se.details,me=(S?oe?.partTarget:oe?.averagetargetduration)||fe,Te=void 0;Te=le<=D?s*n:o*n;var ge=k[le].maxBitrate,Fe=ge*me/Te;if(I.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+le+"/"+Math.round(Te)+"/"+ge+"/"+me+"/"+t+"/"+Fe),Te>ge&&(!Fe||K&&!this.bitrateTestDelay||Fe<t))return le}}return-1},u=p,(e=[{key:"nextAutoLevel",get:function(){var n=this._nextAutoLevel,i=this.bwEstimator;if(!(n===-1||i&&i.canEstimate()))return n;var a=this.getNextABRAutoLevel();return n!==-1&&(a=Math.min(n,a)),a},set:function(n){this._nextAutoLevel=n}}])&&Ce(u.prototype,e),p}(),Pe=b(10),Ye=b.n(Pe),tt=function(){function p(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var u=p.prototype;return u.append=function(e,r){var n=this.queues[r];n.push(e),n.length===1&&this.buffers[r]&&this.executeNext(r)},u.insertAbort=function(e,r){this.queues[r].unshift(e),this.executeNext(r)},u.appendBlocker=function(e){var r,n=new Promise(function(a){r=a}),i={execute:r,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),n},u.executeNext=function(e){var r=this.buffers,n=this.queues,i=r[e],a=n[e];if(a.length){var t=a[0];try{t.execute()}catch(s){I.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),t.onError(s),i&&i.updating||(a.shift(),this.executeNext(e))}}},u.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},u.current=function(e){return this.queues[e][0]},p}(),$e=$(),Ue=/([ha]vc.)(?:\.[^.,]+)+/,ze=function(){function p(e){var r=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var n=r.hls,i=r.media,a=r.mediaSource;I.b.log("[buffer-controller]: Media source opened"),i&&(r.updateMediaElementDuration(),n.trigger(c.a.MEDIA_ATTACHED,{media:i})),a&&a.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},this._onMediaSourceClose=function(){I.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){I.b.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var u=p.prototype;return u.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},u.destroy=function(){this.unregisterListeners(),this.details=null},u.registerListeners=function(){var e=this.hls;e.on(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(c.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(c.a.BUFFER_RESET,this.onBufferReset,this),e.on(c.a.BUFFER_APPENDING,this.onBufferAppending,this),e.on(c.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(c.a.BUFFER_EOS,this.onBufferEos,this),e.on(c.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(c.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(c.a.FRAG_PARSED,this.onFragParsed,this),e.on(c.a.FRAG_CHANGED,this.onFragChanged,this)},u.unregisterListeners=function(){var e=this.hls;e.off(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(c.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(c.a.MANIFEST_PARSED,this.onManifestParsed,this),e.off(c.a.BUFFER_RESET,this.onBufferReset,this),e.off(c.a.BUFFER_APPENDING,this.onBufferAppending,this),e.off(c.a.BUFFER_CODECS,this.onBufferCodecs,this),e.off(c.a.BUFFER_EOS,this.onBufferEos,this),e.off(c.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(c.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(c.a.FRAG_PARSED,this.onFragParsed,this),e.off(c.a.FRAG_CHANGED,this.onFragChanged,this)},u._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new tt(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},u.onManifestParsed=function(e,r){var n=2;(r.audio&&!r.video||!r.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,I.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},u.onMediaAttaching=function(e,r){var n=this.media=r.media;if(n&&$e){var i=this.mediaSource=new $e;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(i),this._objectUrl=n.src}},u.onMediaDetaching=function(){var e=this.media,r=this.mediaSource,n=this._objectUrl;if(r){if(I.b.log("[buffer-controller]: media source detaching"),r.readyState==="open")try{r.endOfStream()}catch(i){I.b.warn("[buffer-controller]: onMediaDetaching: "+i.message+" while calling endOfStream")}this.onBufferReset(),r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):I.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(c.a.MEDIA_DETACHED,void 0)},u.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach(function(r){var n=e.sourceBuffer[r];try{n&&(e.removeBufferListeners(r),e.mediaSource&&e.mediaSource.removeSourceBuffer(n),e.sourceBuffer[r]=void 0)}catch(i){I.b.warn("[buffer-controller]: Failed to reset the "+r+" buffer",i)}}),this._initSourceBuffer()},u.onBufferCodecs=function(e,r){var n=this,i=this.getSourceBufferTypes().length;Object.keys(r).forEach(function(a){if(i){var t=n.tracks[a];if(t&&typeof t.buffer.changeType=="function"){var s=r[a],o=s.codec,d=s.levelCodec,f=s.container;if((t.levelCodec||t.codec).replace(Ue,"$1")!==(d||o).replace(Ue,"$1")){var S=f+";codecs="+(d||o);n.appendChangeType(a,S)}}}else n.pendingTracks[a]=r[a]}),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},u.appendChangeType=function(e,r){var n=this,i=this.operationQueue,a={execute:function(){var t=n.sourceBuffer[e];t&&(I.b.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+r),t.changeType(r)),i.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){I.b.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}};i.append(a,e)},u.onBufferAppending=function(e,r){var n=this,i=this.hls,a=this.operationQueue,t=this.tracks,s=r.data,o=r.type,d=r.frag,f=r.part,S=r.chunkMeta,D=S.buffering[o],k=self.performance.now();D.start=k;var F=d.stats.buffering,K=f?f.stats.buffering:null;F.start===0&&(F.start=k),K&&K.start===0&&(K.start=k);var U=t.audio,fe=o==="audio"&&S.id===1&&U?.container==="audio/mpeg",le={execute:function(){if(D.executeStart=self.performance.now(),fe){var se=n.sourceBuffer[o];if(se){var oe=d.start-se.timestampOffset;Math.abs(oe)>=.1&&(I.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+oe+") sn: "+d.sn+")"),se.timestampOffset=d.start)}}n.appendExecutor(s,o)},onStart:function(){},onComplete:function(){var se=self.performance.now();D.executeEnd=D.end=se,F.first===0&&(F.first=se),K&&K.first===0&&(K.first=se);var oe=n.sourceBuffer,me={};for(var Te in oe)me[Te]=Ne.getBuffered(oe[Te]);n.appendError=0,n.hls.trigger(c.a.BUFFER_APPENDED,{type:o,frag:d,part:f,chunkMeta:S,parent:d.type,timeRanges:me})},onError:function(se){I.b.error("[buffer-controller]: Error encountered while trying to append to the "+o+" SourceBuffer",se);var oe={type:B.b.MEDIA_ERROR,parent:d.type,details:B.a.BUFFER_APPEND_ERROR,err:se,fatal:!1};se.code===DOMException.QUOTA_EXCEEDED_ERR?oe.details=B.a.BUFFER_FULL_ERROR:(n.appendError++,oe.details=B.a.BUFFER_APPEND_ERROR,n.appendError>i.config.appendErrorMaxRetry&&(I.b.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),oe.fatal=!0)),i.trigger(c.a.ERROR,oe)}};a.append(le,o)},u.onBufferFlushing=function(e,r){var n=this,i=this.operationQueue,a=function(t){return{execute:n.removeExecutor.bind(n,t,r.startOffset,r.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(c.a.BUFFER_FLUSHED,{type:t})},onError:function(s){I.b.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",s)}}};r.type?i.append(a(r.type),r.type):this.getSourceBufferTypes().forEach(function(t){i.append(a(t),t)})},u.onFragParsed=function(e,r){var n=this,i=r.frag,a=r.part,t=[],s=a?a.elementaryStreams:i.elementaryStreams;s[q.a.AUDIOVIDEO]?t.push("audiovideo"):(s[q.a.AUDIO]&&t.push("audio"),s[q.a.VIDEO]&&t.push("video")),t.length===0&&I.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers(function(){var o=self.performance.now();i.stats.buffering.end=o,a&&(a.stats.buffering.end=o);var d=a?a.stats:i.stats;n.hls.trigger(c.a.FRAG_BUFFERED,{frag:i,part:a,stats:d,id:i.type})},t)},u.onFragChanged=function(e,r){this.flushBackBuffer()},u.onBufferEos=function(e,r){var n=this;this.getSourceBufferTypes().reduce(function(i,a){var t=n.sourceBuffer[a];return r.type&&r.type!==a||t&&!t.ended&&(t.ended=!0,I.b.log("[buffer-controller]: "+a+" sourceBuffer now EOS")),i&&!(t&&!t.ended)},!0)&&this.blockBuffers(function(){var i=n.mediaSource;i&&i.readyState==="open"&&i.endOfStream()})},u.onLevelUpdated=function(e,r){var n=r.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},u.flushBackBuffer=function(){var e=this.hls,r=this.details,n=this.media,i=this.sourceBuffer;if(n&&r!==null){var a=this.getSourceBufferTypes();if(a.length){var t=r.live&&e.config.liveBackBufferLength!==null?e.config.liveBackBufferLength:e.config.backBufferLength;if(Object(T.a)(t)&&!(t<0)){var s=n.currentTime,o=r.levelTargetDuration,d=Math.max(t,o),f=Math.floor(s/o)*o-d;a.forEach(function(S){var D=i[S];if(D){var k=Ne.getBuffered(D);k.length>0&&f>k.start(0)&&(e.trigger(c.a.BACK_BUFFER_REACHED,{bufferEnd:f}),r.live&&e.trigger(c.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:f}),e.trigger(c.a.BUFFER_FLUSHING,{startOffset:0,endOffset:f,type:S}))}})}}}},u.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&this.mediaSource.readyState==="open"){var e=this.details,r=this.hls,n=this.media,i=this.mediaSource,a=e.fragments[0].start+e.totalduration,t=n.duration,s=Object(T.a)(i.duration)?i.duration:0;e.live&&r.config.liveDurationInfinity?(I.b.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(a>s&&a>t||!Object(T.a)(t))&&(I.b.log("[buffer-controller]: Updating Media Source duration to "+a.toFixed(3)),i.duration=a)}},u.updateSeekableRange=function(e){var r=this.mediaSource,n=e.fragments;if(n.length&&e.live&&r!=null&&r.setLiveSeekableRange){var i=Math.max(0,n[0].start),a=Math.max(i,i+e.totalduration);r.setLiveSeekableRange(i,a)}},u.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,r=this.operationQueue,n=this.pendingTracks,i=Object.keys(n).length;if(i&&!e||i===2){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(a.length===0)return void this.hls.trigger(c.a.ERROR,{type:B.b.MEDIA_ERROR,details:B.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach(function(t){r.executeNext(t)})}},u.createSourceBuffers=function(e){var r=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var i=0;for(var a in e)if(!r[a]){var t=e[a];if(!t)throw Error("source buffer exists for track "+a+", however track does not");var s=t.levelCodec||t.codec,o=t.container+";codecs="+s;I.b.log("[buffer-controller]: creating sourceBuffer("+o+")");try{var d=r[a]=n.addSourceBuffer(o),f=a;this.addBufferListener(f,"updatestart",this._onSBUpdateStart),this.addBufferListener(f,"updateend",this._onSBUpdateEnd),this.addBufferListener(f,"error",this._onSBUpdateError),this.tracks[a]={buffer:d,codec:s,container:t.container,levelCodec:t.levelCodec,id:t.id},i++}catch(S){I.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+S.message),this.hls.trigger(c.a.ERROR,{type:B.b.MEDIA_ERROR,details:B.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:S,mimeType:o})}}i&&this.hls.trigger(c.a.BUFFER_CREATED,{tracks:this.tracks})},u._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},u._onSBUpdateEnd=function(e){var r=this.operationQueue;r.current(e).onComplete(),r.shiftAndExecuteNext(e)},u._onSBUpdateError=function(e,r){I.b.error("[buffer-controller]: "+e+" SourceBuffer error",r),this.hls.trigger(c.a.ERROR,{type:B.b.MEDIA_ERROR,details:B.a.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(e);n&&n.onError(r)},u.removeExecutor=function(e,r,n){var i=this.media,a=this.mediaSource,t=this.operationQueue,s=this.sourceBuffer[e];if(!i||!a||!s)return I.b.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void t.shiftAndExecuteNext(e);var o=Object(T.a)(i.duration)?i.duration:1/0,d=Object(T.a)(a.duration)?a.duration:1/0,f=Math.max(0,r),S=Math.min(n,o,d);S>f?(I.b.log("[buffer-controller]: Removing ["+f+","+S+"] from the "+e+" SourceBuffer"),s.remove(f,S)):t.shiftAndExecuteNext(e)},u.appendExecutor=function(e,r){var n=this.operationQueue,i=this.sourceBuffer[r];if(!i)return I.b.warn("[buffer-controller]: Attempting to append to the "+r+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(r);i.ended=!1,i.appendBuffer(e)},u.blockBuffers=function(e,r){var n=this;if(r===void 0&&(r=this.getSourceBufferTypes()),!r.length)return I.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(e);var i=this.operationQueue,a=r.map(function(t){return i.appendBlocker(t)});Promise.all(a).then(function(){e(),r.forEach(function(t){var s=n.sourceBuffer[t];s&&s.updating||i.shiftAndExecuteNext(t)})})},u.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},u.addBufferListener=function(e,r,n){var i=this.sourceBuffer[e];if(i){var a=n.bind(this,e);this.listeners[e].push({event:r,listener:a}),i.addEventListener(r,a)}},u.removeBufferListeners=function(e){var r=this.sourceBuffer[e];r&&this.listeners[e].forEach(function(n){r.removeEventListener(n.event,n.listener)})},p}();function Ie(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var Qe=function(){function p(i){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=i,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var u,e,r,n=p.prototype;return n.setStreamController=function(i){this.streamController=i},n.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},n.registerListeners=function(){var i=this.hls;i.on(c.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),i.on(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this),i.on(c.a.MANIFEST_PARSED,this.onManifestParsed,this),i.on(c.a.BUFFER_CODECS,this.onBufferCodecs,this),i.on(c.a.MEDIA_DETACHING,this.onMediaDetaching,this)},n.unregisterListener=function(){var i=this.hls;i.off(c.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),i.off(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this),i.off(c.a.MANIFEST_PARSED,this.onManifestParsed,this),i.off(c.a.BUFFER_CODECS,this.onBufferCodecs,this),i.off(c.a.MEDIA_DETACHING,this.onMediaDetaching,this)},n.onFpsDropLevelCapping=function(i,a){p.isLevelAllowed(a.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(a.droppedLevel)},n.onMediaAttaching=function(i,a){this.media=a.media instanceof HTMLVideoElement?a.media:null},n.onManifestParsed=function(i,a){var t=this.hls;this.restrictedLevels=[],this.firstLevel=a.firstLevel,t.config.capLevelToPlayerSize&&a.video&&this.startCapping()},n.onBufferCodecs=function(i,a){this.hls.config.capLevelToPlayerSize&&a.video&&this.startCapping()},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var i=this.hls.levels;if(i.length){var a=this.hls;a.autoLevelCapping=this.getMaxLevel(i.length-1),a.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=a.autoLevelCapping}}},n.getMaxLevel=function(i){var a=this,t=this.hls.levels;if(!t.length)return-1;var s=t.filter(function(o,d){return p.isLevelAllowed(d,a.restrictedLevels)&&d<=i});return this.clientRect=null,p.getMaxLevelByMediaSize(s,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},n.getDimensions=function(){if(this.clientRect)return this.clientRect;var i=this.media,a={width:0,height:0};if(i){var t=i.getBoundingClientRect();a.width=t.width,a.height=t.height,a.width||a.height||(a.width=t.right-t.left||i.width||0,a.height=t.bottom-t.top||i.height||0)}return this.clientRect=a,a},p.isLevelAllowed=function(i,a){return a===void 0&&(a=[]),a.indexOf(i)===-1},p.getMaxLevelByMediaSize=function(i,a,t){if(!i||!i.length)return-1;for(var s,o,d=i.length-1,f=0;f<i.length;f+=1){var S=i[f];if((S.width>=a||S.height>=t)&&(s=S,!(o=i[f+1])||s.width!==o.width||s.height!==o.height)){d=f;break}}return d},u=p,r=[{key:"contentScaleFactor",get:function(){var i=1;try{i=self.devicePixelRatio}catch{}return i}}],(e=[{key:"mediaWidth",get:function(){return this.getDimensions().width*p.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*p.contentScaleFactor}}])&&Ie(u.prototype,e),r&&Ie(u,r),p}(),Nt=function(){function p(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var u=p.prototype;return u.setStreamController=function(e){this.streamController=e},u.registerListeners=function(){this.hls.on(c.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},u.unregisterListeners=function(){this.hls.off(c.a.MEDIA_ATTACHING,this.onMediaAttaching)},u.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},u.onMediaAttaching=function(e,r){var n=this.hls.config;if(n.capLevelOnFPSDrop){var i=r.media instanceof self.HTMLVideoElement?r.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},u.checkFPS=function(e,r,n){var i=performance.now();if(r){if(this.lastTime){var a=i-this.lastTime,t=n-this.lastDroppedFrames,s=r-this.lastDecodedFrames,o=1e3*t/a,d=this.hls;if(d.trigger(c.a.FPS_DROP,{currentDropped:t,currentDecoded:s,totalDroppedFrames:n}),o>0&&t>d.config.fpsDroppedMonitoringThreshold*s){var f=d.currentLevel;I.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=f)&&(f-=1,d.trigger(c.a.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:d.currentLevel}),d.autoLevelCapping=f,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=r}},u.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var r=e.getVideoPlaybackQuality();this.checkFPS(e,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},p}(),ft=b(12),Bt=/^age:\s*[\d.]+\s*$/m,ht=function(){function p(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new ft.a,this.retryDelay=0}var u=p.prototype;return u.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},u.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))},u.abort=function(){var e;this.abortInternal(),(e=this.callbacks)!==null&&e!==void 0&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},u.load=function(e,r,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=r,this.callbacks=n,this.retryDelay=r.retryDelay,this.loadInternal()},u.loadInternal=function(){var e=this.config,r=this.context;if(e){var n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0;var a=this.xhrSetup;try{if(a)try{a(n,r.url)}catch{n.open("GET",r.url,!0),a(n,r.url)}n.readyState||n.open("GET",r.url,!0);var t=this.context.headers;if(t)for(var s in t)n.setRequestHeader(s,t[s])}catch(o){return void this.callbacks.onError({code:n.status,text:o.message},r,n)}r.rangeEnd&&n.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=r.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),n.send()}},u.readystatechange=function(){var e=this.context,r=this.loader,n=this.stats;if(e&&r){var i=r.readyState,a=this.config;if(!n.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),i===4){r.onreadystatechange=null,r.onprogress=null;var t=r.status;if(t>=200&&t<300){var s,o;if(n.loading.end=Math.max(self.performance.now(),n.loading.first),o=e.responseType==="arraybuffer"?(s=r.response).byteLength:(s=r.responseText).length,n.loaded=n.total=o,!this.callbacks)return;var d=this.callbacks.onProgress;if(d&&d(n,e,s,r),!this.callbacks)return;var f={url:r.responseURL,data:s};this.callbacks.onSuccess(f,n,e,r)}else n.retry>=a.maxRetry||t>=400&&t<499?(I.b.error(t+" while loading "+e.url),this.callbacks.onError({code:t,text:r.statusText},e,r)):(I.b.warn(t+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},u.loadtimeout=function(){I.b.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},u.loadprogress=function(e){var r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total)},u.getCacheAge=function(){var e=null;if(this.loader&&Bt.test(this.loader.getAllResponseHeaders())){var r=this.loader.getResponseHeader("age");e=r?parseFloat(r):null}return e},p}(),Lt=b(16);function yt(p){var u=typeof Map=="function"?new Map:void 0;return(yt=function(e){if(e===null||(r=e,Function.toString.call(r).indexOf("[native code]")===-1))return e;var r;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(e))return u.get(e);u.set(e,n)}function n(){return rt(e,arguments,Ut(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),At(n,e)})(p)}function rt(p,u,e){return(rt=it()?Reflect.construct:function(r,n,i){var a=[null];a.push.apply(a,n);var t=new(Function.bind.apply(r,a));return i&&At(t,i.prototype),t}).apply(null,arguments)}function it(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function At(p,u){return(At=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(p,u)}function Ut(p){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(p)}function Dt(){return(Dt=Object.assign||function(p){for(var u=1;u<arguments.length;u++){var e=arguments[u];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(p[r]=e[r])}return p}).apply(this,arguments)}var Ht=function(){function p(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Wt,this.controller=new self.AbortController,this.stats=new ft.a}var u=p.prototype;return u.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},u.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},u.abort=function(){var e;this.abortInternal(),(e=this.callbacks)!==null&&e!==void 0&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},u.load=function(e,r,n){var i=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var t=function(f,S){var D={method:"GET",mode:"cors",credentials:"same-origin",signal:S,headers:new self.Headers(Dt({},f.headers))};return f.rangeEnd&&D.headers.set("Range","bytes="+f.rangeStart+"-"+String(f.rangeEnd-1)),D}(e,this.controller.signal),s=n.onProgress,o=e.responseType==="arraybuffer",d=o?"byteLength":"length";this.context=e,this.config=r,this.callbacks=n,this.request=this.fetchSetup(e,t),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){i.abortInternal(),n.onTimeout(a,e,i.response)},r.timeout),self.fetch(this.request).then(function(f){if(i.response=i.loader=f,!f.ok){var S=f.status,D=f.statusText;throw new or(D||"fetch, bad network response",S,f)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(f.headers.get("Content-Length")||"0"),s&&Object(T.a)(r.highWaterMark)?i.loadProgressively(f,a,e,r.highWaterMark,s):o?f.arrayBuffer():f.text()}).then(function(f){var S=i.response;self.clearTimeout(i.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first),a.loaded=a.total=f[d];var D={url:S.url,data:f};s&&!Object(T.a)(r.highWaterMark)&&s(a,e,f,S),n.onSuccess(D,a,e,S)}).catch(function(f){if(self.clearTimeout(i.requestTimeout),!a.aborted){var S=f.code||0;n.onError({code:S,text:f.message},e,f.details)}})},u.getCacheAge=function(){var e=null;if(this.response){var r=this.response.headers.get("age");e=r?parseFloat(r):null}return e},u.loadProgressively=function(e,r,n,i,a){i===void 0&&(i=0);var t=new Lt.a,s=e.body.getReader();return function o(){return s.read().then(function(d){if(d.done)return t.dataLength&&a(r,n,t.flush(),e),Promise.resolve(new ArrayBuffer(0));var f=d.value,S=f.length;return r.loaded+=S,S<i||t.dataLength?(t.push(f),t.dataLength>=i&&a(r,n,t.flush(),e)):a(r,n,f,e),o()}).catch(function(){return Promise.reject()})}()},p}();function Wt(p,u){return new self.Request(p.url,u)}var bt,or=function(p){var u,e;function r(n,i,a){var t;return(t=p.call(this,n)||this).code=void 0,t.details=void 0,t.code=i,t.details=a,t}return e=p,(u=r).prototype=Object.create(e.prototype),u.prototype.constructor=u,At(u,e),r}(yt(Error)),lr=Ht;(function(p){p.WIDEVINE="com.widevine.alpha",p.PLAYREADY="com.microsoft.playready"})(bt||(bt={}));var qt=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Or(){return(Or=Object.assign||function(p){for(var u=1;u<arguments.length;u++){var e=arguments[u];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(p[r]=e[r])}return p}).apply(this,arguments)}function Yt(p,u){var e=Object.keys(p);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(p);u&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(p,n).enumerable})),e.push.apply(e,r)}return e}function Ir(p){for(var u=1;u<arguments.length;u++){var e=arguments[u]!=null?arguments[u]:{};u%2?Yt(Object(e),!0).forEach(function(r){Pr(p,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(e)):Yt(Object(e)).forEach(function(r){Object.defineProperty(p,r,Object.getOwnPropertyDescriptor(e,r))})}return p}function Pr(p,u,e){return u in p?Object.defineProperty(p,u,{value:e,enumerable:!0,configurable:!0,writable:!0}):p[u]=e,p}var tn=Ir(Ir({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:ht,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Oe,bufferController:ze,capLevelController:Qe,fpsController:Nt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:qt,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:Ye.a,enableCEA708Captions:!1,enableWebVTT:!1,enableIMSC1:!1,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0,cmcdController:void 0});function ur(p){var u=p.loader;u!==lr&&u!==ht?(I.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),p.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}()&&(p.loader=lr,p.progressive=!0,p.enableSoftwareAES=!0,I.b.log("[config]: Progressive streaming enabled, using FetchLoader"))}function dr(p,u){for(var e=0;e<u.length;e++){var r=u[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(p,r.key,r)}}var Fr=function(){function p(i){i===void 0&&(i={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new ve.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var a=this.config=function(Te,ge){if((ge.liveSyncDurationCount||ge.liveMaxLatencyDurationCount)&&(ge.liveSyncDuration||ge.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(ge.liveMaxLatencyDurationCount!==void 0&&(ge.liveSyncDurationCount===void 0||ge.liveMaxLatencyDurationCount<=ge.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(ge.liveMaxLatencyDuration!==void 0&&(ge.liveSyncDuration===void 0||ge.liveMaxLatencyDuration<=ge.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Or({},Te,ge)}(p.DefaultConfig,i);this.userConfig=i,Object(I.a)(a.debug),this._autoLevelCapping=-1,a.progressive&&ur(a);var t=a.abrController,s=a.bufferController,o=a.capLevelController,d=a.fpsController,f=this.abrController=new t(this),S=this.bufferController=new s(this),D=this.capLevelController=new o(this),k=new d(this),F=new Le(this),K=new Se(this),U=new je(this),fe=this.levelController=new mt(this),le=new Ze(this),se=this.streamController=new _e(this,le);D.setStreamController(se),k.setStreamController(se);var oe=[fe,se];this.networkControllers=oe;var me=[F,K,f,S,D,k,U,le];this.audioTrackController=this.createController(a.audioTrackController,null,oe),this.createController(a.audioStreamController,le,oe),this.subtitleTrackController=this.createController(a.subtitleTrackController,null,oe),this.createController(a.subtitleStreamController,le,oe),this.createController(a.timelineController,null,me),this.emeController=this.createController(a.emeController,null,me),this.cmcdController=this.createController(a.cmcdController,null,me),this.latencyController=this.createController(He,null,me),this.coreComponents=me}p.isSupported=function(){return function(){var i=$();if(!i)return!1;var a=te(),t=i&&typeof i.isTypeSupported=="function"&&i.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!a||a.prototype&&typeof a.prototype.appendBuffer=="function"&&typeof a.prototype.remove=="function";return!!t&&!!s}()};var u,e,r,n=p.prototype;return n.createController=function(i,a,t){if(i){var s=a?new i(this,a):new i(this);return t&&t.push(s),s}return null},n.on=function(i,a,t){t===void 0&&(t=this),this._emitter.on(i,a,t)},n.once=function(i,a,t){t===void 0&&(t=this),this._emitter.once(i,a,t)},n.removeAllListeners=function(i){this._emitter.removeAllListeners(i)},n.off=function(i,a,t,s){t===void 0&&(t=this),this._emitter.off(i,a,t,s)},n.listeners=function(i){return this._emitter.listeners(i)},n.emit=function(i,a,t){return this._emitter.emit(i,a,t)},n.trigger=function(i,a){if(this.config.debug)return this.emit(i,i,a);try{return this.emit(i,i,a)}catch(t){I.b.error("An internal error happened while handling event "+i+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(c.a.ERROR,{type:B.b.OTHER_ERROR,details:B.a.INTERNAL_EXCEPTION,fatal:!1,event:i,error:t})}return!1},n.listenerCount=function(i){return this._emitter.listenerCount(i)},n.destroy=function(){I.b.log("destroy"),this.trigger(c.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(i){return i.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(i){return i.destroy()}),this.coreComponents.length=0},n.attachMedia=function(i){I.b.log("attachMedia"),this._media=i,this.trigger(c.a.MEDIA_ATTACHING,{media:i})},n.detachMedia=function(){I.b.log("detachMedia"),this.trigger(c.a.MEDIA_DETACHING,void 0),this._media=null},n.loadSource=function(i){this.stopLoad();var a=this.media,t=this.url,s=this.url=_.buildAbsoluteURL(self.location.href,i,{alwaysNormalize:!0});I.b.log("loadSource:"+s),a&&t&&t!==s&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(a)),this.trigger(c.a.MANIFEST_LOADING,{url:i})},n.startLoad=function(i){i===void 0&&(i=-1),I.b.log("startLoad("+i+")"),this.networkControllers.forEach(function(a){a.startLoad(i)})},n.stopLoad=function(){I.b.log("stopLoad"),this.networkControllers.forEach(function(i){i.stopLoad()})},n.swapAudioCodec=function(){I.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){I.b.log("recoverMediaError");var i=this._media;this.detachMedia(),i&&this.attachMedia(i)},n.removeLevel=function(i,a){a===void 0&&(a=0),this.levelController.removeLevel(i,a)},u=p,r=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return c.a}},{key:"ErrorTypes",get:function(){return B.b}},{key:"ErrorDetails",get:function(){return B.a}},{key:"DefaultConfig",get:function(){return p.defaultConfig?p.defaultConfig:tn},set:function(i){p.defaultConfig=i}}],(e=[{key:"levels",get:function(){var i=this.levelController.levels;return i||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(i){I.b.log("set currentLevel:"+i),this.loadLevel=i,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(i){I.b.log("set nextLevel:"+i),this.levelController.manualLevel=i,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(i){I.b.log("set loadLevel:"+i),this.levelController.manualLevel=i}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(i){this.levelController.nextLoadLevel=i}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(i){I.b.log("set firstLevel:"+i),this.levelController.firstLevel=i}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(i){I.b.log("set startLevel:"+i),i!==-1&&(i=Math.max(i,this.minAutoLevel)),this.levelController.startLevel=i}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(i){var a=!!i;a!==this.config.capLevelToPlayerSize&&(a?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=a)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(i){this._autoLevelCapping!==i&&(I.b.log("set autoLevelCapping:"+i),this._autoLevelCapping=i)}},{key:"bandwidthEstimate",get:function(){var i=this.abrController.bwEstimator;return i?i.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var i=this.levels,a=this.config.minAutoBitrate;if(!i)return 0;for(var t=i.length,s=0;s<t;s++)if(i[s].maxBitrate>a)return s;return 0}},{key:"maxAutoLevel",get:function(){var i=this.levels,a=this.autoLevelCapping;return a===-1&&i&&i.length?i.length-1:a}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(i){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,i)}},{key:"audioTracks",get:function(){var i=this.audioTrackController;return i?i.audioTracks:[]}},{key:"audioTrack",get:function(){var i=this.audioTrackController;return i?i.audioTrack:-1},set:function(i){var a=this.audioTrackController;a&&(a.audioTrack=i)}},{key:"subtitleTracks",get:function(){var i=this.subtitleTrackController;return i?i.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var i=this.subtitleTrackController;return i?i.subtitleTrack:-1},set:function(i){var a=this.subtitleTrackController;a&&(a.subtitleTrack=i)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var i=this.subtitleTrackController;return!!i&&i.subtitleDisplay},set:function(i){var a=this.subtitleTrackController;a&&(a.subtitleDisplay=i)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(i){this.config.lowLatencyMode=i}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&dr(u.prototype,e),r&&dr(u,r),p}();Fr.defaultConfig=void 0}]).default})})(Gn);var Gr=xi(Gn.exports);const jn=Symbol("store-raw"),Hr=Symbol("store-node"),ki=Symbol("store-name");function Kn(h,y){let E=h[$t];if(!E){Object.defineProperty(h,$t,{value:E=new Proxy(h,Oi)});const A=Object.keys(h),b=Object.getOwnPropertyDescriptors(h);for(let _=0,T=A.length;_<T;_++){const c=A[_];if(b[c].get){const B=b[c].get.bind(E);Object.defineProperty(h,c,{get:B})}}}return E}function Wr(h){return h!=null&&typeof h=="object"&&(h[$t]||!h.__proto__||h.__proto__===Object.prototype||Array.isArray(h))}function qr(h,y=new Set){let E,A,b,_;if(E=h!=null&&h[jn])return E;if(!Wr(h)||y.has(h))return h;if(Array.isArray(h)){Object.isFrozen(h)?h=h.slice(0):y.add(h);for(let T=0,c=h.length;T<c;T++)b=h[T],(A=qr(b,y))!==b&&(h[T]=A)}else{Object.isFrozen(h)?h=Object.assign({},h):y.add(h);const T=Object.keys(h),c=Object.getOwnPropertyDescriptors(h);for(let B=0,I=T.length;B<I;B++)_=T[B],!c[_].get&&(b=h[_],(A=qr(b,y))!==b&&(h[_]=A))}return h}function Yr(h){let y=h[Hr];return y||Object.defineProperty(h,Hr,{value:y={}}),y}function wi(h,y){const E=Reflect.getOwnPropertyDescriptor(h,y);return!E||E.get||!E.configurable||y===$t||y===Hr||y===ki||(delete E.value,delete E.writable,E.get=()=>h[$t][y]),E}function Ci(h){if(wn()){const y=Yr(h);(y._||(y._=ln()))()}return Reflect.ownKeys(h)}function ln(){const[h,y]=xn(void 0,{equals:!1,internal:!0});return h.$=y,h}const Oi={get(h,y,E){if(y===jn)return h;if(y===$t)return E;const A=h[y];if(y===Hr||y==="__proto__")return A;const b=Wr(A);if(wn()&&(typeof A!="function"||h.hasOwnProperty(y))){let _,T;b&&(_=Yr(A))&&(T=_._||(_._=ln()),T()),_=Yr(h),T=_[y]||(_[y]=ln()),T()}return b?Kn(A):A},set(){return!0},deleteProperty(){return!0},ownKeys:Ci,getOwnPropertyDescriptor:wi};function Vn(h,y,E){if(h[y]===E)return;const A=Array.isArray(h),b=h.length,_=E===void 0,T=A||_===y in h;_?delete h[y]:h[y]=E;let c=Yr(h),B;(B=c[y])&&B.$(),A&&h.length!==b&&(B=c.length)&&B.$(),T&&(B=c._)&&B.$()}function Ii(h,y){const E=Object.keys(y);for(let A=0;A<E.length;A+=1){const b=E[A];Vn(h,b,y[b])}}function pr(h,y,E=[]){let A,b=h;if(y.length>1){A=y.shift();const T=typeof A,c=Array.isArray(h);if(Array.isArray(A)){for(let B=0;B<A.length;B++)pr(h,[A[B]].concat(y),E);return}else if(c&&T==="function"){for(let B=0;B<h.length;B++)A(h[B],B)&&pr(h,[B].concat(y),E);return}else if(c&&T==="object"){const{from:B=0,to:I=h.length-1,by:X=1}=A;for(let q=B;q<=I;q+=X)pr(h,[q].concat(y),E);return}else if(y.length>1){pr(h[A],y,[A].concat(E));return}b=h[A],E=[A].concat(E)}let _=y[0];typeof _=="function"&&(_=_(b,E),_===b)||A===void 0&&_==null||(_=qr(_),A===void 0||Wr(b)&&Wr(_)&&!Array.isArray(_)?Ii(b,_):Vn(h,A,_))}function Pi(h,y){const E=qr(h||{}),A=Kn(E);function b(..._){kn(()=>pr(E,_))}return[A,b]}const Hn=ai([{volume:100,defaultVolume:100,showUnmuteBanner:!0,panel:!1,controls:!1,fullscreen:!1,hasFullscreenEvents:!1},{}]),Fi=h=>{const[y,E]=Pi({volume:h.volume||100,defaultVolume:h.defaultVolume||100,showUnmuteBanner:h.showUnmuteBanner||!0,panel:!1,controls:!1,fullscreen:!1,hasFullscreenEvents:!1}),A=[y,{setPanel(b){E("panel",b)},setControls(b){E("controls",b)},setFullscreen(b){E("fullscreen",b)},setHasFullscreenEvents(b){E("hasFullscreenEvents",b)},setVolume(b){E("volume",b)},hideUnmuteBanner(){E("showUnmuteBanner",!1)}}];return we(Hn.Provider,{value:A,get children(){return h.children}})},Lr=()=>si(Hn),Mi=xt('<div class="alert bg-gray-900 max-w-xs absolute bottom-0 right-0 z-40"></div>'),Ni=xt('<div class="flex content-center rounded-l-lg"></div>'),Bi=xt('<div class="flex content-center"></div>'),Ui=xt('<div class="flex content-center rounded-r-lg"></div>'),Gi=h=>(()=>{const y=Mi.cloneNode(!0);return kt(y,h,!1,!1),y})(),ji=h=>(()=>{const y=Ni.cloneNode(!0);return kt(y,h,!1,!1),y})(),Ki=h=>(()=>{const y=Bi.cloneNode(!0);return kt(y,h,!1,!1),y})(),Vi=h=>(()=>{const y=Ui.cloneNode(!0);return kt(y,h,!1,!1),y})(),Hi=xt("<button></button>");var Xr=h=>(()=>{const y=Hi.cloneNode(!0);return kt(y,h,!1,!1),_t(()=>y.className=h.color?h.color:"text-white"),y})();const Wi=xt("<svg><use></use></svg>");var zr=h=>(()=>{const y=Wi.cloneNode(!0),E=y.firstChild;return kt(y,h,!0,!0),_t(A=>{const b=`
      ${h.big?"h-16 w-16":"h-8 w-8"}
	  fill-current stroke-current
      inline-block text-center bg-cover
    `,_=`#svg-${h.alt}`;return b!==A._v$&&Bn(y,"class",A._v$=b),_!==A._v$2&&Un(E,"http://www.w3.org/1999/xlink","xlink:href",A._v$2=_),A},{_v$:void 0,_v$2:void 0}),y})(),qi=()=>{const[h,{setFullscreen:y,setHasFullscreenEvents:E}]=Lr(),A=document.getElementById("screen"),b=()=>{y(!0),A.requestFullscreen()},_=()=>document.exitFullscreen(),T=()=>{!document.webkitIsFullScreen&&!document.mozFullScreen&&!document.msFullscreenElement&&y(!1)};return h.hasFullscreenEvents||(document.addEventListener("fullscreenchange",T,!1),document.addEventListener("mozfullscreenchange",T,!1),document.addEventListener("MSFullscreenChange",T,!1),document.addEventListener("webkitfullscreenchange",T,!1),E(!0)),we(di,{get children(){return[we(bn,{get when(){return h.fullscreen},get children(){return we(Xr,{onClick:_,get children(){return we(zr,{alt:"unfullscreen"})}})}}),we(bn,{get when(){return!h.fullscreen},get children(){return we(Xr,{onClick:b,get children(){return we(zr,{alt:"fullscreen"})}})}})]}})},Yi=()=>{const[h,{setVolume:y}]=Lr(),E=document.getElementById("video");let A=h.defaultVolume;const b=()=>{E.muted?(y(A),E.muted=!1,E.volume=A/100):(h.volume>0?A=h.volume:A=h.defaultVolume,y(0),E.muted=!0,E.volume=0)};return[we(br,{get when(){return h.volume>0},get children(){return we(Xr,{onClick:b,get children(){return we(zr,{alt:"unmuted"})}})}}),we(br,{get when(){return h.volume==0},get children(){return we(Xr,{color:"text-gray-400",onClick:b,get children(){return we(zr,{alt:"muted"})}})}})]};const Xi=xt("<div></div>");var Wn=h=>(()=>{const y=Xi.cloneNode(!0);return kt(y,h,!1,!1),_t(()=>y.className=`
      ${h.color?h.color:"text-white"}
      justify-center text-3xl my-auto max-w-xs
      alert bg-gray-900 select-none
    `),y})();const zi=xt(`<div class="
      fixed inset-x-0 inset-y-0 overflow-hidden
      flex justify-center z-50
    "></div>`);var qn=h=>(()=>{const y=zi.cloneNode(!0);return kt(y,h,!1,!1),y})(),$i=()=>{const[h,{hideUnmuteBanner:y,setVolume:E}]=Lr(),A=document.getElementById("video");return we(qn,{onClick:()=>{y(),E(h.defaultVolume),A.muted=!1,A.volume=h.defaultVolume/100,document.body.style.cursor="none"},get children(){return we(Wn,{children:"click to unmute"})}})};const Qi=xt('<input type="range" max="100" class="range range-lg">');var Ji=h=>(()=>{const y=Qi.cloneNode(!0);return kt(y,h,!1,!1),y})(),Zi=()=>{const[h,{setVolume:y}]=Lr(),E=document.getElementById("video");let A;const b=()=>{y(A.value),E.volume=A.value/100,E.muted=E.volume==0};return we(Ji,{ref(_){const T=A;typeof T=="function"?T(_):A=_},type:"range",step:"1",get value(){return h.volume},min:"0",max:"100",onChange:b,onInput:b})},ea=()=>{const[h,{setPanel:y,setControls:E}]=Lr();let A=!1,b=!1;return document.body.onmousemove=()=>{h.showUnmuteBanner||(A||(A=!0,document.body.style.cursor="",setTimeout(()=>{A=!1,document.body.style.cursor||(document.body.style.cursor="none")},1500)),b||(b=!0,E(!0),setTimeout(()=>{b=!1,h.panel||E(!1)},1500)))},[we(br,{get when(){return h.showUnmuteBanner},get children(){return we($i,{})}}),we(br,{get when(){return h.controls},get children(){return we(Gi,{onMouseOver:()=>y(!0),onMouseOut:()=>y(!1),get children(){return[we(ji,{get children(){return we(Yi,{})}}),we(Ki,{get children(){return we(Zi,{})}}),we(Vi,{get children(){return we(qi,{})}})]}})}})]},ta=()=>we(qn,{get children(){return we(Wn,{children:"reconnecting"})}});const ra="/hls/stream.m3u8",na={debug:"NODE_ENV=development vite",build:"NODE_ENV=production vite build",format:"prettier --write .",lint:"eslint --fix ."},ia={"@sergeymakinen/vite-plugin-html-minimize":"^1.0.2",autoprefixer:"^10.4.4",daisyui:"^2.14.3",eslint:"^8.13.0","eslint-config-prettier":"^8.5.0","eslint-plugin-eqeqeq-fix":"^1.0.3","eslint-plugin-react":"^7.29.4","postcss-import":"^14.1.0","postcss-nested":"^5.0.6",prettier:"^2.6.2",tailwindcss:"^3.0.24",vite:"^2.9.5","vite-plugin-compression":"^0.5.1","vite-plugin-singlefile":"^0.7.2","vite-plugin-solid":"^2.2.6","vite-plugin-svgprep":"^0.9.9"},aa={"hls.js":"^1.1.5","solid-js":"^1.3.14"};var sa={endpoint:ra,private:!0,scripts:na,devDependencies:ia,dependencies:aa};const[oa,Rn]=xn(!1),la=()=>[we(br,{get when(){return oa()},get children(){return we(ta,{})}}),we(Fi,{get children(){return we(ea,{})}})];let vt;const ua=!/^((?!chrome|android).)*safari/i.test(navigator.userAgent),da=document.getElementById("video"),Yn=()=>{let h=`${window.location}${sa.endpoint}`;const y=new URLSearchParams(window.location.search);y.get("url")!=null&&(h=y.get("url")),vt=new Gr({defaultAudioCodec:"mp4a.40.2",autoStartLoad:!1,liveDurationInfinity:!0}),vt.attachMedia(da),vt.on(Gr.Events.ERROR,async(E,A)=>{A.details==="manifestLoadError"||A.details==="levelLoadError"?(await fa(1e3),vt.loadSource(h)):(Rn(!0),vt.destroy())}),vt.on(Gr.Events.MANIFEST_LOADED,async(E,A)=>{if(Rn(!1),ua){const b=Number(A.networkDetails.response.match(/stream-[0-9]+.ts/)[0].match(/[0-9]+/)[0]),_=await ha(b);_!==0?vt.startLoad(_):vt.startLoad()}else vt.startLoad()}),vt.on(Gr.Events.DESTROYING,()=>Yn()),vt.loadSource(h)},fa=h=>new Promise(y=>setTimeout(y,h)),ha=h=>fetch("/sync",{}).then(y=>y.text()).then(y=>isNaN(y)?0:Number(y)).then(y=>y!==0?Math.round(y-15-h/1e3):0);Yn();yi(la,document.getElementById("screen"));</script><style>*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:after,:before{--tw-content:""}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input:-ms-input-placeholder,textarea:-ms-input-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}:root,[data-theme]{background-color:hsla(var(--b1) / var(--tw-bg-opacity,1));color:hsla(var(--bc) / var(--tw-text-opacity,1))}html{-webkit-tap-highlight-color:transparent}:root{--p:259 94% 51%;--pf:259 94% 41%;--sf:314 100% 38%;--af:174 60% 41%;--nf:219 14% 22%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:0 0% 100%;--s:314 100% 47%;--sc:0 0% 100%;--a:174 60% 51%;--ac:175 44% 15%;--n:219 14% 28%;--nc:0 0% 100%;--b1:0 0% 100%;--b2:0 0% 95%;--b3:180 2% 90%;--bc:215 28% 17%}@media (prefers-color-scheme:dark){:root{--p:262 80% 50%;--pf:262 80% 40%;--sf:316 70% 40%;--af:175 70% 33%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:0 0% 100%;--s:316 70% 50%;--sc:0 0% 100%;--a:175 70% 41%;--ac:0 0% 100%;--n:218 18% 12%;--nf:223 17% 8%;--nc:220 13% 69%;--b1:220 18% 20%;--b2:220 17% 17%;--b3:219 18% 15%;--bc:220 13% 69%}}[data-theme=light]{--p:259 94% 51%;--pf:259 94% 41%;--sf:314 100% 38%;--af:174 60% 41%;--nf:219 14% 22%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:0 0% 100%;--s:314 100% 47%;--sc:0 0% 100%;--a:174 60% 51%;--ac:175 44% 15%;--n:219 14% 28%;--nc:0 0% 100%;--b1:0 0% 100%;--b2:0 0% 95%;--b3:180 2% 90%;--bc:215 28% 17%}[data-theme=dark]{--p:262 80% 50%;--pf:262 80% 40%;--sf:316 70% 40%;--af:175 70% 33%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:0 0% 100%;--s:316 70% 50%;--sc:0 0% 100%;--a:175 70% 41%;--ac:0 0% 100%;--n:218 18% 12%;--nf:223 17% 8%;--nc:220 13% 69%;--b1:220 18% 20%;--b2:220 17% 17%;--b3:219 18% 15%;--bc:220 13% 69%}[data-theme=cupcake]{--p:183 47% 59%;--pf:183 47% 47%;--sf:338 71% 62%;--af:39 84% 46%;--nf:280 46% 11%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--pc:183 100% 12%;--sc:338 100% 16%;--ac:39 100% 12%;--nc:280 83% 83%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--s:338 71% 78%;--a:39 84% 58%;--n:280 46% 14%;--b1:24 33% 97%;--b2:27 22% 92%;--b3:22 14% 89%;--bc:280 46% 14%;--rounded-btn:1.9rem;--tab-border:2px;--tab-radius:.5rem}[data-theme=bumblebee]{--p:41 74% 53%;--pf:41 74% 42%;--sf:50 94% 46%;--af:240 33% 11%;--nf:240 33% 11%;--b2:0 0% 90%;--b3:0 0% 81%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--bc:0 0% 20%;--ac:240 60% 83%;--nc:240 60% 83%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:240 33% 14%;--s:50 94% 58%;--sc:240 33% 14%;--a:240 33% 14%;--n:240 33% 14%;--b1:0 0% 100%}[data-theme=emerald]{--p:141 50% 60%;--pf:141 50% 48%;--sf:219 96% 48%;--af:10 81% 45%;--nf:219 20% 20%;--b2:0 0% 90%;--b3:0 0% 81%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--btn-text-case:uppercase;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:151 28% 19%;--s:219 96% 60%;--sc:210 20% 98%;--a:10 81% 56%;--ac:210 20% 98%;--n:219 20% 25%;--nc:210 20% 98%;--b1:0 0% 100%;--bc:219 20% 25%;--animation-btn:0;--animation-input:0;--btn-focus-scale:1}[data-theme=corporate]{--p:229 96% 64%;--pf:229 96% 51%;--sf:215 26% 47%;--af:154 49% 48%;--nf:233 27% 10%;--b2:0 0% 90%;--b3:0 0% 81%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--pc:229 100% 93%;--sc:215 100% 12%;--ac:154 100% 12%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--btn-text-case:uppercase;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:215 26% 59%;--a:154 49% 60%;--n:233 27% 13%;--nc:210 38% 95%;--b1:0 0% 100%;--bc:233 27% 13%;--rounded-box:.25rem;--rounded-btn:.125rem;--rounded-badge:.125rem;--animation-btn:0;--animation-input:0;--btn-focus-scale:1}[data-theme=synthwave]{--p:321 70% 69%;--pf:321 70% 55%;--sf:197 87% 52%;--af:48 89% 46%;--nf:253 61% 15%;--b2:254 59% 23%;--b3:254 59% 21%;--pc:321 100% 14%;--sc:197 100% 13%;--ac:48 100% 11%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:197 87% 65%;--a:48 89% 57%;--n:253 61% 19%;--nc:260 60% 98%;--b1:254 59% 26%;--bc:260 60% 98%;--in:199 87% 64%;--inc:257 63% 17%;--su:168 74% 68%;--suc:257 63% 17%;--wa:48 89% 57%;--wac:257 63% 17%;--er:352 74% 57%;--erc:260 60% 98%}[data-theme=retro]{--p:3 74% 76%;--pf:3 74% 61%;--sf:145 27% 58%;--af:49 67% 61%;--nf:42 17% 34%;--inc:221 100% 91%;--suc:142 100% 87%;--wac:32 100% 9%;--erc:0 100% 90%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:345 5% 15%;--s:145 27% 72%;--sc:345 5% 15%;--a:49 67% 76%;--ac:345 5% 15%;--n:42 17% 42%;--nc:45 47% 80%;--b1:45 47% 80%;--b2:45 37% 72%;--b3:42 36% 65%;--bc:345 5% 15%;--in:221 83% 53%;--su:142 76% 36%;--wa:32 95% 44%;--er:0 72% 51%;--rounded-box:.4rem;--rounded-btn:.4rem;--rounded-badge:.4rem}[data-theme=cyberpunk]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;--pf:345 100% 58%;--sf:195 80% 56%;--af:276 74% 57%;--nf:57 100% 10%;--b2:56 100% 45%;--b3:56 100% 41%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--bc:56 100% 10%;--pc:345 100% 15%;--sc:195 100% 14%;--ac:276 100% 14%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--p:345 100% 73%;--s:195 80% 70%;--a:276 74% 71%;--n:57 100% 13%;--nc:56 100% 50%;--b1:56 100% 50%;--rounded-box:0;--rounded-btn:0;--rounded-badge:0;--tab-radius:0}[data-theme=valentine]{--p:353 74% 67%;--pf:353 74% 54%;--sf:254 86% 61%;--af:181 56% 56%;--nf:336 43% 38%;--b2:318 46% 80%;--b3:318 46% 72%;--pc:353 100% 13%;--sc:254 100% 15%;--ac:181 100% 14%;--inc:221 100% 91%;--suc:142 100% 87%;--wac:32 100% 9%;--erc:0 100% 90%;--rounded-box:1rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:254 86% 77%;--a:181 56% 70%;--n:336 43% 48%;--nc:318 46% 89%;--b1:318 46% 89%;--bc:344 38% 28%;--in:221 83% 53%;--su:142 76% 36%;--wa:32 95% 44%;--er:0 72% 51%;--rounded-btn:1.9rem}[data-theme=halloween]{--p:32 89% 52%;--pf:32 89% 42%;--sf:271 46% 34%;--af:91 100% 26%;--nf:180 4% 9%;--b2:0 0% 12%;--b3:0 0% 10%;--bc:0 0% 83%;--sc:271 100% 88%;--ac:91 100% 7%;--nc:180 5% 82%;--inc:221 100% 91%;--suc:142 100% 87%;--wac:32 100% 9%;--erc:0 100% 90%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:180 7% 8%;--s:271 46% 42%;--a:91 100% 33%;--n:180 4% 11%;--b1:0 0% 13%;--in:221 83% 53%;--su:142 76% 36%;--wa:32 95% 44%;--er:0 72% 51%}[data-theme=garden]{--p:139 16% 43%;--pf:139 16% 34%;--sf:97 37% 75%;--af:0 68% 75%;--nf:0 4% 28%;--b2:0 4% 82%;--b3:0 4% 74%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--pc:139 100% 89%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:97 37% 93%;--sc:96 32% 15%;--a:0 68% 94%;--ac:0 22% 16%;--n:0 4% 35%;--nc:0 4% 91%;--b1:0 4% 91%;--bc:0 3% 6%}[data-theme=forest]{--p:141 72% 42%;--pf:141 72% 34%;--sf:141 75% 38%;--af:35 69% 42%;--nf:0 10% 5%;--b2:0 12% 7%;--b3:0 12% 7%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--bc:0 12% 82%;--pc:141 100% 8%;--sc:141 100% 10%;--ac:35 100% 10%;--nc:0 7% 81%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:141 75% 48%;--a:35 69% 52%;--n:0 10% 6%;--b1:0 12% 8%;--rounded-btn:1.9rem}[data-theme=aqua]{--p:182 93% 49%;--pf:182 93% 40%;--sf:274 31% 45%;--af:47 100% 64%;--nf:205 54% 40%;--b2:219 53% 39%;--b3:219 53% 35%;--bc:219 100% 89%;--sc:274 100% 91%;--ac:47 100% 16%;--nc:205 100% 90%;--inc:221 100% 91%;--suc:142 100% 87%;--wac:32 100% 9%;--erc:0 100% 90%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--pc:181 100% 17%;--s:274 31% 57%;--a:47 100% 80%;--n:205 54% 50%;--b1:219 53% 43%;--in:221 83% 53%;--su:142 76% 36%;--wa:32 95% 44%;--er:0 72% 51%}[data-theme=lofi]{--p:0 0% 5%;--pf:0 0% 4%;--sf:0 2% 8%;--af:0 0% 12%;--nf:0 0% 0%;--btn-text-case:uppercase;--border-btn:1px;--tab-border:1px;--pc:0 0% 100%;--s:0 2% 10%;--sc:0 0% 100%;--a:0 0% 15%;--ac:0 0% 100%;--n:0 0% 0%;--nc:0 0% 100%;--b1:0 0% 100%;--b2:0 0% 95%;--b3:0 2% 90%;--bc:0 0% 0%;--in:212 100% 48%;--inc:0 0% 100%;--su:137 72% 46%;--suc:0 0% 100%;--wa:5 100% 66%;--wac:0 0% 100%;--er:325 78% 49%;--erc:0 0% 100%;--rounded-box:.25rem;--rounded-btn:.125rem;--rounded-badge:.125rem;--animation-btn:0;--animation-input:0;--btn-focus-scale:1;--tab-radius:0}[data-theme=pastel]{--p:284 22% 80%;--pf:284 22% 64%;--sf:352 70% 70%;--af:158 55% 65%;--nf:199 44% 49%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--bc:0 0% 20%;--pc:284 59% 16%;--sc:352 100% 18%;--ac:158 100% 16%;--nc:199 100% 12%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:352 70% 88%;--a:158 55% 81%;--n:199 44% 61%;--b1:0 0% 100%;--b2:210 20% 98%;--b3:216 12% 84%;--rounded-btn:1.9rem}[data-theme=fantasy]{--p:296 83% 25%;--pf:296 83% 20%;--sf:200 100% 30%;--af:31 94% 41%;--nf:215 28% 13%;--b2:0 0% 90%;--b3:0 0% 81%;--in:198 93% 60%;--su:158 64% 52%;--wa:43 96% 56%;--er:0 91% 71%;--pc:296 100% 85%;--sc:200 100% 87%;--ac:31 100% 10%;--nc:215 62% 83%;--inc:198 100% 12%;--suc:158 100% 10%;--wac:43 100% 11%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:200 100% 37%;--a:31 94% 51%;--n:215 28% 17%;--b1:0 0% 100%;--bc:215 28% 17%}[data-theme=wireframe]{font-family:Chalkboard,comic sans ms,sanssecondaryerif;--pf:0 0% 58%;--sf:0 0% 58%;--af:0 0% 58%;--nf:0 0% 74%;--bc:0 0% 20%;--pc:0 0% 14%;--sc:0 0% 14%;--ac:0 0% 14%;--nc:0 0% 18%;--inc:240 100% 90%;--suc:120 100% 85%;--wac:60 100% 10%;--erc:0 100% 90%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--p:0 0% 72%;--s:0 0% 72%;--a:0 0% 72%;--n:0 0% 92%;--b1:0 0% 100%;--b2:0 0% 93%;--b3:0 0% 87%;--in:240 100% 50%;--su:120 100% 25%;--wa:60 30% 50%;--er:0 100% 50%;--rounded-box:.2rem;--rounded-btn:.2rem;--rounded-badge:.2rem;--tab-radius:.2rem}[data-theme=black]{--p:0 2% 20%;--pf:0 2% 16%;--sf:0 2% 16%;--af:0 2% 16%;--bc:0 0% 80%;--pc:0 5% 84%;--sc:0 5% 84%;--ac:0 5% 84%;--nc:0 3% 83%;--inc:240 100% 90%;--suc:120 100% 85%;--wac:60 100% 10%;--erc:0 100% 90%;--border-btn:1px;--tab-border:1px;--s:0 2% 20%;--a:0 2% 20%;--b1:0 0% 0%;--b2:0 0% 5%;--b3:0 2% 10%;--n:0 1% 15%;--nf:0 2% 20%;--in:240 100% 50%;--su:120 100% 25%;--wa:60 100% 50%;--er:0 100% 50%;--rounded-box:0;--rounded-btn:0;--rounded-badge:0;--animation-btn:0;--animation-input:0;--btn-text-case:lowercase;--btn-focus-scale:1;--tab-radius:0}[data-theme=luxury]{--p:0 0% 100%;--pf:0 0% 80%;--sf:218 54% 14%;--af:319 22% 21%;--nf:270 4% 7%;--pc:0 0% 20%;--sc:218 100% 84%;--ac:319 85% 85%;--inc:202 100% 14%;--suc:89 100% 10%;--wac:54 100% 13%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:218 54% 18%;--a:319 22% 26%;--n:270 4% 9%;--nc:37 67% 58%;--b1:240 10% 4%;--b2:270 4% 9%;--b3:270 2% 18%;--bc:37 67% 58%;--in:202 100% 70%;--su:89 62% 52%;--wa:54 69% 64%;--er:0 100% 72%}[data-theme=dracula]{--p:326 100% 74%;--pf:326 100% 59%;--sf:265 89% 62%;--af:31 100% 57%;--nf:230 15% 24%;--b2:231 15% 17%;--b3:231 15% 15%;--pc:326 100% 15%;--sc:265 100% 16%;--ac:31 100% 14%;--nc:230 71% 86%;--inc:191 100% 15%;--suc:135 100% 13%;--wac:65 100% 15%;--erc:0 100% 93%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:265 89% 78%;--a:31 100% 71%;--n:230 15% 30%;--b1:231 15% 18%;--bc:60 30% 96%;--in:191 97% 77%;--su:135 94% 65%;--wa:65 92% 76%;--er:0 100% 67%}[data-theme=cmyk]{--p:203 83% 60%;--pf:203 83% 48%;--sf:335 78% 48%;--af:56 100% 48%;--nf:0 0% 8%;--b2:0 0% 90%;--b3:0 0% 81%;--bc:0 0% 20%;--pc:203 100% 12%;--sc:335 100% 92%;--ac:56 100% 12%;--nc:0 0% 82%;--inc:192 100% 10%;--suc:291 100% 88%;--wac:25 100% 11%;--erc:4 100% 91%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:335 78% 60%;--a:56 100% 60%;--n:0 0% 10%;--b1:0 0% 100%;--in:192 48% 52%;--su:291 48% 38%;--wa:25 85% 57%;--er:4 81% 56%}[data-theme=autumn]{--p:344 96% 28%;--pf:344 96% 22%;--sf:0 63% 47%;--af:27 56% 50%;--nf:22 17% 35%;--b2:0 0% 85%;--b3:0 0% 77%;--bc:0 0% 19%;--pc:344 100% 86%;--sc:0 100% 92%;--ac:27 100% 13%;--nc:22 100% 89%;--inc:187 100% 10%;--suc:165 100% 9%;--wac:30 100% 10%;--erc:354 100% 90%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:0 63% 58%;--a:27 56% 63%;--n:22 17% 44%;--b1:0 0% 95%;--in:187 48% 50%;--su:165 34% 43%;--wa:30 84% 50%;--er:354 79% 49%}[data-theme=business]{--p:210 64% 31%;--pf:210 64% 24%;--sf:200 13% 44%;--af:13 80% 48%;--nf:213 14% 13%;--b2:0 0% 11%;--b3:0 0% 10%;--bc:0 0% 83%;--pc:210 100% 86%;--sc:200 100% 11%;--ac:13 100% 12%;--nc:213 28% 83%;--inc:199 100% 88%;--suc:144 100% 11%;--wac:39 100% 12%;--erc:6 100% 89%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:200 13% 55%;--a:13 80% 60%;--n:213 14% 16%;--b1:0 0% 13%;--in:199 100% 42%;--su:144 31% 56%;--wa:39 64% 60%;--er:6 56% 43%;--rounded-box:.25rem;--rounded-btn:.125rem;--rounded-badge:.125rem}[data-theme=acid]{--p:303 100% 50%;--pf:303 100% 40%;--sf:27 100% 40%;--af:72 98% 40%;--nf:238 43% 14%;--b2:0 0% 88%;--b3:0 0% 79%;--bc:0 0% 20%;--pc:303 100% 90%;--sc:27 100% 10%;--ac:72 100% 10%;--nc:238 99% 83%;--inc:210 100% 12%;--suc:149 100% 12%;--wac:53 100% 11%;--erc:1 100% 89%;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:27 100% 50%;--a:72 98% 50%;--n:238 43% 17%;--b1:0 0% 98%;--in:210 92% 58%;--su:149 50% 58%;--wa:53 93% 57%;--er:1 100% 45%;--rounded-box:1.25rem;--rounded-btn:1rem;--rounded-badge:1rem}[data-theme=lemonade]{--p:89 96% 31%;--pf:89 96% 24%;--sf:60 81% 44%;--af:63 80% 71%;--nf:238 43% 14%;--b2:0 0% 90%;--b3:0 0% 81%;--bc:0 0% 20%;--pc:89 100% 86%;--sc:60 100% 11%;--ac:63 100% 18%;--nc:238 99% 83%;--inc:192 79% 17%;--suc:74 100% 16%;--wac:50 100% 15%;--erc:1 100% 17%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:60 81% 55%;--a:63 80% 88%;--n:238 43% 17%;--b1:0 0% 100%;--in:192 39% 85%;--su:74 76% 79%;--wa:50 87% 75%;--er:1 70% 83%}[data-theme=night]{--p:198 93% 60%;--pf:198 93% 48%;--sf:234 89% 59%;--af:329 86% 56%;--b2:222 47% 10%;--b3:222 47% 9%;--bc:222 66% 82%;--pc:198 100% 12%;--sc:234 100% 15%;--ac:329 100% 14%;--nc:217 76% 83%;--inc:198 100% 10%;--suc:172 100% 10%;--wac:41 100% 13%;--erc:351 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:234 89% 74%;--a:329 86% 70%;--n:217 33% 17%;--nf:217 30% 22%;--b1:222 47% 11%;--in:198 90% 48%;--su:172 66% 50%;--wa:41 88% 64%;--er:351 95% 71%}[data-theme=coffee]{--p:30 67% 58%;--pf:30 67% 46%;--sf:182 25% 16%;--af:194 74% 20%;--nf:300 20% 5%;--b2:306 19% 10%;--b3:306 19% 9%;--pc:30 100% 12%;--sc:182 67% 84%;--ac:194 100% 85%;--nc:300 14% 81%;--inc:171 100% 13%;--suc:93 100% 12%;--wac:43 100% 14%;--erc:10 100% 15%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:182 25% 20%;--a:194 74% 25%;--n:300 20% 6%;--b1:306 19% 11%;--bc:37 8% 42%;--in:171 37% 67%;--su:93 25% 62%;--wa:43 100% 69%;--er:10 95% 75%}[data-theme=winter]{--p:212 100% 51%;--pf:212 100% 41%;--sf:247 47% 35%;--af:310 49% 42%;--nf:217 92% 8%;--pc:212 100% 90%;--sc:247 100% 89%;--ac:310 100% 90%;--nc:217 100% 82%;--inc:192 100% 16%;--suc:182 100% 13%;--wac:32 100% 17%;--erc:0 100% 14%;--rounded-box:1rem;--rounded-btn:.5rem;--rounded-badge:1.9rem;--animation-btn:.25s;--animation-input:.2s;--btn-text-case:uppercase;--btn-focus-scale:.95;--border-btn:1px;--tab-border:1px;--tab-radius:.5rem;--s:247 47% 43%;--a:310 49% 52%;--n:217 92% 10%;--b1:0 0% 100%;--b2:217 100% 97%;--b3:219 44% 92%;--bc:214 30% 32%;--in:192 93% 78%;--su:182 47% 66%;--wa:32 62% 84%;--er:0 63% 72%}*,:after,:before{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / .5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000}.alert{display:flex;width:100%;flex-direction:column;align-items:center;justify-content:space-between;gap:1rem;--tw-bg-opacity:1;background-color:hsl(var(--b2,var(--b1)) / var(--tw-bg-opacity));padding:1rem;border-radius:var(--rounded-box,1rem)}.alert>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}@media (min-width:768px){.alert{flex-direction:row}.alert>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}}.alert>:where(*){display:flex;align-items:center;gap:.5rem}@-webkit-keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.input{flex-shrink:1;transition-property:color,background-color,border-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);height:3rem;padding-left:1rem;padding-right:1rem;font-size:.875rem;line-height:1.25rem;line-height:2;border-width:1px;border-color:hsl(var(--bc) / var(--tw-border-opacity));--tw-border-opacity:0;--tw-bg-opacity:1;background-color:hsl(var(--b1) / var(--tw-bg-opacity));border-radius:var(--rounded-btn,.5rem)}.input-group>*,.input-group>.input{border-radius:0}.link{cursor:pointer;-webkit-text-decoration-line:underline;text-decoration-line:underline}.range{height:1.5rem;width:100%;cursor:pointer;-webkit-appearance:none;--range-shdw:var(--bc);overflow:hidden;background-color:transparent;border-radius:var(--rounded-box,1rem)}.range:focus{outline:0}.steps .step{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));grid-template-columns:auto;grid-template-rows:repeat(2,minmax(0,1fr));grid-template-rows:40px 1fr;place-items:center;text-align:center;min-width:4rem}.btn-outline .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--nf,var(--n)) / var(--tw-border-opacity));background-color:transparent}.btn-outline:hover .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--b2,var(--b1)) / var(--tw-border-opacity));--tw-text-opacity:1;color:hsl(var(--nc) / var(--tw-text-opacity))}.btn-outline.btn-primary:hover .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--pc) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:hsl(var(--pf,var(--p)) / var(--tw-bg-opacity));--tw-text-opacity:1;color:hsl(var(--pc) / var(--tw-text-opacity))}.btn-outline.btn-secondary:hover .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--sc) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:hsl(var(--sf,var(--s)) / var(--tw-bg-opacity));--tw-text-opacity:1;color:hsl(var(--sc) / var(--tw-text-opacity))}.btn-outline.btn-accent:hover .badge.outline{--tw-border-opacity:1;border-color:hsl(var(--ac) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:hsl(var(--af,var(--a)) / var(--tw-bg-opacity));--tw-text-opacity:1;color:hsl(var(--ac) / var(--tw-text-opacity))}@-webkit-keyframes button-pop{0%{transform:scale(var(--btn-focus-scale,.95))}40%{transform:scale(1.02)}to{transform:scale(1)}}@keyframes button-pop{0%{transform:scale(var(--btn-focus-scale,.95))}40%{transform:scale(1.02)}to{transform:scale(1)}}@-webkit-keyframes checkmark{0%{background-position-y:5px}50%{background-position-y:-2px}to{background-position-y:0}}@keyframes checkmark{0%{background-position-y:5px}50%{background-position-y:-2px}to{background-position-y:0}}.input[list]::-webkit-calendar-picker-indicator{line-height:1em}.input:focus{outline:2px solid hsla(var(--bc) / .2);outline-offset:2px}.input-disabled,.input[disabled]{cursor:not-allowed;--tw-border-opacity:1;border-color:hsl(var(--b2,var(--b1)) / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:hsl(var(--b2,var(--b1)) / var(--tw-bg-opacity));--tw-text-opacity:.2}.input-disabled::-moz-placeholder,.input[disabled]::-moz-placeholder{color:hsl(var(--bc) / var(--tw-placeholder-opacity));--tw-placeholder-opacity:.2}.input-disabled:-ms-input-placeholder,.input[disabled]:-ms-input-placeholder{color:hsl(var(--bc) / var(--tw-placeholder-opacity));--tw-placeholder-opacity:.2}.input-disabled::placeholder,.input[disabled]::placeholder{color:hsl(var(--bc) / var(--tw-placeholder-opacity));--tw-placeholder-opacity:.2}.link:focus{outline:2px solid transparent;outline-offset:2px}.link:focus-visible{outline:2px solid currentColor;outline-offset:2px}@-webkit-keyframes progress-loading{50%{left:107%}}@keyframes progress-loading{50%{left:107%}}@-webkit-keyframes radiomark{0%{box-shadow:0 0 0 12px hsl(var(--b1)) inset,0 0 0 12px hsl(var(--b1)) inset}50%{box-shadow:0 0 0 3px hsl(var(--b1)) inset,0 0 0 3px hsl(var(--b1)) inset}to{box-shadow:0 0 0 4px hsl(var(--b1)) inset,0 0 0 4px hsl(var(--b1)) inset}}@keyframes radiomark{0%{box-shadow:0 0 0 12px hsl(var(--b1)) inset,0 0 0 12px hsl(var(--b1)) inset}50%{box-shadow:0 0 0 3px hsl(var(--b1)) inset,0 0 0 3px hsl(var(--b1)) inset}to{box-shadow:0 0 0 4px hsl(var(--b1)) inset,0 0 0 4px hsl(var(--b1)) inset}}.range:focus-visible::-webkit-slider-thumb{--focus-shadow:0 0 0 6px hsl(var(--b1)) inset,0 0 0 2rem hsl(var(--range-shdw)) inset}.range:focus-visible::-moz-range-thumb{--focus-shadow:0 0 0 6px hsl(var(--b1)) inset,0 0 0 2rem hsl(var(--range-shdw)) inset}.range::-webkit-slider-runnable-track{height:.5rem;width:100%;border-radius:var(--rounded-box,1rem);background-color:hsla(var(--bc) / .1)}.range::-moz-range-track{height:.5rem;width:100%;border-radius:var(--rounded-box,1rem);background-color:hsla(var(--bc) / .1)}.range::-webkit-slider-thumb{background-color:hsl(var(--b1));position:relative;height:1.5rem;width:1.5rem;border-style:none;border-radius:var(--rounded-box,1rem);-webkit-appearance:none;top:50%;color:hsl(var(--range-shdw));transform:translateY(-50%);--filler-size:100rem;--filler-offset:.6rem;box-shadow:0 0 0 3px hsl(var(--range-shdw)) inset,var(--focus-shadow,0 0),calc(var(--filler-size) * -1 - var(--filler-offset)) 0 0 var(--filler-size)}.range::-moz-range-thumb{background-color:hsl(var(--b1));position:relative;height:1.5rem;width:1.5rem;border-style:none;border-radius:var(--rounded-box,1rem);top:50%;color:hsl(var(--range-shdw));--filler-size:100rem;--filler-offset:.5rem;box-shadow:0 0 0 3px hsl(var(--range-shdw)) inset,var(--focus-shadow,0 0),calc(var(--filler-size) * -1 - var(--filler-offset)) 0 0 var(--filler-size)}@-webkit-keyframes rating-pop{0%{transform:translateY(-.125em)}40%{transform:translateY(-.125em)}to{transform:translateY(0)}}@keyframes rating-pop{0%{transform:translateY(-.125em)}40%{transform:translateY(-.125em)}to{transform:translateY(0)}}.steps .step:before{top:0;grid-column-start:1;grid-row-start:1;height:.5rem;width:100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-bg-opacity:1;background-color:hsl(var(--b3,var(--b2)) / var(--tw-bg-opacity));--tw-text-opacity:1;color:hsl(var(--bc) / var(--tw-text-opacity));content:"";margin-left:-100%}.steps .step:after{content:counter(step);counter-increment:step;z-index:1;position:relative;grid-column-start:1;grid-row-start:1;display:grid;height:2rem;width:2rem;place-items:center;place-self:center;border-radius:9999px;--tw-bg-opacity:1;background-color:hsl(var(--b3,var(--b2)) / var(--tw-bg-opacity));--tw-text-opacity:1;color:hsl(var(--bc) / var(--tw-text-opacity))}.steps .step:first-child:before{content:none}.steps .step[data-content]:after{content:attr(data-content)}.range-lg{height:2rem}.range-lg::-webkit-slider-runnable-track{height:1rem}.range-lg::-moz-range-track{height:1rem}.range-lg::-webkit-slider-thumb{height:2rem;width:2rem;--filler-offset:1rem}.range-lg::-moz-range-thumb{height:2rem;width:2rem;--filler-offset:1rem}.steps-horizontal .step{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));grid-template-rows:repeat(2,minmax(0,1fr));place-items:center;text-align:center}.steps-vertical .step{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));grid-template-rows:repeat(1,minmax(0,1fr))}.steps-horizontal .step{grid-template-rows:40px 1fr;grid-template-columns:auto;min-width:4rem}.steps-horizontal .step:before{height:.5rem;width:100%;--tw-translate-y:0px;--tw-translate-x:0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));content:"";margin-left:-100%}.steps-vertical .step{gap:.5rem;grid-template-columns:40px 1fr;grid-template-rows:auto;min-height:4rem;justify-items:start}.steps-vertical .step:before{height:100%;width:.5rem;--tw-translate-y:-50%;--tw-translate-x:-50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));margin-left:50%}.fixed{position:fixed}.absolute{position:absolute}.inset-x-0{left:0;right:0}.inset-y-0{top:0;bottom:0}.bottom-0{bottom:0}.right-0{right:0}.z-40{z-index:40}.z-50{z-index:50}.my-auto{margin-top:auto;margin-bottom:auto}.inline-block{display:inline-block}.flex{display:flex}.h-screen{height:100vh}.h-16{height:4rem}.h-8{height:2rem}.w-full{width:100%}.w-16{width:4rem}.w-8{width:2rem}.max-w-xs{max-width:20rem}.select-none{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.content-center{align-content:center}.justify-center{justify-content:center}.overflow-hidden{overflow:hidden}.rounded-l-lg{border-top-left-radius:.5rem;border-bottom-left-radius:.5rem}.rounded-r-lg{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}.bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39 / var(--tw-bg-opacity))}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}.bg-cover{background-size:cover}.fill-current{fill:currentColor}.stroke-current{stroke:currentColor}.text-center{text-align:center}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175 / var(--tw-text-opacity))}.subpixel-antialiased{-webkit-font-smoothing:auto;-moz-osx-font-smoothing:auto}.outline{outline-style:solid}a:active,a:focus,a:hover,button:active,button:focus,button:hover,input:active,input:focus,input:hover{outline:0}body{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;-webkit-font-smoothing:auto;-moz-osx-font-smoothing:auto}video{z-index:0;height:100vh;width:100%;--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}video::-webkit-media-controls{display:none}</style></head><body><noscript>you need to enable javascript to run this app</noscript><div id=screen><video id=video preload=auto autoplay=true muted=true></video></div><svg style=display:none><svg version=1.1 id=svg-fullscreen xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space=preserve fill=inherit stroke=inherit><path d="M39.642,9.722c-0.122-0.05-0.252-0.077-0.382-0.077H28.103c-0.553,0-1,0.447-1,1s0.447,1,1,1h8.743L21.7,26.791
	c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293L38.26,13.06v8.743
	c0,0.553,0.447,1,1,1s1-0.447,1-1V10.646c0-0.13-0.026-0.26-0.077-0.382C40.081,10.019,39.887,9.824,39.642,9.722z"></path><path d="M39.26,27.985c-0.553,0-1,0.447-1,1v10.66h-28v-28h10.683c0.553,0,1-0.447,1-1s-0.447-1-1-1H9.26c-0.553,0-1,0.447-1,1v30
	c0,0.553,0.447,1,1,1h30c0.553,0,1-0.447,1-1v-11.66C40.26,28.433,39.813,27.985,39.26,27.985z"></path></svg><svg version=1.1 id=svg-muted xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space=preserve fill=inherit stroke=inherit><path d="M35.735,24.4l4.542-4.548c0.39-0.392,0.39-1.024-0.001-1.415c-0.391-0.389-1.024-0.39-1.415,0.001l-4.545,4.552
	l-4.545-4.552c-0.391-0.391-1.024-0.39-1.415-0.001c-0.391,0.391-0.391,1.023-0.001,1.415l4.542,4.548l-4.542,4.547
	c-0.39,0.392-0.39,1.024,0.001,1.415c0.195,0.194,0.451,0.292,0.707,0.292s0.513-0.098,0.708-0.293l4.545-4.551l4.545,4.551
	c0.195,0.195,0.452,0.293,0.708,0.293s0.512-0.098,0.707-0.292c0.391-0.391,0.391-1.023,0.001-1.415L35.735,24.4z"></path><path d="M22.642,38.06c0.152,0,0.306-0.035,0.448-0.105c0.338-0.17,0.552-0.516,0.552-0.895v-24c0-0.379-0.214-0.725-0.552-0.895
	c-0.341-0.168-0.744-0.132-1.047,0.094l-8.2,6.134H9.569c-0.553,0-1,0.447-1,1v11.334c0,0.553,0.447,1,1,1h4.273l8.2,6.134
	C22.219,37.992,22.43,38.06,22.642,38.06z M21.642,35.063l-6.867-5.137c-0.173-0.129-0.383-0.199-0.599-0.199h-3.606v-9.334h3.606
	c0.216,0,0.426-0.07,0.599-0.199l6.867-5.137V35.063z"></path></svg><svg version=1.1 id=svg-restarting xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space=preserve fill=inherit stroke=inherit><path d="M38.243,28.251c-0.006-0.011-0.016-0.018-0.022-0.028c-0.027-0.049-0.066-0.087-0.101-0.13
	c-0.044-0.055-0.086-0.111-0.14-0.154c-0.039-0.032-0.084-0.052-0.128-0.078c-0.067-0.039-0.133-0.075-0.207-0.097
	c-0.019-0.006-0.033-0.02-0.052-0.025c-0.035-0.009-0.068,0-0.102-0.005c-0.068-0.01-0.134-0.015-0.203-0.01
	c-0.07,0.004-0.134,0.017-0.2,0.035c-0.027,0.008-0.055,0.004-0.082,0.015l-5.647,2.108c-0.518,0.193-0.78,0.769-0.587,1.286
	c0.193,0.518,0.77,0.779,1.287,0.587l3.688-1.376c-1.844,4.298-6.017,7.159-10.737,7.159c-5.338,0-10.006-3.686-11.35-8.964
	c-0.137-0.535-0.682-0.862-1.216-0.722c-0.536,0.136-0.859,0.681-0.723,1.216c1.57,6.164,7.034,10.47,13.288,10.47
	c5.497,0,10.359-3.306,12.533-8.279l1.793,3.484c0.177,0.345,0.527,0.542,0.89,0.542c0.154,0,0.311-0.035,0.457-0.111
	c0.491-0.252,0.685-0.855,0.432-1.347L38.243,28.251z"></path><path d="M25.008,13.536c5.164,0,9.664,3.386,11.199,8.426c0.161,0.529,0.72,0.824,1.248,0.666c0.528-0.161,0.826-0.72,0.665-1.248
	c-1.793-5.888-7.063-9.844-13.112-9.844c-5.269,0-9.939,2.998-12.244,7.658l-1.637-3.438c-0.238-0.5-0.836-0.711-1.333-0.473
	c-0.499,0.237-0.71,0.834-0.473,1.332l2.622,5.504c0.004,0.009,0.011,0.015,0.015,0.023c0.012,0.023,0.029,0.042,0.043,0.065
	c0.049,0.079,0.105,0.15,0.172,0.211c0.025,0.023,0.049,0.043,0.076,0.064c0.087,0.065,0.181,0.119,0.284,0.153
	c0.008,0.003,0.014,0.01,0.023,0.012c0.002,0.001,0.005,0,0.007,0.001c0.091,0.027,0.186,0.042,0.283,0.042c0,0,0,0,0,0s0,0,0,0
	c0.001,0,0.002,0,0.003,0c0.087,0,0.176-0.012,0.263-0.036l5.698-1.572c0.532-0.146,0.845-0.697,0.698-1.229
	c-0.146-0.532-0.698-0.847-1.23-0.698l-3.78,1.043C16.45,16.148,20.471,13.536,25.008,13.536z"></path></svg><svg version=1.1 id=svg-unfullscreen x=0px y=0px viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space=preserve sodipodi:docname=unfullscreen.svg inkscape:version="1.1.1 (3bf5ae0d25, 2021-09-20, custom)" xmlns:inkscape=http://www.inkscape.org/namespaces/inkscape xmlns:sodipodi=http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd xmlns=http://www.w3.org/2000/svg xmlns:svg=http://www.w3.org/2000/svg fill=inherit stroke=inherit><defs id=defs66></defs><sodipodi:namedview id=namedview64 pagecolor=#ffffff bordercolor=#666666 borderopacity=1.0 inkscape:pageshadow=2 inkscape:pageopacity=0.0 inkscape:pagecheckerboard=0 showgrid=false inkscape:zoom=16.62 inkscape:cx=25 inkscape:cy=25 inkscape:window-width=1920 inkscape:window-height=1048 inkscape:window-x=0 inkscape:window-y=32 inkscape:window-maximized=1 inkscape:current-layer=Layer_1></sodipodi:namedview><path d="m 22.02475,28.421 c 0.122,0.05 0.252,0.077 0.382,0.077 h 11.157 c 0.553,0 1,-0.447 1,-1 0,-0.553 -0.447,-1 -1,-1 h -8.743 l 15.146,-15.146 c 0.391,-0.391 0.391,-1.023 0,-1.414 -0.195,-0.195 -0.451,-0.293 -0.707,-0.293 -0.256,0 -0.512,0.098 -0.707,0.293 l -15.146,15.145 V 16.34 c 0,-0.553 -0.447,-1 -1,-1 -0.553,0 -1,0.447 -1,1 v 11.157 c 0,0.13 0.026,0.26 0.077,0.382 0.102,0.245 0.296,0.44 0.541,0.542 z" id=path59></path><path d="M39.26,27.985c-0.553,0-1,0.447-1,1v10.66h-28v-28h10.683c0.553,0,1-0.447,1-1s-0.447-1-1-1H9.26c-0.553,0-1,0.447-1,1v30  c0,0.553,0.447,1,1,1h30c0.553,0,1-0.447,1-1v-11.66C40.26,28.433,39.813,27.985,39.26,27.985z" id=path61></path></svg><svg version=1.1 id=svg-unmuted xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space=preserve fill=inherit stroke=inherit><path d="M37.341,37.567c0.264,0,0.526-0.104,0.724-0.31c2.852-2.987,4.487-7.332,4.487-11.922c0-4.589-1.636-8.934-4.486-11.921
	c-0.381-0.399-1.016-0.414-1.414-0.033c-0.399,0.382-0.414,1.015-0.033,1.414c2.5,2.619,3.934,6.461,3.934,10.54
	c0,4.08-1.434,7.922-3.935,10.541c-0.381,0.399-0.366,1.032,0.033,1.414C36.844,37.476,37.093,37.567,37.341,37.567z"></path><path d="M34.016,34.482c0.252,0,0.504-0.095,0.698-0.284c2.225-2.172,3.501-5.401,3.501-8.861c0-3.461-1.276-6.69-3.501-8.862
	c-0.395-0.385-1.027-0.378-1.414,0.018c-0.386,0.396-0.378,1.028,0.018,1.414c1.841,1.797,2.897,4.506,2.897,7.431
	s-1.057,5.633-2.897,7.43c-0.396,0.386-0.403,1.019-0.018,1.414C33.496,34.382,33.756,34.482,34.016,34.482z"></path><path d="M30.084,29.571c-0.424,0.354-0.479,0.985-0.126,1.409c0.198,0.236,0.482,0.358,0.769,0.358c0.226,0,0.453-0.076,0.641-0.232
	c1.572-1.314,2.511-3.472,2.511-5.77c0-2.333-0.961-4.508-2.57-5.82c-0.428-0.35-1.058-0.282-1.407,0.144
	c-0.349,0.428-0.284,1.058,0.144,1.407c1.148,0.936,1.834,2.532,1.834,4.27C31.878,27.05,31.207,28.633,30.084,29.571z"></path><path d="M24.03,12.536l-8.203,6.134h-4.275c-0.553,0-1,0.447-1,1v11.334c0,0.553,0.447,1,1,1h4.275l8.203,6.134
	c0.176,0.132,0.387,0.199,0.599,0.199c0.152,0,0.307-0.035,0.448-0.105c0.338-0.17,0.552-0.516,0.552-0.895v-24
	c0-0.379-0.214-0.725-0.552-0.895C24.739,12.275,24.332,12.31,24.03,12.536z M23.629,35.341l-6.87-5.138
	c-0.173-0.129-0.383-0.199-0.599-0.199h-3.608V20.67h3.608c0.216,0,0.426-0.07,0.599-0.199l6.87-5.138V35.341z"></path></svg></svg></body></html>